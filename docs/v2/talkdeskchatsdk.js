(function(Le,mr){typeof exports=="object"&&typeof module<"u"?module.exports=mr():typeof define=="function"&&define.amd?define(mr):(Le=typeof globalThis<"u"?globalThis:Le||self,Le.TalkdeskChatSDK=mr())})(this,function(){"use strict";/*!
* Talkdesk Confidential
*
* Copyright (C) Talkdesk Inc. 2024
*
* The source code for this program is not published or otherwise divested
* of its trade secrets, irrespective of what has been deposited with the
* U.S. Copyright Office. Unauthorized copying of this file, via any medium
* is strictly prohibited.
*/function Le(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function mr(e){if(Array.isArray(e))return e}function Iv(e){if(Array.isArray(e))return Le(e)}function Tv(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fo(e,r,t,n,a,i,o){try{var s=e[i](o),c=s.value}catch(u){return void t(u)}s.done?r(c):Promise.resolve(c).then(n,a)}function q(e){return function(){var r=this,t=arguments;return new Promise(function(n,a){var i=e.apply(r,t);function o(c){fo(i,n,a,o,s,"next",c)}function s(c){fo(i,n,a,o,s,"throw",c)}o(void 0)})}}function Pv(e,r,t){return r=wr(r),Mv(e,pn()?Reflect.construct(r,t||[],wr(e).constructor):r.apply(e,t))}function $r(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function Rv(e,r,t){if(pn())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,r);var a=new(e.bind.apply(e,n));return t&&Sr(a,t.prototype),a}function ho(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,go(n.key),n)}}function br(e,r,t){return r&&ho(e.prototype,r),t&&ho(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L(e,r,t){return(r=go(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function wr(e){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},wr(e)}function Cv(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),r&&Sr(e,r)}function _v(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function pn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pn=function(){return!!e})()}function xv(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lv(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,a,i,o,s=[],c=!0,u=!1;try{if(i=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=i.call(t)).done)&&(s.push(n.value),s.length!==r);c=!0);}catch(v){u=!0,a=v}finally{try{if(!c&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw a}}return s}}function Av(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function po(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function N(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?po(Object(t),!0).forEach(function(n){L(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):po(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function kv(e,r){if(e==null)return{};var t,n,a=Nv(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.includes(t)||{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function Nv(e,r){if(e==null)return{};var t={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(r.includes(n))continue;t[n]=e[n]}return t}function Mv(e,r){if(r&&(typeof r=="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tv(e)}function R(){R=function(){return r};var e,r={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(p,h,y){p[h]=y.value},i=typeof Symbol=="function"?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(p,h,y){return Object.defineProperty(p,h,{value:y,enumerable:!0,configurable:!0,writable:!0}),p[h]}try{u({},"")}catch{u=function(h,y,E){return h[y]=E}}function v(p,h,y,E){var b=h&&h.prototype instanceof S?h:S,I=Object.create(b.prototype),D=new ze(E||[]);return a(I,"_invoke",{value:gr(p,y,D)}),I}function l(p,h,y){try{return{type:"normal",arg:p.call(h,y)}}catch(E){return{type:"throw",arg:E}}}r.wrap=v;var f="suspendedStart",d="suspendedYield",g="executing",$="completed",m={};function S(){}function w(){}function T(){}var x={};u(x,o,function(){return this});var fe=Object.getPrototypeOf,U=fe&&fe(fe(be([])));U&&U!==t&&n.call(U,o)&&(x=U);var O=T.prototype=S.prototype=Object.create(x);function k(p){["next","throw","return"].forEach(function(h){u(p,h,function(y){return this._invoke(h,y)})})}function oe(p,h){function y(b,I,D,J){var Q=l(p[b],p,I);if(Q.type!=="throw"){var yr=Q.arg,Qr=yr.value;return Qr&&typeof Qr=="object"&&n.call(Qr,"__await")?h.resolve(Qr.__await).then(function(We){y("next",We,D,J)},function(We){y("throw",We,D,J)}):h.resolve(Qr).then(function(We){yr.value=We,D(yr)},function(We){return y("throw",We,D,J)})}J(Q.arg)}var E;a(this,"_invoke",{value:function(b,I){function D(){return new h(function(J,Q){y(b,I,J,Q)})}return E=E?E.then(D,D):D()}})}function gr(p,h,y){var E=f;return function(b,I){if(E===g)throw Error("Generator is already running");if(E===$){if(b==="throw")throw I;return{value:e,done:!0}}for(y.method=b,y.arg=I;;){var D=y.delegate;if(D){var J=se(D,y);if(J){if(J===m)continue;return J}}if(y.method==="next")y.sent=y._sent=y.arg;else if(y.method==="throw"){if(E===f)throw E=$,y.arg;y.dispatchException(y.arg)}else y.method==="return"&&y.abrupt("return",y.arg);E=g;var Q=l(p,h,y);if(Q.type==="normal"){if(E=y.done?$:d,Q.arg===m)continue;return{value:Q.arg,done:y.done}}Q.type==="throw"&&(E=$,y.method="throw",y.arg=Q.arg)}}}function se(p,h){var y=h.method,E=p.iterator[y];if(E===e)return h.delegate=null,y==="throw"&&p.iterator.return&&(h.method="return",h.arg=e,se(p,h),h.method==="throw")||y!=="return"&&(h.method="throw",h.arg=new TypeError("The iterator does not provide a '"+y+"' method")),m;var b=l(E,p.iterator,h.arg);if(b.type==="throw")return h.method="throw",h.arg=b.arg,h.delegate=null,m;var I=b.arg;return I?I.done?(h[p.resultName]=I.value,h.next=p.nextLoc,h.method!=="return"&&(h.method="next",h.arg=e),h.delegate=null,m):I:(h.method="throw",h.arg=new TypeError("iterator result is not an object"),h.delegate=null,m)}function hn(p){var h={tryLoc:p[0]};1 in p&&(h.catchLoc=p[1]),2 in p&&(h.finallyLoc=p[2],h.afterLoc=p[3]),this.tryEntries.push(h)}function He(p){var h=p.completion||{};h.type="normal",delete h.arg,p.completion=h}function ze(p){this.tryEntries=[{tryLoc:"root"}],p.forEach(hn,this),this.reset(!0)}function be(p){if(p||p===""){var h=p[o];if(h)return h.call(p);if(typeof p.next=="function")return p;if(!isNaN(p.length)){var y=-1,E=function b(){for(;++y<p.length;)if(n.call(p,y))return b.value=p[y],b.done=!1,b;return b.value=e,b.done=!0,b};return E.next=E}}throw new TypeError(typeof p+" is not iterable")}return w.prototype=T,a(O,"constructor",{value:T,configurable:!0}),a(T,"constructor",{value:w,configurable:!0}),w.displayName=u(T,c,"GeneratorFunction"),r.isGeneratorFunction=function(p){var h=typeof p=="function"&&p.constructor;return!!h&&(h===w||(h.displayName||h.name)==="GeneratorFunction")},r.mark=function(p){return Object.setPrototypeOf?Object.setPrototypeOf(p,T):(p.__proto__=T,u(p,c,"GeneratorFunction")),p.prototype=Object.create(O),p},r.awrap=function(p){return{__await:p}},k(oe.prototype),u(oe.prototype,s,function(){return this}),r.AsyncIterator=oe,r.async=function(p,h,y,E,b){b===void 0&&(b=Promise);var I=new oe(v(p,h,y,E),b);return r.isGeneratorFunction(h)?I:I.next().then(function(D){return D.done?D.value:I.next()})},k(O),u(O,c,"Generator"),u(O,o,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),r.keys=function(p){var h=Object(p),y=[];for(var E in h)y.push(E);return y.reverse(),function b(){for(;y.length;){var I=y.pop();if(I in h)return b.value=I,b.done=!1,b}return b.done=!0,b}},r.values=be,ze.prototype={constructor:ze,reset:function(p){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(He),!p)for(var h in this)h.charAt(0)==="t"&&n.call(this,h)&&!isNaN(+h.slice(1))&&(this[h]=e)},stop:function(){this.done=!0;var p=this.tryEntries[0].completion;if(p.type==="throw")throw p.arg;return this.rval},dispatchException:function(p){if(this.done)throw p;var h=this;function y(Q,yr){return I.type="throw",I.arg=p,h.next=Q,yr&&(h.method="next",h.arg=e),!!yr}for(var E=this.tryEntries.length-1;E>=0;--E){var b=this.tryEntries[E],I=b.completion;if(b.tryLoc==="root")return y("end");if(b.tryLoc<=this.prev){var D=n.call(b,"catchLoc"),J=n.call(b,"finallyLoc");if(D&&J){if(this.prev<b.catchLoc)return y(b.catchLoc,!0);if(this.prev<b.finallyLoc)return y(b.finallyLoc)}else if(D){if(this.prev<b.catchLoc)return y(b.catchLoc,!0)}else{if(!J)throw Error("try statement without catch or finally");if(this.prev<b.finallyLoc)return y(b.finallyLoc)}}}},abrupt:function(p,h){for(var y=this.tryEntries.length-1;y>=0;--y){var E=this.tryEntries[y];if(E.tryLoc<=this.prev&&n.call(E,"finallyLoc")&&this.prev<E.finallyLoc){var b=E;break}}b&&(p==="break"||p==="continue")&&b.tryLoc<=h&&h<=b.finallyLoc&&(b=null);var I=b?b.completion:{};return I.type=p,I.arg=h,b?(this.method="next",this.next=b.finallyLoc,m):this.complete(I)},complete:function(p,h){if(p.type==="throw")throw p.arg;return p.type==="break"||p.type==="continue"?this.next=p.arg:p.type==="return"?(this.rval=this.arg=p.arg,this.method="return",this.next="end"):p.type==="normal"&&h&&(this.next=h),m},finish:function(p){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.finallyLoc===p)return this.complete(y.completion,y.afterLoc),He(y),m}},catch:function(p){for(var h=this.tryEntries.length-1;h>=0;--h){var y=this.tryEntries[h];if(y.tryLoc===p){var E=y.completion;if(E.type==="throw"){var b=E.arg;He(y)}return b}}throw Error("illegal catch attempt")},delegateYield:function(p,h,y){return this.delegate={iterator:be(p),resultName:h,nextLoc:y},this.method==="next"&&(this.arg=e),m}},r}function Sr(e,r){return Sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Sr(e,r)}function gn(e,r){return mr(e)||Lv(e,r)||yo(e,r)||Av()}function Uv(e){return Iv(e)||xv(e)||yo(e)||jv()}function Bv(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,r||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function go(e){var r=Bv(e,"string");return typeof r=="symbol"?r:r+""}function yo(e,r){if(e){if(typeof e=="string")return Le(e,r);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Le(e,r):void 0}}function yn(e){var r=typeof Map=="function"?new Map:void 0;return yn=function(t){if(t===null||!_v(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(r!==void 0){if(r.has(t))return r.get(t);r.set(t,n)}function n(){return Rv(t,arguments,wr(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Sr(n,t)},yn(e)}var Zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dv(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Er=function(e){return e&&e.Math===Math&&e},A=Er(typeof globalThis=="object"&&globalThis)||Er(typeof window=="object"&&window)||Er(typeof self=="object"&&self)||Er(typeof Zr=="object"&&Zr)||Er(typeof Zr=="object"&&Zr)||function(){return this}()||Function("return this")(),mo={exports:{}},Fv=!1,$o=A,Gv=Object.defineProperty,mn=function(e,r){try{Gv($o,e,{value:r,configurable:!0,writable:!0})}catch{$o[e]=r}return r},Hv=A,zv=mn,bo="__core-js_shared__",wo=mo.exports=Hv[bo]||zv(bo,{});(wo.versions||(wo.versions=[])).push({version:"3.38.0",mode:"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE",source:"https://github.com/zloirock/core-js"});var $n=mo.exports,So=$n,bn=function(e,r){return So[e]||(So[e]=r||{})},P=function(e){try{return!!e()}catch{return!0}},Wv=P,et=!Wv(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Eo=et,Oo=Function.prototype,wn=Oo.call,Kv=Eo&&Oo.bind.bind(wn,wn),_=Eo?Kv:function(e){return function(){return wn.apply(e,arguments)}},Ae=function(e){return e==null},qv=Ae,Vv=TypeError,Ke=function(e){if(qv(e))throw new Vv("Can't call method on "+e);return e},Yv=Ke,Xv=Object,we=function(e){return Xv(Yv(e))},Jv=_,Qv=we,Zv=Jv({}.hasOwnProperty),V=Object.hasOwn||function(r,t){return Zv(Qv(r),t)},ef=_,rf=0,tf=Math.random(),nf=ef(1 .toString),Sn=function(e){return"Symbol("+(e===void 0?"":e)+")_"+nf(++rf+tf,36)},af=A,Io=af.navigator,To=Io&&Io.userAgent,Or=To?String(To):"",Po=A,En=Or,Ro=Po.process,Co=Po.Deno,_o=Ro&&Ro.versions||Co&&Co.version,xo=_o&&_o.v8,ue,rt;xo&&(ue=xo.split("."),rt=ue[0]>0&&ue[0]<4?1:+(ue[0]+ue[1])),!rt&&En&&(ue=En.match(/Edge\/(\d+)/),(!ue||ue[1]>=74)&&(ue=En.match(/Chrome\/(\d+)/),ue&&(rt=+ue[1])));var tt=rt,Lo=tt,of=P,sf=A,uf=sf.String,Ao=!!Object.getOwnPropertySymbols&&!of(function(){var e=Symbol("symbol detection");return!uf(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Lo&&Lo<41}),cf=Ao,jo=cf&&!Symbol.sham&&typeof Symbol.iterator=="symbol",lf=A,vf=bn,ko=V,ff=Sn,df=Ao,hf=jo,qe=lf.Symbol,On=vf("wks"),pf=hf?qe.for||qe:qe&&qe.withoutSetter||ff,M=function(e){return ko(On,e)||(On[e]=df&&ko(qe,e)?qe[e]:pf("Symbol."+e)),On[e]},gf=M,yf=gf("toStringTag"),No={};No[yf]="z";var In=String(No)==="[object z]",Tn=typeof document=="object"&&document.all,j=typeof Tn>"u"&&Tn!==void 0?function(e){return typeof e=="function"||e===Tn}:function(e){return typeof e=="function"},ce={},mf=P,G=!mf(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),$f=j,H=function(e){return typeof e=="object"?e!==null:$f(e)},bf=A,Mo=H,Pn=bf.document,wf=Mo(Pn)&&Mo(Pn.createElement),nt=function(e){return wf?Pn.createElement(e):{}},Sf=G,Ef=P,Of=nt,Uo=!Sf&&!Ef(function(){return Object.defineProperty(Of("div"),"a",{get:function(){return 7}}).a!==7}),If=G,Tf=P,Bo=If&&Tf(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Pf=H,Rf=String,Cf=TypeError,z=function(e){if(Pf(e))return e;throw new Cf(Rf(e)+" is not an object")},_f=et,at=Function.prototype.call,F=_f?at.bind(at):function(){return at.apply(at,arguments)},Rn=A,xf=j,Lf=function(e){return xf(e)?e:void 0},je=function(e,r){return arguments.length<2?Lf(Rn[e]):Rn[e]&&Rn[e][r]},Af=_,it=Af({}.isPrototypeOf),jf=je,kf=j,Nf=it,Mf=jo,Uf=Object,Do=Mf?function(e){return typeof e=="symbol"}:function(e){var r=jf("Symbol");return kf(r)&&Nf(r.prototype,Uf(e))},Bf=String,ot=function(e){try{return Bf(e)}catch{return"Object"}},Df=j,Ff=ot,Gf=TypeError,Se=function(e){if(Df(e))return e;throw new Gf(Ff(e)+" is not a function")},Hf=Se,zf=Ae,st=function(e,r){var t=e[r];return zf(t)?void 0:Hf(t)},Cn=F,_n=j,xn=H,Wf=TypeError,Kf=function(e,r){var t,n;if(r==="string"&&_n(t=e.toString)&&!xn(n=Cn(t,e))||_n(t=e.valueOf)&&!xn(n=Cn(t,e))||r!=="string"&&_n(t=e.toString)&&!xn(n=Cn(t,e)))return n;throw new Wf("Can't convert object to primitive value")},qf=F,Fo=H,Go=Do,Vf=st,Yf=Kf,Xf=M,Jf=TypeError,Qf=Xf("toPrimitive"),Zf=function(e,r){if(!Fo(e)||Go(e))return e;var t=Vf(e,Qf),n;if(t){if(r===void 0&&(r="default"),n=qf(t,e,r),!Fo(n)||Go(n))return n;throw new Jf("Can't convert object to primitive value")}return r===void 0&&(r="number"),Yf(e,r)},ed=Zf,rd=Do,Ho=function(e){var r=ed(e,"string");return rd(r)?r:r+""},td=G,nd=Uo,ad=Bo,ut=z,zo=Ho,id=TypeError,Ln=Object.defineProperty,od=Object.getOwnPropertyDescriptor,An="enumerable",jn="configurable",kn="writable";ce.f=td?ad?function(r,t,n){if(ut(r),t=zo(t),ut(n),typeof r=="function"&&t==="prototype"&&"value"in n&&kn in n&&!n[kn]){var a=od(r,t);a&&a[kn]&&(r[t]=n.value,n={configurable:jn in n?n[jn]:a[jn],enumerable:An in n?n[An]:a[An],writable:!1})}return Ln(r,t,n)}:Ln:function(r,t,n){if(ut(r),t=zo(t),ut(n),nd)try{return Ln(r,t,n)}catch{}if("get"in n||"set"in n)throw new id("Accessors not supported");return"value"in n&&(r[t]=n.value),r};var Wo={exports:{}},Nn=G,sd=V,Ko=Function.prototype,ud=Nn&&Object.getOwnPropertyDescriptor,Mn=sd(Ko,"name"),cd=Mn&&(function(){}).name==="something",ld=Mn&&(!Nn||Nn&&ud(Ko,"name").configurable),ct={EXISTS:Mn,PROPER:cd,CONFIGURABLE:ld},vd=_,fd=j,Un=$n,dd=vd(Function.toString);fd(Un.inspectSource)||(Un.inspectSource=function(e){return dd(e)});var Bn=Un.inspectSource,hd=A,pd=j,qo=hd.WeakMap,gd=pd(qo)&&/native code/.test(String(qo)),Ir=function(e,r){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:r}},yd=G,md=ce,$d=Ir,Ve=yd?function(e,r,t){return md.f(e,r,$d(1,t))}:function(e,r,t){return e[r]=t,e},bd=bn,wd=Sn,Vo=bd("keys"),Dn=function(e){return Vo[e]||(Vo[e]=wd(e))},lt={},Sd=gd,Yo=A,Ed=H,Od=Ve,Fn=V,Gn=$n,Id=Dn,Td=lt,Xo="Object already initialized",Hn=Yo.TypeError,Pd=Yo.WeakMap,vt,Tr,ft,Rd=function(e){return ft(e)?Tr(e):vt(e,{})},Cd=function(e){return function(r){var t;if(!Ed(r)||(t=Tr(r)).type!==e)throw new Hn("Incompatible receiver, "+e+" required");return t}};if(Sd||Gn.state){var de=Gn.state||(Gn.state=new Pd);de.get=de.get,de.has=de.has,de.set=de.set,vt=function(e,r){if(de.has(e))throw new Hn(Xo);return r.facade=e,de.set(e,r),r},Tr=function(e){return de.get(e)||{}},ft=function(e){return de.has(e)}}else{var Ye=Id("state");Td[Ye]=!0,vt=function(e,r){if(Fn(e,Ye))throw new Hn(Xo);return r.facade=e,Od(e,Ye,r),r},Tr=function(e){return Fn(e,Ye)?e[Ye]:{}},ft=function(e){return Fn(e,Ye)}}var Ee={set:vt,get:Tr,has:ft,enforce:Rd,getterFor:Cd},zn=_,_d=P,xd=j,dt=V,Wn=G,Ld=ct.CONFIGURABLE,Ad=Bn,Jo=Ee,jd=Jo.enforce,kd=Jo.get,Qo=String,ht=Object.defineProperty,Nd=zn("".slice),Md=zn("".replace),Ud=zn([].join),Bd=Wn&&!_d(function(){return ht(function(){},"length",{value:8}).length!==8}),Dd=String(String).split("String"),Fd=Wo.exports=function(e,r,t){Nd(Qo(r),0,7)==="Symbol("&&(r="["+Md(Qo(r),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),t&&t.getter&&(r="get "+r),t&&t.setter&&(r="set "+r),(!dt(e,"name")||Ld&&e.name!==r)&&(Wn?ht(e,"name",{value:r,configurable:!0}):e.name=r),Bd&&t&&dt(t,"arity")&&e.length!==t.arity&&ht(e,"length",{value:t.arity});try{t&&dt(t,"constructor")&&t.constructor?Wn&&ht(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch{}var n=jd(e);return dt(n,"source")||(n.source=Ud(Dd,typeof r=="string"?r:"")),e};Function.prototype.toString=Fd(function(){return xd(this)&&kd(this).source||Ad(this)},"toString");var Zo=Wo.exports,Gd=j,Hd=ce,zd=Zo,Wd=mn,Z=function(e,r,t,n){n||(n={});var a=n.enumerable,i=n.name!==void 0?n.name:r;if(Gd(t)&&zd(t,i,n),n.global)a?e[r]=t:Wd(r,t);else{try{n.unsafe?e[r]&&(a=!0):delete e[r]}catch{}a?e[r]=t:Hd.f(e,r,{value:t,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},es=_,Kd=es({}.toString),qd=es("".slice),Oe=function(e){return qd(Kd(e),8,-1)},Vd=In,Yd=j,pt=Oe,Xd=M,Jd=Xd("toStringTag"),Qd=Object,Zd=pt(function(){return arguments}())==="Arguments",eh=function(e,r){try{return e[r]}catch{}},Pr=Vd?pt:function(e){var r,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=eh(r=Qd(e),Jd))=="string"?t:Zd?pt(r):(n=pt(r))==="Object"&&Yd(r.callee)?"Arguments":n},rh=In,th=Pr,nh=rh?{}.toString:function(){return"[object "+th(this)+"]"},ah=In,ih=Z,oh=nh;ah||ih(Object.prototype,"toString",oh,{unsafe:!0});var Kn={},gt={},rs={}.propertyIsEnumerable,ts=Object.getOwnPropertyDescriptor,sh=ts&&!rs.call({1:2},1);gt.f=sh?function(r){var t=ts(this,r);return!!t&&t.enumerable}:rs;var uh=_,ch=P,lh=Oe,qn=Object,vh=uh("".split),yt=ch(function(){return!qn("z").propertyIsEnumerable(0)})?function(e){return lh(e)==="String"?vh(e,""):qn(e)}:qn,fh=yt,dh=Ke,ge=function(e){return fh(dh(e))},hh=G,ph=F,gh=gt,yh=Ir,mh=ge,$h=Ho,bh=V,wh=Uo,ns=Object.getOwnPropertyDescriptor;Kn.f=hh?ns:function(r,t){if(r=mh(r),t=$h(t),wh)try{return ns(r,t)}catch{}if(bh(r,t))return yh(!ph(gh.f,r,t),r[t])};var mt={},Sh=Math.ceil,Eh=Math.floor,Oh=Math.trunc||function(r){var t=+r;return(t>0?Eh:Sh)(t)},Ih=Oh,$t=function(e){var r=+e;return r!==r||r===0?0:Ih(r)},Th=$t,Ph=Math.max,Rh=Math.min,as=function(e,r){var t=Th(e);return t<0?Ph(t+r,0):Rh(t,r)},Ch=$t,_h=Math.min,is=function(e){var r=Ch(e);return r>0?_h(r,9007199254740991):0},xh=is,Xe=function(e){return xh(e.length)},Lh=ge,Ah=as,jh=Xe,os=function(e){return function(r,t,n){var a=Lh(r),i=jh(a);if(i===0)return!e&&-1;var o=Ah(n,i),s;if(e&&t!==t){for(;i>o;)if(s=a[o++],s!==s)return!0}else for(;i>o;o++)if((e||o in a)&&a[o]===t)return e||o||0;return!e&&-1}},kh={includes:os(!0),indexOf:os(!1)},Nh=_,Vn=V,Mh=ge,Uh=kh.indexOf,Bh=lt,ss=Nh([].push),us=function(e,r){var t=Mh(e),n=0,a=[],i;for(i in t)!Vn(Bh,i)&&Vn(t,i)&&ss(a,i);for(;r.length>n;)Vn(t,i=r[n++])&&(~Uh(a,i)||ss(a,i));return a},Yn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Dh=us,Fh=Yn,Gh=Fh.concat("length","prototype");mt.f=Object.getOwnPropertyNames||function(r){return Dh(r,Gh)};var Xn={};Xn.f=Object.getOwnPropertySymbols;var Hh=je,zh=_,Wh=mt,Kh=Xn,qh=z,Vh=zh([].concat),Yh=Hh("Reflect","ownKeys")||function(r){var t=Wh.f(qh(r)),n=Kh.f;return n?Vh(t,n(r)):t},cs=V,Xh=Yh,Jh=Kn,Qh=ce,Zh=function(e,r,t){for(var n=Xh(r),a=Qh.f,i=Jh.f,o=0;o<n.length;o++){var s=n[o];!cs(e,s)&&!(t&&cs(t,s))&&a(e,s,i(r,s))}},ep=P,rp=j,tp=/#|\.prototype\./,Rr=function(e,r){var t=ap[np(e)];return t===op?!0:t===ip?!1:rp(r)?ep(r):!!r},np=Rr.normalize=function(e){return String(e).replace(tp,".").toLowerCase()},ap=Rr.data={},ip=Rr.NATIVE="N",op=Rr.POLYFILL="P",Jn=Rr,bt=A,sp=Kn.f,up=Ve,cp=Z,lp=mn,vp=Zh,fp=Jn,B=function(e,r){var t=e.target,n=e.global,a=e.stat,i,o,s,c,u,v;if(n?o=bt:a?o=bt[t]||lp(t,{}):o=bt[t]&&bt[t].prototype,o)for(s in r){if(u=r[s],e.dontCallGetSet?(v=sp(o,s),c=v&&v.value):c=o[s],i=fp(n?s:t+(a?".":"#")+s,e.forced),!i&&c!==void 0){if(typeof u==typeof c)continue;vp(u,c)}(e.sham||c&&c.sham)&&up(u,"sham",!0),cp(o,s,u,e)}},Cr=A,dp=Or,hp=Oe,wt=function(e){return dp.slice(0,e.length)===e},ls=function(){return wt("Bun/")?"BUN":wt("Cloudflare-Workers")?"CLOUDFLARE":wt("Deno/")?"DENO":wt("Node.js/")?"NODE":Cr.Bun&&typeof Bun.version=="string"?"BUN":Cr.Deno&&typeof Deno.version=="object"?"DENO":hp(Cr.process)==="process"?"NODE":Cr.window&&Cr.document?"BROWSER":"REST"}(),pp=ls,Qn=pp==="NODE",gp=_,yp=Se,mp=function(e,r,t){try{return gp(yp(Object.getOwnPropertyDescriptor(e,r)[t]))}catch{}},$p=H,bp=function(e){return $p(e)||e===null},wp=bp,Sp=String,Ep=TypeError,Op=function(e){if(wp(e))return e;throw new Ep("Can't set "+Sp(e)+" as a prototype")},Ip=mp,Tp=H,Pp=Ke,Rp=Op,Zn=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,r={},t;try{t=Ip(Object.prototype,"__proto__","set"),t(r,[]),e=r instanceof Array}catch{}return function(a,i){return Pp(a),Rp(i),Tp(a)&&(e?t(a,i):a.__proto__=i),a}}():void 0),Cp=ce.f,_p=V,xp=M,vs=xp("toStringTag"),ke=function(e,r,t){e&&!t&&(e=e.prototype),e&&!_p(e,vs)&&Cp(e,vs,{configurable:!0,value:r})},fs=Zo,Lp=ce,St=function(e,r,t){return t.get&&fs(t.get,r,{getter:!0}),t.set&&fs(t.set,r,{setter:!0}),Lp.f(e,r,t)},Ap=je,jp=St,kp=M,Np=G,ds=kp("species"),hs=function(e){var r=Ap(e);Np&&r&&!r[ds]&&jp(r,ds,{configurable:!0,get:function(){return this}})},Mp=it,Up=TypeError,_r=function(e,r){if(Mp(r,e))return e;throw new Up("Incorrect invocation")},Bp=_,Dp=P,ps=j,Fp=Pr,Gp=je,Hp=Bn,gs=function(){},ys=Gp("Reflect","construct"),ea=/^\s*(?:class|function)\b/,zp=Bp(ea.exec),Wp=!ea.test(gs),xr=function(r){if(!ps(r))return!1;try{return ys(gs,[],r),!0}catch{return!1}},ms=function(r){if(!ps(r))return!1;switch(Fp(r)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Wp||!!zp(ea,Hp(r))}catch{return!0}};ms.sham=!0;var Et=!ys||Dp(function(){var e;return xr(xr.call)||!xr(Object)||!xr(function(){e=!0})||e})?ms:xr,Kp=Et,qp=ot,Vp=TypeError,Yp=function(e){if(Kp(e))return e;throw new Vp(qp(e)+" is not a constructor")},$s=z,Xp=Yp,Jp=Ae,Qp=M,Zp=Qp("species"),eg=function(e,r){var t=$s(e).constructor,n;return t===void 0||Jp(n=$s(t)[Zp])?r:Xp(n)},rg=et,bs=Function.prototype,ws=bs.apply,Ss=bs.call,Es=typeof Reflect=="object"&&Reflect.apply||(rg?Ss.bind(ws):function(){return Ss.apply(ws,arguments)}),tg=Oe,ng=_,ag=function(e){if(tg(e)==="Function")return ng(e)},Os=ag,ig=Se,og=et,sg=Os(Os.bind),Ie=function(e,r){return ig(e),r===void 0?e:og?sg(e,r):function(){return e.apply(r,arguments)}},ug=je,Is=ug("document","documentElement"),cg=_,Lr=cg([].slice),lg=TypeError,ra=function(e,r){if(e<r)throw new lg("Not enough arguments");return e},vg=Or,Ts=/(?:ipad|iphone|ipod).*applewebkit/i.test(vg),X=A,fg=Es,dg=Ie,Ps=j,hg=V,Rs=P,Cs=Is,pg=Lr,_s=nt,gg=ra,yg=Ts,mg=Qn,ta=X.setImmediate,na=X.clearImmediate,$g=X.process,aa=X.Dispatch,bg=X.Function,xs=X.MessageChannel,wg=X.String,ia=0,Ar={},Ls="onreadystatechange",jr,Ne,oa,sa;Rs(function(){jr=X.location});var ua=function(e){if(hg(Ar,e)){var r=Ar[e];delete Ar[e],r()}},ca=function(e){return function(){ua(e)}},As=function(e){ua(e.data)},js=function(e){X.postMessage(wg(e),jr.protocol+"//"+jr.host)};(!ta||!na)&&(ta=function(r){gg(arguments.length,1);var t=Ps(r)?r:bg(r),n=pg(arguments,1);return Ar[++ia]=function(){fg(t,void 0,n)},Ne(ia),ia},na=function(r){delete Ar[r]},mg?Ne=function(e){$g.nextTick(ca(e))}:aa&&aa.now?Ne=function(e){aa.now(ca(e))}:xs&&!yg?(oa=new xs,sa=oa.port2,oa.port1.onmessage=As,Ne=dg(sa.postMessage,sa)):X.addEventListener&&Ps(X.postMessage)&&!X.importScripts&&jr&&jr.protocol!=="file:"&&!Rs(js)?(Ne=js,X.addEventListener("message",As,!1)):Ls in _s("script")?Ne=function(e){Cs.appendChild(_s("script"))[Ls]=function(){Cs.removeChild(this),ua(e)}}:Ne=function(e){setTimeout(ca(e),0)});var ks={set:ta,clear:na},Ns=A,Sg=G,Eg=Object.getOwnPropertyDescriptor,Ms=function(e){if(!Sg)return Ns[e];var r=Eg(Ns,e);return r&&r.value},Us=function(){this.head=null,this.tail=null};Us.prototype={add:function(e){var r={item:e,next:null},t=this.tail;t?t.next=r:this.head=r,this.tail=r},get:function(){var e=this.head;if(e){var r=this.head=e.next;return r===null&&(this.tail=null),e.item}}};var Bs=Us,Og=Or,Ig=/ipad|iphone|ipod/i.test(Og)&&typeof Pebble<"u",Tg=Or,Pg=/web0s(?!.*chrome)/i.test(Tg),Je=A,Rg=Ms,Ds=Ie,la=ks.set,Cg=Bs,_g=Ts,xg=Ig,Lg=Pg,va=Qn,Fs=Je.MutationObserver||Je.WebKitMutationObserver,Gs=Je.document,Hs=Je.process,Ot=Je.Promise,fa=Rg("queueMicrotask"),Qe,da,ha,It,zs;if(!fa){var Tt=new Cg,Pt=function(){var e,r;for(va&&(e=Hs.domain)&&e.exit();r=Tt.get();)try{r()}catch(t){throw Tt.head&&Qe(),t}e&&e.enter()};!_g&&!va&&!Lg&&Fs&&Gs?(da=!0,ha=Gs.createTextNode(""),new Fs(Pt).observe(ha,{characterData:!0}),Qe=function(){ha.data=da=!da}):!xg&&Ot&&Ot.resolve?(It=Ot.resolve(void 0),It.constructor=Ot,zs=Ds(It.then,It),Qe=function(){zs(Pt)}):va?Qe=function(){Hs.nextTick(Pt)}:(la=Ds(la,Je),Qe=function(){la(Pt)}),fa=function(e){Tt.head||Qe(),Tt.add(e)}}var Ag=fa,jg=function(e,r){try{arguments.length===1?console.error(e):console.error(e,r)}catch{}},pa=function(e){try{return{error:!1,value:e()}}catch(r){return{error:!0,value:r}}},kg=A,Rt=kg.Promise,Ng=A,kr=Rt,Mg=j,Ug=Jn,Bg=Bn,Dg=M,Ws=ls,ga=tt;kr&&kr.prototype;var Fg=Dg("species"),ya=!1,Ks=Mg(Ng.PromiseRejectionEvent),Gg=Ug("Promise",function(){var e=Bg(kr),r=e!==String(kr);if(!r&&ga===66)return!0;if(!ga||ga<51||!/native code/.test(e)){var t=new kr(function(i){i(1)}),n=function(i){i(function(){},function(){})},a=t.constructor={};if(a[Fg]=n,ya=t.then(function(){})instanceof n,!ya)return!0}return!r&&(Ws==="BROWSER"||Ws==="DENO")&&!Ks}),Nr={CONSTRUCTOR:Gg,REJECTION_EVENT:Ks,SUBCLASSING:ya},Ze={},qs=Se,Hg=TypeError,zg=function(e){var r,t;this.promise=new e(function(n,a){if(r!==void 0||t!==void 0)throw new Hg("Bad Promise constructor");r=n,t=a}),this.resolve=qs(r),this.reject=qs(t)};Ze.f=function(e){return new zg(e)};var Wg=B,Ct=Qn,Te=A,er=F,Vs=Z,Ys=Zn,Kg=ke,qg=hs,Vg=Se,_t=j,Yg=H,Xg=_r,Jg=eg,Xs=ks.set,ma=Ag,Qg=jg,Zg=pa,ey=Bs,Js=Ee,xt=Rt,$a=Nr,Qs=Ze,Lt="Promise",Zs=$a.CONSTRUCTOR,ry=$a.REJECTION_EVENT,ty=$a.SUBCLASSING,ba=Js.getterFor(Lt),ny=Js.set,rr=xt&&xt.prototype,Me=xt,At=rr,eu=Te.TypeError,wa=Te.document,Sa=Te.process,Ea=Qs.f,ay=Ea,iy=!!(wa&&wa.createEvent&&Te.dispatchEvent),ru="unhandledrejection",oy="rejectionhandled",tu=0,nu=1,sy=2,Oa=1,au=2,jt,iu,uy,ou,su=function(e){var r;return Yg(e)&&_t(r=e.then)?r:!1},uu=function(e,r){var t=r.value,n=r.state===nu,a=n?e.ok:e.fail,i=e.resolve,o=e.reject,s=e.domain,c,u,v;try{a?(n||(r.rejection===au&&ly(r),r.rejection=Oa),a===!0?c=t:(s&&s.enter(),c=a(t),s&&(s.exit(),v=!0)),c===e.promise?o(new eu("Promise-chain cycle")):(u=su(c))?er(u,c,i,o):i(c)):o(t)}catch(l){s&&!v&&s.exit(),o(l)}},cu=function(e,r){e.notified||(e.notified=!0,ma(function(){for(var t=e.reactions,n;n=t.get();)uu(n,e);e.notified=!1,r&&!e.rejection&&cy(e)}))},lu=function(e,r,t){var n,a;iy?(n=wa.createEvent("Event"),n.promise=r,n.reason=t,n.initEvent(e,!1,!0),Te.dispatchEvent(n)):n={promise:r,reason:t},!ry&&(a=Te["on"+e])?a(n):e===ru&&Qg("Unhandled promise rejection",t)},cy=function(e){er(Xs,Te,function(){var r=e.facade,t=e.value,n=vu(e),a;if(n&&(a=Zg(function(){Ct?Sa.emit("unhandledRejection",t,r):lu(ru,r,t)}),e.rejection=Ct||vu(e)?au:Oa,a.error))throw a.value})},vu=function(e){return e.rejection!==Oa&&!e.parent},ly=function(e){er(Xs,Te,function(){var r=e.facade;Ct?Sa.emit("rejectionHandled",r):lu(oy,r,e.value)})},tr=function(e,r,t){return function(n){e(r,n,t)}},nr=function(e,r,t){e.done||(e.done=!0,t&&(e=t),e.value=r,e.state=sy,cu(e,!0))},Ia=function(e,r,t){if(!e.done){e.done=!0,t&&(e=t);try{if(e.facade===r)throw new eu("Promise can't be resolved itself");var n=su(r);n?ma(function(){var a={done:!1};try{er(n,r,tr(Ia,a,e),tr(nr,a,e))}catch(i){nr(a,i,e)}}):(e.value=r,e.state=nu,cu(e,!1))}catch(a){nr({done:!1},a,e)}}};if(Zs&&(Me=function(r){Xg(this,At),Vg(r),er(jt,this);var t=ba(this);try{r(tr(Ia,t),tr(nr,t))}catch(n){nr(t,n)}},At=Me.prototype,jt=function(r){ny(this,{type:Lt,done:!1,notified:!1,parent:!1,reactions:new ey,rejection:!1,state:tu,value:void 0})},jt.prototype=Vs(At,"then",function(r,t){var n=ba(this),a=Ea(Jg(this,Me));return n.parent=!0,a.ok=_t(r)?r:!0,a.fail=_t(t)&&t,a.domain=Ct?Sa.domain:void 0,n.state===tu?n.reactions.add(a):ma(function(){uu(a,n)}),a.promise}),iu=function(){var e=new jt,r=ba(e);this.promise=e,this.resolve=tr(Ia,r),this.reject=tr(nr,r)},Qs.f=Ea=function(e){return e===Me||e===uy?new iu(e):ay(e)},_t(xt)&&rr!==Object.prototype)){ou=rr.then,ty||Vs(rr,"then",function(r,t){var n=this;return new Me(function(a,i){er(ou,n,a,i)}).then(r,t)},{unsafe:!0});try{delete rr.constructor}catch{}Ys&&Ys(rr,At)}Wg({global:!0,constructor:!0,wrap:!0,forced:Zs},{Promise:Me}),Kg(Me,Lt,!1),qg(Lt);var Mr={},vy=M,fy=Mr,dy=vy("iterator"),hy=Array.prototype,fu=function(e){return e!==void 0&&(fy.Array===e||hy[dy]===e)},py=Pr,du=st,gy=Ae,yy=Mr,my=M,$y=my("iterator"),kt=function(e){if(!gy(e))return du(e,$y)||du(e,"@@iterator")||yy[py(e)]},by=F,wy=Se,Sy=z,Ey=ot,Oy=kt,Iy=TypeError,Ta=function(e,r){var t=arguments.length<2?Oy(e):r;if(wy(t))return Sy(by(t,e));throw new Iy(Ey(e)+" is not iterable")},Ty=F,hu=z,Py=st,pu=function(e,r,t){var n,a;hu(e);try{if(n=Py(e,"return"),!n){if(r==="throw")throw t;return t}n=Ty(n,e)}catch(i){a=!0,n=i}if(r==="throw")throw t;if(a)throw n;return hu(n),t},Ry=Ie,Cy=F,_y=z,xy=ot,Ly=fu,Ay=Xe,gu=it,jy=Ta,ky=kt,yu=pu,Ny=TypeError,Nt=function(e,r){this.stopped=e,this.result=r},mu=Nt.prototype,Mt=function(e,r,t){var n=t&&t.that,a=!!(t&&t.AS_ENTRIES),i=!!(t&&t.IS_RECORD),o=!!(t&&t.IS_ITERATOR),s=!!(t&&t.INTERRUPTED),c=Ry(r,n),u,v,l,f,d,g,$,m=function(w){return u&&yu(u,"normal",w),new Nt(!0,w)},S=function(w){return a?(_y(w),s?c(w[0],w[1],m):c(w[0],w[1])):s?c(w,m):c(w)};if(i)u=e.iterator;else if(o)u=e;else{if(v=ky(e),!v)throw new Ny(xy(e)+" is not iterable");if(Ly(v)){for(l=0,f=Ay(e);f>l;l++)if(d=S(e[l]),d&&gu(mu,d))return d;return new Nt(!1)}u=jy(e,v)}for(g=i?e.next:u.next;!($=Cy(g,u)).done;){try{d=S($.value)}catch(w){yu(u,"throw",w)}if(typeof d=="object"&&d&&gu(mu,d))return d}return new Nt(!1)},My=M,$u=My("iterator"),bu=!1;try{var Uy=0,wu={next:function(){return{done:!!Uy++}},return:function(){bu=!0}};wu[$u]=function(){return this},Array.from(wu,function(){throw 2})}catch{}var Su=function(e,r){try{if(!r&&!bu)return!1}catch{return!1}var t=!1;try{var n={};n[$u]=function(){return{next:function(){return{done:t=!0}}}},e(n)}catch{}return t},By=Rt,Dy=Su,Fy=Nr.CONSTRUCTOR,Eu=Fy||!Dy(function(e){By.all(e).then(void 0,function(){})}),Gy=B,Hy=F,zy=Se,Wy=Ze,Ky=pa,qy=Mt,Vy=Eu;Gy({target:"Promise",stat:!0,forced:Vy},{all:function(r){var t=this,n=Wy.f(t),a=n.resolve,i=n.reject,o=Ky(function(){var s=zy(t.resolve),c=[],u=0,v=1;qy(r,function(l){var f=u++,d=!1;v++,Hy(s,t,l).then(function(g){d||(d=!0,c[f]=g,--v||a(c))},i)}),--v||a(c)});return o.error&&i(o.value),n.promise}});var Yy=B,Xy=Nr.CONSTRUCTOR,Pa=Rt,Jy=je,Qy=j,Zy=Z,Ou=Pa&&Pa.prototype;if(Yy({target:"Promise",proto:!0,forced:Xy,real:!0},{catch:function(e){return this.then(void 0,e)}}),Qy(Pa)){var Iu=Jy("Promise").prototype.catch;Ou.catch!==Iu&&Zy(Ou,"catch",Iu,{unsafe:!0})}var em=B,rm=F,tm=Se,nm=Ze,am=pa,im=Mt,om=Eu;em({target:"Promise",stat:!0,forced:om},{race:function(r){var t=this,n=nm.f(t),a=n.reject,i=am(function(){var o=tm(t.resolve);im(r,function(s){rm(o,t,s).then(n.resolve,a)})});return i.error&&a(i.value),n.promise}});var sm=B,um=Ze,cm=Nr.CONSTRUCTOR;sm({target:"Promise",stat:!0,forced:cm},{reject:function(r){var t=um.f(this),n=t.reject;return n(r),t.promise}});var lm=z,vm=H,fm=Ze,dm=function(e,r){if(lm(e),vm(r)&&r.constructor===e)return r;var t=fm.f(e),n=t.resolve;return n(r),t.promise},hm=B,pm=je,gm=Nr.CONSTRUCTOR,ym=dm;pm("Promise"),hm({target:"Promise",stat:!0,forced:gm},{resolve:function(r){return ym(this,r)}});var mm=Pr,$m=String,Pe=function(e){if(mm(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return $m(e)},Tu=`	
\v\f\r                　\u2028\u2029\uFEFF`,bm=_,wm=Ke,Sm=Pe,Ra=Tu,Pu=bm("".replace),Em=RegExp("^["+Ra+"]+"),Om=RegExp("(^|[^"+Ra+"])["+Ra+"]+$"),Ca=function(e){return function(r){var t=Sm(wm(r));return e&1&&(t=Pu(t,Em,"")),e&2&&(t=Pu(t,Om,"$1")),t}},Im={start:Ca(1),end:Ca(2),trim:Ca(3)},Tm=ct.PROPER,Pm=P,Ru=Tu,Cu="​᠎",Rm=function(e){return Pm(function(){return!!Ru[e]()||Cu[e]()!==Cu||Tm&&Ru[e].name!==e})},Cm=B,_m=Im.trim,xm=Rm;Cm({target:"String",proto:!0,forced:xm("trim")},{trim:function(){return _m(this)}});var Ur={tdGatewayUs:"/tdgateway/us",tdGatewayEu:"/tdgateway/eu",tdGatewayCa:"/tdgateway/ca",tdGatewayUsFed:"/tdgateway/usfed",tdChatSdk:"/tdchatsdk",tdReporter:"/tdreporter",twilioUs1:"/tdsocketprovider/us1/v3/wsconnect",twilioIe1:"/tdsocketprovider/ie1/v3/wsconnect",twilioMcsUs1:"/tdmcsprovider/us1",twilioMcsIe1:"/tdmcsprovider/ie1",twilioMediaUs1:"/tdmediaprovider/us1",twilioMediaIe1:"/tdmediaprovider/ie1"};function Lm(e,r){return!e||!r?!1:e.contains?e.contains(r):e.childNodes?Array.prototype.indexOf.call(e.childNodes,r)!==-1:!1}var Am=P,_u=function(e,r){var t=[][e];return!!t&&Am(function(){t.call(null,r||function(){return 1},1)})},jm=B,km=_,Nm=yt,Mm=ge,Um=_u,Bm=km([].join),Dm=Nm!==Object,Fm=Dm||!Um("join",",");jm({target:"Array",proto:!0,forced:Fm},{join:function(r){return Bm(Mm(this),r===void 0?",":r)}});var Gm=Oe,_a=Array.isArray||function(r){return Gm(r)==="Array"},xu=_a,Hm=Et,zm=H,Wm=M,Km=Wm("species"),Lu=Array,qm=function(e){var r;return xu(e)&&(r=e.constructor,Hm(r)&&(r===Lu||xu(r.prototype))?r=void 0:zm(r)&&(r=r[Km],r===null&&(r=void 0))),r===void 0?Lu:r},Vm=qm,Au=function(e,r){return new(Vm(e))(r===0?0:r)},Ym=Ie,Xm=_,Jm=yt,Qm=we,Zm=Xe,e$=Au,ju=Xm([].push),Re=function(e){var r=e===1,t=e===2,n=e===3,a=e===4,i=e===6,o=e===7,s=e===5||i;return function(c,u,v,l){for(var f=Qm(c),d=Jm(f),g=Zm(d),$=Ym(u,v),m=0,S=l||e$,w=r?S(c,g):t||o?S(c,0):void 0,T,x;g>m;m++)if((s||m in d)&&(T=d[m],x=$(T,m,f),e))if(r)w[m]=x;else if(x)switch(e){case 3:return!0;case 5:return T;case 6:return m;case 2:ju(w,T)}else switch(e){case 4:return!1;case 7:ju(w,T)}return i?-1:n||a?a:w}},xa={forEach:Re(0),map:Re(1),filter:Re(2),some:Re(3),every:Re(4),find:Re(5),findIndex:Re(6),filterReject:Re(7)},r$=P,t$=M,n$=tt,a$=t$("species"),Ut=function(e){return n$>=51||!r$(function(){var r=[],t=r.constructor={};return t[a$]=function(){return{foo:1}},r[e](Boolean).foo!==1})},i$=B,o$=xa.map,s$=Ut,u$=s$("map");i$({target:"Array",proto:!0,forced:!u$},{map:function(r){return o$(this,r,arguments.length>1?arguments[1]:void 0)}});var c$=us,l$=Yn,Bt=Object.keys||function(r){return c$(r,l$)},v$=B,f$=we,ku=Bt,d$=P,h$=d$(function(){ku(1)});v$({target:"Object",stat:!0,forced:h$},{keys:function(r){return ku(f$(r))}});function p$(e){var r=e.charCodeAt(0);return r>=65&&r<=90}function Nu(e){var r=Uv(e).map(function(t,n){return p$(t)?n===0?t.toLowerCase():"-"+t.toLowerCase():t}).join("");return"--".concat(r)}function g$(e,r){var t=Object.keys(r);return t.length?t.reduce(function(n,a){return a.indexOf("-")>-1||a.indexOf("_")>-1?n:(e.style.setProperty(Nu(a),r[a]),N(N({},n),{},L({},Nu(a),r[a])))},{}):{}}function Mu(e,r){var t;if(typeof e=="string"?t=e.indexOf("#")>-1?document.querySelector(e):document.getElementById(e):t=e,t)return g$(t,r)}function y$(e){var r=document.createElement("style");return r.id=e,r}function La(e,r){return r.querySelector("#".concat(e))}function m$(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document.head,n=La(r,t);if(n)return n.innerHTML=e,function(){var i=La(r,t);i&&t.removeChild(i)};var a=y$(r);return a.innerHTML=e,t.appendChild(a),function(){var i=La(r,t);i&&t.removeChild(i)}}function $$(e,r,t){try{return JSON.parse(e)}catch{return r}}var b$=function(){function e(r){var t=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$r(this,e),L(this,"_moving",!1),L(this,"_moved",!1),L(this,"_initialXY",[0,0]),L(this,"_startXY",[0,0]),L(this,"_boundaryValue",5),L(this,"_rb",null),L(this,"_isPC",!0),this.current=r,this.options=n,this.onMoveStart=this.onMoveStart.bind(this),this.onMoving=this.onMoving.bind(this),this.onMoveEnd=this.onMoveEnd.bind(this),this.removeDocumentListeners=this.removeDocumentListeners.bind(this),this.current.addEventListener("mousedown",this.onMoveStart),this.current.addEventListener("touchstart",this.onMoveStart),this._rb=new ResizeObserver(function(){t.reset()}),this._rb.observe(document.body)}return br(e,[{key:"getEventInfo",value:function(t){return t.touches?(this._isPC=!1,{clientXY:[t.touches[0].clientX,t.touches[0].clientY]}):(this._isPC=!0,{clientXY:[t.clientX,t.clientY]})}},{key:"onMoveStart",value:function(t){t.stopPropagation(),t.preventDefault(),this._initialXY=[this.current.offsetLeft,this.current.offsetTop],this._startXY=this.getEventInfo(t).clientXY,this._moved=!1,this.addDocumentListeners()}},{key:"onMoving",value:function(t){var n,a;t.stopPropagation(),t.preventDefault();var i=this.getEventInfo(t),o=i.clientXY,s=gn(o,2),c=s[0],u=s[1],v=c-this._startXY[0],l=u-this._startXY[1];Math.abs(v)<this._boundaryValue&&Math.abs(l)<this._boundaryValue||(this._moved||(this._moved=!0),this._moving=!0,this.current.style.left=Math.min(Math.max(0,this._initialXY[0]+v),window.innerWidth-this.current.offsetWidth)+"px",this.current.style.top=Math.min(Math.max(0,this._initialXY[1]+l),window.innerHeight-this.current.offsetHeight)+"px",(n=this.options)===null||n===void 0||(a=n.onChange)===null||a===void 0||a.call(n,"moving"))}},{key:"onMoveEnd",value:function(t){if(t.stopPropagation(),t.preventDefault(),this._moving){var n,a;(n=this.options)===null||n===void 0||(a=n.onChange)===null||a===void 0||a.call(n,"moveEnded")}if(!this._moved){var i,o;(i=this.options)===null||i===void 0||(o=i.onClick)===null||o===void 0||o.call(i)}this._moved=!1,this.removeDocumentListeners()}},{key:"addDocumentListeners",value:function(){document.addEventListener("mousemove",this.onMoving,{passive:!1}),document.addEventListener("mouseup",this.onMoveEnd,{passive:!1}),this.current.addEventListener("touchmove",this.onMoving,{passive:!1}),this.current.addEventListener("touchend",this.onMoveEnd,{passive:!1})}},{key:"removeDocumentListeners",value:function(){document.removeEventListener("mousemove",this.onMoving),document.removeEventListener("mouseup",this.onMoveEnd),this.current.removeEventListener("touchmove",this.onMoveEnd),this.current.removeEventListener("touchend",this.onMoveEnd)}},{key:"reset",value:function(){this._isPC&&(this.current.style.top="",this.current.style.left="")}},{key:"destroy",value:function(){var t;this.current.removeEventListener("mousedown",this.onMoveStart),this.current.removeEventListener("touchstart",this.onMoveStart),this.removeDocumentListeners(),(t=this._rb)===null||t===void 0||t.disconnect(),this._rb=null}}])}(),Uu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},w$=nt,Aa=w$("span").classList,Bu=Aa&&Aa.constructor&&Aa.constructor.prototype,Du=Bu===Object.prototype?void 0:Bu,S$=xa.forEach,E$=_u,O$=E$("forEach"),I$=O$?[].forEach:function(r){return S$(this,r,arguments.length>1?arguments[1]:void 0)},Fu=A,Gu=Uu,T$=Du,ja=I$,P$=Ve,Hu=function(e){if(e&&e.forEach!==ja)try{P$(e,"forEach",ja)}catch{e.forEach=ja}};for(var ka in Gu)Gu[ka]&&Hu(Fu[ka]&&Fu[ka].prototype);Hu(T$);function R$(e,r){var t=N({},e);return Object.keys(t).forEach(function(n){(e[n]===void 0||e[n]===null)&&delete t[n],r!=null&&r.removeEmptyString&&e[n]===""&&delete t[n]}),t}function C$(e){return new Promise(function(r){e<=0?r(!0):setTimeout(function(){return r(!0)},e)})}function _$(e){return Math.min(2e3*e,3e4)}function x$(e){return Na.apply(this,arguments)}function Na(){return Na=q(R().mark(function e(r){var t,n,a,i,o,s,c,u,v=arguments;return R().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(t=v.length>1&&v[1]!==void 0?v[1]:{},n=t.defaultRetry,a=n===void 0?5:n,i=t.retryDelay,o=i===void 0?_$:i,s=t.onError,!(a<=0)){f.next=6;break}return f.next=5,r();case 5:return f.abrupt("return",f.sent);case 6:return c=0,u=function(){var d=q(R().mark(function g(){return R().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.prev=0,m.next=3,r();case 3:return m.abrupt("return",m.sent);case 6:if(m.prev=6,m.t0=m.catch(0),s==null||s(m.t0,c),c!==a){m.next=11;break}throw m.t0;case 11:return c+=1,m.next=14,C$(typeof o=="function"?o(c):o);case 14:return m.next=16,u();case 16:return m.abrupt("return",m.sent);case 17:case"end":return m.stop()}},g,null,[[0,6]])}));return function(){return d.apply(this,arguments)}}(),f.abrupt("return",u());case 9:case"end":return f.stop()}},e)})),Na.apply(this,arguments)}var Y={Topic:"WidgetCommunication",Methods:{Maximize:"Maximize",Minimize:"Minimize",GetAllConfig:"GetAllConfig",GetCredentials:"GetCredentials",GetTdAccessToken:"GetTdAccessToken",SetBadge:"SetBadge",FrameOpened:"FrameOpened",DownloadTranscript:"DownloadTranscript",UpdatePreviewConfig:"UpdatePreviewConfig",PreviewReady:"PreviewReady",ConversationStart:"ConversationStart",FrameReady:"FrameReady",FrameResize:"FrameResize",UpdateAppConfigs:"UpdateAppConfigs",UpdateContext:"UpdateContext",OnSend:"OnSend",UpdateMessage:"UpdateMessage",OnComposer:"OnComposer"}},Ma={exports:{}},ar=typeof Reflect=="object"?Reflect:null,zu=ar&&typeof ar.apply=="function"?ar.apply:function(r,t,n){return Function.prototype.apply.call(r,t,n)},Dt;ar&&typeof ar.ownKeys=="function"?Dt=ar.ownKeys:Object.getOwnPropertySymbols?Dt=function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Dt=function(r){return Object.getOwnPropertyNames(r)};function L$(e){console&&console.warn&&console.warn(e)}var Wu=Number.isNaN||function(r){return r!==r};function C(){C.init.call(this)}Ma.exports=C,Ma.exports.once=N$,C.EventEmitter=C,C.prototype._events=void 0,C.prototype._eventsCount=0,C.prototype._maxListeners=void 0;var Ku=10;function Ft(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(C,"defaultMaxListeners",{enumerable:!0,get:function(){return Ku},set:function(e){if(typeof e!="number"||e<0||Wu(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Ku=e}}),C.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},C.prototype.setMaxListeners=function(r){if(typeof r!="number"||r<0||Wu(r))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+r+".");return this._maxListeners=r,this};function qu(e){return e._maxListeners===void 0?C.defaultMaxListeners:e._maxListeners}C.prototype.getMaxListeners=function(){return qu(this)},C.prototype.emit=function(r){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var a=r==="error",i=this._events;if(i!==void 0)a=a&&i.error===void 0;else if(!a)return!1;if(a){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var c=i[r];if(c===void 0)return!1;if(typeof c=="function")zu(c,this,t);else for(var u=c.length,v=Qu(c,u),n=0;n<u;++n)zu(v[n],this,t);return!0};function Vu(e,r,t,n){var a,i,o;if(Ft(t),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",r,t.listener?t.listener:t),i=e._events),o=i[r]),o===void 0)o=i[r]=t,++e._eventsCount;else if(typeof o=="function"?o=i[r]=n?[t,o]:[o,t]:n?o.unshift(t):o.push(t),a=qu(e),a>0&&o.length>a&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(r)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=r,s.count=o.length,L$(s)}return e}C.prototype.addListener=function(r,t){return Vu(this,r,t,!1)},C.prototype.on=C.prototype.addListener,C.prototype.prependListener=function(r,t){return Vu(this,r,t,!0)};function A$(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Yu(e,r,t){var n={fired:!1,wrapFn:void 0,target:e,type:r,listener:t},a=A$.bind(n);return a.listener=t,n.wrapFn=a,a}C.prototype.once=function(r,t){return Ft(t),this.on(r,Yu(this,r,t)),this},C.prototype.prependOnceListener=function(r,t){return Ft(t),this.prependListener(r,Yu(this,r,t)),this},C.prototype.removeListener=function(r,t){var n,a,i,o,s;if(Ft(t),a=this._events,a===void 0)return this;if(n=a[r],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete a[r],a.removeListener&&this.emit("removeListener",r,n.listener||t));else if(typeof n!="function"){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;i===0?n.shift():j$(n,i),n.length===1&&(a[r]=n[0]),a.removeListener!==void 0&&this.emit("removeListener",r,s||t)}return this},C.prototype.off=C.prototype.removeListener,C.prototype.removeAllListeners=function(r){var t,n,a;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[r]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[r]),this;if(arguments.length===0){var i=Object.keys(n),o;for(a=0;a<i.length;++a)o=i[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[r],typeof t=="function")this.removeListener(r,t);else if(t!==void 0)for(a=t.length-1;a>=0;a--)this.removeListener(r,t[a]);return this};function Xu(e,r,t){var n=e._events;if(n===void 0)return[];var a=n[r];return a===void 0?[]:typeof a=="function"?t?[a.listener||a]:[a]:t?k$(a):Qu(a,a.length)}C.prototype.listeners=function(r){return Xu(this,r,!0)},C.prototype.rawListeners=function(r){return Xu(this,r,!1)},C.listenerCount=function(e,r){return typeof e.listenerCount=="function"?e.listenerCount(r):Ju.call(e,r)},C.prototype.listenerCount=Ju;function Ju(e){var r=this._events;if(r!==void 0){var t=r[e];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}C.prototype.eventNames=function(){return this._eventsCount>0?Dt(this._events):[]};function Qu(e,r){for(var t=new Array(r),n=0;n<r;++n)t[n]=e[n];return t}function j$(e,r){for(;r+1<e.length;r++)e[r]=e[r+1];e.pop()}function k$(e){for(var r=new Array(e.length),t=0;t<r.length;++t)r[t]=e[t].listener||e[t];return r}function N$(e,r){return new Promise(function(t,n){function a(o){e.removeListener(r,i),n(o)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",a),t([].slice.call(arguments))}Zu(e,r,i,{once:!0}),r!=="error"&&M$(e,a,{once:!0})})}function M$(e,r,t){typeof e.on=="function"&&Zu(e,"error",r,t)}function Zu(e,r,t,n){if(typeof e.on=="function")n.once?e.once(r,t):e.on(r,t);else if(typeof e.addEventListener=="function")e.addEventListener(r,function a(i){n.once&&e.removeEventListener(r,a),t(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var U$=Ma.exports;const B$=Dv(U$);var Gt=function(){return Gt=Object.assign||function(r){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Gt.apply(this,arguments)};function ec(e,r,t,n){function a(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function s(v){try{u(n.next(v))}catch(l){o(l)}}function c(v){try{u(n.throw(v))}catch(l){o(l)}}function u(v){v.done?i(v.value):a(v.value).then(s,c)}u((n=n.apply(e,[])).next())})}function rc(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(v){return c([u,v])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(t=0)),t;)try{if(n=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,a=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(v){u=[6,v],a=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}typeof SuppressedError=="function"&&SuppressedError;var D$=function(){function e(r){this.options=r,this._traceId=0,this._methods=new Map,this._emitter=new B$,this._handlerOnMessageByBound=this.handlerOnMessage.bind(this),this.createService(),this.getListener().addEventListener("message",this._handlerOnMessageByBound,!1)}return e.jsonParseData=function(r,t){try{return JSON.parse(r)}catch{return t}},e.jsonStringifyData=function(r){try{return JSON.stringify(r)}catch{return""}},e.runHandler=function(r){return ec(this,void 0,void 0,function(){var t,n;return rc(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,r()];case 1:return t=a.sent(),[2,{data:t,error:null}];case 2:return n=a.sent(),[2,{error:typeof n=="string"?n:n.message}];case 3:return[2]}})})},e.prototype.destroy=function(){this._emitter.removeAllListeners(),this._methods.clear(),this.getListener().removeEventListener("message",this._handlerOnMessageByBound,!1)},e.prototype.register=function(r,t){this._methods.set(r,t),this.log("Register ".concat(r),this._methods)},e.prototype.unregister=function(r){this._methods.delete(r),this.log("Unregister ".concat(r),this._methods)},e.prototype.trigger=function(r){for(var t=this,n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return new Promise(function(i){var o=t.createId();t.sendMessage({id:o,method:r,payload:n,type:"request"}),t.log("Trigger ".concat(r," | ").concat(o),n),t._emitter.once("response_".concat(o),function(s){i(s.payload),t.log("Receive ".concat(r," | ").concat(o),e.jsonStringifyData(s))})})},e.prototype.createId=function(){return"".concat(this.options.name,"_").concat(this._traceId++)},e.prototype.createService=function(){var r=this;this._emitter.on(this.options.topic,function(t){return ec(r,void 0,void 0,function(){var n,a,i,o,s;return rc(this,function(c){switch(c.label){case 0:return n=t.id,a=t.payload,i=t.method,o=this._methods.get(i),o?[4,e.runHandler(function(){return o.apply(void 0,a)})]:[3,2];case 1:return s=c.sent(),this.sendMessage({id:n,method:i,payload:s,type:"response"}),[3,3];case 2:this.sendMessage({id:n,method:i,payload:{error:"No found method in service"},type:"response"}),c.label=3;case 3:return[2]}})})})},e.prototype.sendMessage=function(r){var t=this.options,n=t.sender,a=t.origin,i=t.topic,o=e.jsonStringifyData(Gt(Gt({},r),{topic:i}));if(!n.postMessage)throw new Error("The sender no found postMessage method please check the sender option");o&&n.postMessage(o,a||"*")},e.prototype.handlerOnMessage=function(r){var t=r.data;if(t){var n=e.jsonParseData(t,null);if(!(!n||n.topic!==this.options.topic)){var a=n.id,i=n.type;i==="request"&&this._emitter.emit(this.options.topic,n),i==="response"&&this._emitter.emit("response_".concat(a),n)}}},e.prototype.getListener=function(){return this.options.listener||window},e.prototype.log=function(r){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var a=this.options,i=a.debug,o=a.name;if(i){var s=new Date().toISOString(),c="[RPC] [".concat(s,"] [").concat(o,"] ").concat(r);console.groupCollapsed(c),t!=null&&t.length&&console.info.apply(console,t),console.groupEnd()}},Object.defineProperty(e.prototype,"methods",{get:function(){return this._methods},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"emitter",{get:function(){return this._emitter},enumerable:!1,configurable:!0}),e}(),F$=TypeError,G$=9007199254740991,H$=function(e){if(e>G$)throw F$("Maximum allowed index exceeded");return e},z$=G,W$=ce,K$=Ir,Ua=function(e,r,t){z$?W$.f(e,r,K$(0,t)):e[r]=t},q$=B,V$=P,Y$=_a,X$=H,J$=we,Q$=Xe,tc=H$,nc=Ua,Z$=Au,eb=Ut,rb=M,tb=tt,ac=rb("isConcatSpreadable"),nb=tb>=51||!V$(function(){var e=[];return e[ac]=!1,e.concat()[0]!==e}),ab=function(e){if(!X$(e))return!1;var r=e[ac];return r!==void 0?!!r:Y$(e)},ib=!nb||!eb("concat");q$({target:"Array",proto:!0,arity:1,forced:ib},{concat:function(r){var t=J$(this),n=Z$(t,0),a=0,i,o,s,c,u;for(i=-1,s=arguments.length;i<s;i++)if(u=i===-1?t:arguments[i],ab(u))for(c=Q$(u),tc(a+c),o=0;o<c;o++,a++)o in u&&nc(n,a,u[o]);else tc(a+1),nc(n,a++,u);return n.length=a,n}});var ob=B,ic=_a,sb=Et,ub=H,oc=as,cb=Xe,lb=ge,vb=Ua,fb=M,db=Ut,hb=Lr,pb=db("slice"),gb=fb("species"),Ba=Array,yb=Math.max;ob({target:"Array",proto:!0,forced:!pb},{slice:function(r,t){var n=lb(this),a=cb(n),i=oc(r,a),o=oc(t===void 0?a:t,a),s,c,u;if(ic(n)&&(s=n.constructor,sb(s)&&(s===Ba||ic(s.prototype))?s=void 0:ub(s)&&(s=s[gb],s===null&&(s=void 0)),s===Ba||s===void 0))return hb(n,i,o);for(c=new(s===void 0?Ba:s)(yb(o-i,0)),u=0;i<o;i++,u++)i in n&&vb(c,u,n[i]);return c.length=u,c}});var mb=P,$b=!mb(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),bb=V,wb=j,Sb=we,Eb=Dn,Ob=$b,sc=Eb("IE_PROTO"),Da=Object,Ib=Da.prototype,Fa=Ob?Da.getPrototypeOf:function(e){var r=Sb(e);if(bb(r,sc))return r[sc];var t=r.constructor;return wb(t)&&r instanceof t?t.prototype:r instanceof Da?Ib:null},uc=G,Tb=P,cc=_,Pb=Fa,Rb=Bt,Cb=ge,_b=gt.f,lc=cc(_b),xb=cc([].push),Lb=uc&&Tb(function(){var e=Object.create(null);return e[2]=2,!lc(e,2)}),vc=function(e){return function(r){for(var t=Cb(r),n=Rb(t),a=Lb&&Pb(t)===null,i=n.length,o=0,s=[],c;i>o;)c=n[o++],(!uc||(a?c in t:lc(t,c)))&&xb(s,e?[c,t[c]]:t[c]);return s}},Ab={entries:vc(!0),values:vc(!1)},jb=B,kb=Ab.entries;jb({target:"Object",stat:!0},{entries:function(r){return kb(r)}});var Nb=z,fc=function(){var e=Nb(this),r="";return e.hasIndices&&(r+="d"),e.global&&(r+="g"),e.ignoreCase&&(r+="i"),e.multiline&&(r+="m"),e.dotAll&&(r+="s"),e.unicode&&(r+="u"),e.unicodeSets&&(r+="v"),e.sticky&&(r+="y"),r},Ga=P,Mb=A,Ha=Mb.RegExp,za=Ga(function(){var e=Ha("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),Ub=za||Ga(function(){return!Ha("a","y").sticky}),Bb=za||Ga(function(){var e=Ha("^r","gy");return e.lastIndex=2,e.exec("str")!==null}),Db={BROKEN_CARET:Bb,MISSED_STICKY:Ub,UNSUPPORTED_Y:za},dc={},Fb=G,Gb=Bo,Hb=ce,zb=z,Wb=ge,Kb=Bt;dc.f=Fb&&!Gb?Object.defineProperties:function(r,t){zb(r);for(var n=Wb(t),a=Kb(t),i=a.length,o=0,s;i>o;)Hb.f(r,s=a[o++],n[s]);return r};var qb=z,Vb=dc,hc=Yn,Yb=lt,Xb=Is,Jb=nt,Qb=Dn,pc=">",gc="<",Wa="prototype",Ka="script",yc=Qb("IE_PROTO"),qa=function(){},mc=function(e){return gc+Ka+pc+e+gc+"/"+Ka+pc},$c=function(e){e.write(mc("")),e.close();var r=e.parentWindow.Object;return e=null,r},Zb=function(){var e=Jb("iframe"),r="java"+Ka+":",t;return e.style.display="none",Xb.appendChild(e),e.src=String(r),t=e.contentWindow.document,t.open(),t.write(mc("document.F=Object")),t.close(),t.F},Ht,zt=function(){try{Ht=new ActiveXObject("htmlfile")}catch{}zt=typeof document<"u"?document.domain&&Ht?$c(Ht):Zb():$c(Ht);for(var e=hc.length;e--;)delete zt[Wa][hc[e]];return zt()};Yb[yc]=!0;var Br=Object.create||function(r,t){var n;return r!==null?(qa[Wa]=qb(r),n=new qa,qa[Wa]=null,n[yc]=r):n=zt(),t===void 0?n:Vb.f(n,t)},e0=P,r0=A,t0=r0.RegExp,n0=e0(function(){var e=t0(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")}),a0=P,i0=A,o0=i0.RegExp,s0=a0(function(){var e=o0("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}),ir=F,Wt=_,u0=Pe,c0=fc,l0=Db,v0=bn,f0=Br,d0=Ee.get,h0=n0,p0=s0,g0=v0("native-string-replace",String.prototype.replace),Kt=RegExp.prototype.exec,Va=Kt,y0=Wt("".charAt),m0=Wt("".indexOf),$0=Wt("".replace),Ya=Wt("".slice),Xa=function(){var e=/a/,r=/b*/g;return ir(Kt,e,"a"),ir(Kt,r,"a"),e.lastIndex!==0||r.lastIndex!==0}(),bc=l0.BROKEN_CARET,Ja=/()??/.exec("")[1]!==void 0,b0=Xa||Ja||bc||h0||p0;b0&&(Va=function(r){var t=this,n=d0(t),a=u0(r),i=n.raw,o,s,c,u,v,l,f;if(i)return i.lastIndex=t.lastIndex,o=ir(Va,i,a),t.lastIndex=i.lastIndex,o;var d=n.groups,g=bc&&t.sticky,$=ir(c0,t),m=t.source,S=0,w=a;if(g&&($=$0($,"y",""),m0($,"g")===-1&&($+="g"),w=Ya(a,t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&y0(a,t.lastIndex-1)!==`
`)&&(m="(?: "+m+")",w=" "+w,S++),s=new RegExp("^(?:"+m+")",$)),Ja&&(s=new RegExp("^"+m+"$(?!\\s)",$)),Xa&&(c=t.lastIndex),u=ir(Kt,g?s:t,w),g?u?(u.input=Ya(u.input,S),u[0]=Ya(u[0],S),u.index=t.lastIndex,t.lastIndex+=u[0].length):t.lastIndex=0:Xa&&u&&(t.lastIndex=t.global?u.index+u[0].length:c),Ja&&u&&u.length>1&&ir(g0,u[0],s,function(){for(v=1;v<arguments.length-2;v++)arguments[v]===void 0&&(u[v]=void 0)}),u&&d)for(u.groups=l=f0(null),v=0;v<d.length;v++)f=d[v],l[f[0]]=u[f[1]];return u});var Qa=Va,w0=B,wc=Qa;w0({target:"RegExp",proto:!0,forced:/./.exec!==wc},{exec:wc});var Sc=F,Ec=Z,S0=Qa,Oc=P,Ic=M,E0=Ve,O0=Ic("species"),Za=RegExp.prototype,I0=function(e,r,t,n){var a=Ic(e),i=!Oc(function(){var u={};return u[a]=function(){return 7},""[e](u)!==7}),o=i&&!Oc(function(){var u=!1,v=/a/;return e==="split"&&(v={},v.constructor={},v.constructor[O0]=function(){return v},v.flags="",v[a]=/./[a]),v.exec=function(){return u=!0,null},v[a](""),!u});if(!i||!o||t){var s=/./[a],c=r(a,""[e],function(u,v,l,f,d){var g=v.exec;return g===S0||g===Za.exec?i&&!d?{done:!0,value:Sc(s,v,l,f)}:{done:!0,value:Sc(u,l,v,f)}:{done:!1}});Ec(String.prototype,e,c[0]),Ec(Za,a,c[1])}n&&E0(Za[a],"sham",!0)},ei=_,T0=$t,P0=Pe,R0=Ke,C0=ei("".charAt),Tc=ei("".charCodeAt),_0=ei("".slice),Pc=function(e){return function(r,t){var n=P0(R0(r)),a=T0(t),i=n.length,o,s;return a<0||a>=i?e?"":void 0:(o=Tc(n,a),o<55296||o>56319||a+1===i||(s=Tc(n,a+1))<56320||s>57343?e?C0(n,a):o:e?_0(n,a,a+2):(o-55296<<10)+(s-56320)+65536)}},ri={codeAt:Pc(!1),charAt:Pc(!0)},x0=ri.charAt,L0=function(e,r,t){return r+(t?x0(e,r).length:1)},ti=_,A0=we,j0=Math.floor,ni=ti("".charAt),k0=ti("".replace),ai=ti("".slice),N0=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,M0=/\$([$&'`]|\d{1,2})/g,U0=function(e,r,t,n,a,i){var o=t+e.length,s=n.length,c=M0;return a!==void 0&&(a=A0(a),c=N0),k0(i,c,function(u,v){var l;switch(ni(v,0)){case"$":return"$";case"&":return e;case"`":return ai(r,0,t);case"'":return ai(r,o);case"<":l=a[ai(v,1,-1)];break;default:var f=+v;if(f===0)return u;if(f>s){var d=j0(f/10);return d===0?u:d<=s?n[d-1]===void 0?ni(v,1):n[d-1]+ni(v,1):u}l=n[f-1]}return l===void 0?"":l})},Rc=F,B0=z,D0=j,F0=Oe,G0=Qa,H0=TypeError,z0=function(e,r){var t=e.exec;if(D0(t)){var n=Rc(t,e,r);return n!==null&&B0(n),n}if(F0(e)==="RegExp")return Rc(G0,e,r);throw new H0("RegExp#exec called on incompatible receiver")},W0=Es,Cc=F,qt=_,K0=I0,q0=P,V0=z,Y0=j,X0=Ae,J0=$t,Q0=is,or=Pe,Z0=Ke,ew=L0,rw=st,tw=U0,nw=z0,aw=M,ii=aw("replace"),iw=Math.max,ow=Math.min,sw=qt([].concat),oi=qt([].push),_c=qt("".indexOf),xc=qt("".slice),uw=function(e){return e===void 0?e:String(e)},cw=function(){return"a".replace(/./,"$0")==="$0"}(),Lc=function(){return/./[ii]?/./[ii]("a","$0")==="":!1}(),lw=!q0(function(){var e=/./;return e.exec=function(){var r=[];return r.groups={a:"7"},r},"".replace(e,"$<a>")!=="7"});K0("replace",function(e,r,t){var n=Lc?"$":"$0";return[function(i,o){var s=Z0(this),c=X0(i)?void 0:rw(i,ii);return c?Cc(c,i,s,o):Cc(r,or(s),i,o)},function(a,i){var o=V0(this),s=or(a);if(typeof i=="string"&&_c(i,n)===-1&&_c(i,"$<")===-1){var c=t(r,o,s,i);if(c.done)return c.value}var u=Y0(i);u||(i=or(i));var v=o.global,l;v&&(l=o.unicode,o.lastIndex=0);for(var f=[],d;d=nw(o,s),!(d===null||(oi(f,d),!v));){var g=or(d[0]);g===""&&(o.lastIndex=ew(s,Q0(o.lastIndex),l))}for(var $="",m=0,S=0;S<f.length;S++){d=f[S];for(var w=or(d[0]),T=iw(ow(J0(d.index),s.length),0),x=[],fe,U=1;U<d.length;U++)oi(x,uw(d[U]));var O=d.groups;if(u){var k=sw([w],x,T,s);O!==void 0&&oi(k,O),fe=or(W0(i,void 0,k))}else fe=tw(w,s,T,x,O,i);T>=m&&($+=xc(s,m,T)+fe,m=T+w.length)}return $+xc(s,m)}]},!lw||!cw||Lc);var vw=function(){function e(){$r(this,e),L(this,"appConfig",{}),L(this,"touchpoint",null),L(this,"appProps",null),L(this,"context",{}),L(this,"participantName","")}return br(e,[{key:"setAppConfig",value:function(t){var n,a=(t==null?void 0:t.styles)||{};return this.appConfig=N(N(N({},this.appConfig),t),{},{styles:Object.keys(a).length?N(N({},(n=this.appConfig)===null||n===void 0?void 0:n.styles),a):{}}),this.appConfig}},{key:"setTouchpoint",value:function(t){this.touchpoint=t}},{key:"setParticipantName",value:function(t){this.participantName=t}},{key:"setAppProps",value:function(t){this.appProps=t}},{key:"getAllConfig",value:function(){return{appConfig:this.appConfig,touchpoint:this.touchpoint,context:this.context,appProps:this.appProps,participantName:this.participantName,injectorWindowHref:window.location.href,injectorWindowHostname:window.location.hostname}}},{key:"setContextParam",value:function(t){this.context=t}},{key:"clearAll",value:function(){this.appConfig={},this.touchpoint=null,this.context={},this.participantName=""}}])}();const Ce=new vw;var fw=L(L(L(L({},"td-us-1","https://api.talkdeskapp.com"),"td-eu-1","https://api.talkdeskapp.eu"),"td-ca-1","https://api.talkdeskappca.com"),"td-usfed-1","https://api.talkdeskapp-pubsec.com"),dw=L(L(L(L({},"td-us-1",Ur.tdGatewayUs),"td-eu-1",Ur.tdGatewayEu),"td-ca-1",Ur.tdGatewayCa),"td-usfed-1",Ur.tdGatewayUsFed);function hw(e,r){return r?"//".concat(r).concat(dw[e]):fw[e]}var Ac=function(e){return e.TEXT="TEXT",e.JSON="JSON",e.BLOB="BLOB",e.ARRAY_BUFFER="ARRAY_BUFFER",e}(Ac||{}),si=function(e){return e.GET="GET",e.POST="POST",e}(si||{}),pw={"Content-Type":"application/json"},gw=function(e){function r(t,n){var a;return $r(this,r),a=Pv(this,r,[t]),L(a,"code",void 0),L(a,"response",void 0),a.code=n.code,a.response=n.response,a}return Cv(r,e),br(r)}(yn(Error));function jc(e){var r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(t){return r[t]})}function yw(e){return Object.entries(e).reduce(function(r,t){var n=gn(t,2),a=n[0],i=n[1];return r.push("".concat(jc(a),"=").concat(jc(i))),r},[]).join("&")}function mw(e){return e>=200&&e<300}function $w(e){var r=Ce.getAllConfig(),t=r.appProps,n=hw(t==null?void 0:t.region,t==null?void 0:t.proxyHost);return e?n+e:n}function bw(e){var r=e.url,t=e.params,n=$w(r);if(t){var a=yw(t),i=n.indexOf("#");i!==-1&&(n=n.slice(0,i)),n+=(n.indexOf("?")===-1?"?":"&")+a}return n}function ww(e){var r=e.data;return r?JSON.stringify(r):void 0}function Sw(e){var r=e.token,t=N({},pw);return r&&(t.Authorization="Bearer ".concat(r)),t}function Ew(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.responseType||"JSON",t=e.method||"GET",n=bw(e),a=ww(e),i=Sw(e);return{url:n,method:t,body:a,headers:i,responseType:r}}function Ow(e){return ui.apply(this,arguments)}function ui(){return ui=q(R().mark(function e(r){var t,n,a=arguments;return R().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=a.length>1&&a[1]!==void 0?a[1]:"JSON",o.t0=t,o.next=o.t0==="TEXT"?4:o.t0==="JSON"?8:o.t0==="BLOB"?12:o.t0==="ARRAY_BUFFER"?16:20;break;case 4:return o.next=6,r.text();case 6:return n=o.sent,o.abrupt("break",21);case 8:return o.next=10,r.json();case 10:return n=o.sent,o.abrupt("break",21);case 12:return o.next=14,r.blob();case 14:return n=o.sent,o.abrupt("break",21);case 16:return o.next=18,r.arrayBuffer();case 18:return n=o.sent,o.abrupt("break",21);case 20:return o.abrupt("break",21);case 21:if(!(r.ok&&mw(r.status))){o.next=23;break}return o.abrupt("return",n);case 23:return o.abrupt("return",Promise.reject(new gw("Failed to http status error ".concat(r.status),{code:r.status,response:r})));case 24:case"end":return o.stop()}},e)})),ui.apply(this,arguments)}var kc=function(){function e(){$r(this,e)}return br(e,[{key:"request",value:function(){var r=q(R().mark(function n(a){var i,o=arguments;return R().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=o.length>1&&o[1]!==void 0?o[1]:{},typeof a=="string"?i.url=a:i=a,c.abrupt("return",e._request(i));case 3:case"end":return c.stop()}},n)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"get",value:function(){var r=q(R().mark(function n(a){var i,o=arguments;return R().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return i=o.length>1&&o[1]!==void 0?o[1]:{},c.next=3,this.request(a,N(N({},i),{},{method:si.GET}));case 3:return c.abrupt("return",c.sent);case 4:case"end":return c.stop()}},n,this)}));function t(n){return r.apply(this,arguments)}return t}()},{key:"post",value:function(){var r=q(R().mark(function n(a,i){var o,s=arguments;return R().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return o=s.length>2&&s[2]!==void 0?s[2]:{},u.next=3,this.request(a,N(N({},o),{},{method:si.POST,data:i}));case 3:return u.abrupt("return",u.sent);case 4:case"end":return u.stop()}},n,this)}));function t(n,a){return r.apply(this,arguments)}return t}()}],[{key:"create",value:function(){return e.http?e.http:new e}},{key:"_request",value:function(){var r=q(R().mark(function n(a){var i,o,s,c,u,v,l;return R().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return i=Ew(a),o=i.url,s=i.method,c=i.body,u=i.headers,v=i.responseType,d.next=3,fetch(o,{method:s,body:c,headers:u});case 3:return l=d.sent,d.abrupt("return",Ow(l,v));case 5:case"end":return d.stop()}},n)}));function t(n){return r.apply(this,arguments)}return t}()}])}();L(kc,"http",void 0);var Vt=kc.create();function Iw(e){return ci.apply(this,arguments)}function ci(){return ci=q(R().mark(function e(r){var t,n,a;return R().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t="/pas/livechat-auth",o.next=3,Vt.post(t,{app_id:r});case 3:return n=o.sent,a=n.td_access_token,o.abrupt("return",a);case 6:case"end":return o.stop()}},e)})),ci.apply(this,arguments)}function Tw(e){return li.apply(this,arguments)}function li(){return li=q(R().mark(function e(r){var t,n,a,i,o;return R().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t="/2019-11/pas/livechats",c.next=3,Vt.post(t,N(N({},r),{},{page_url:window.location.href}));case 3:return n=c.sent,a=n.access_token,i=n.conversation_sid,o=n.region,c.abrupt("return",{accessToken:a,roomId:i,region:o});case 8:case"end":return c.stop()}},e)})),li.apply(this,arguments)}function Pw(e){return vi.apply(this,arguments)}function vi(){return vi=q(R().mark(function e(r){return R().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,x$(q(R().mark(function a(){var i;return R().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Vt.get("/2019-11/pas/livechats",{params:{touchpoint_value:r}});case 2:return i=s.sent,s.abrupt("return",{active:i.active,config:i.config,account_id:i.account_id,release_version:i.release_version,enable_split_twilio_bootstrap:!!(i!=null&&i.enable_split_twilio_bootstrap),feedback_flow_id:(i==null?void 0:i.feedback_flow_id)||""});case 4:case"end":return s.stop()}},a)})),{defaultRetry:2});case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.error("Failed to fetch td chat touchpoint",n.t0),n.abrupt("return",null);case 10:case"end":return n.stop()}},e,null,[[0,6]])})),vi.apply(this,arguments)}var Rw=M,Cw=Br,_w=ce.f,fi=Rw("unscopables"),di=Array.prototype;di[fi]===void 0&&_w(di,fi,{configurable:!0,value:Cw(null)});var xw=function(e){di[fi][e]=!0},Lw=P,Aw=j,jw=H,Nc=Fa,kw=Z,Nw=M,hi=Nw("iterator"),Mc=!1,Ue,pi,gi;[].keys&&(gi=[].keys(),"next"in gi?(pi=Nc(Nc(gi)),pi!==Object.prototype&&(Ue=pi)):Mc=!0);var Mw=!jw(Ue)||Lw(function(){var e={};return Ue[hi].call(e)!==e});Mw&&(Ue={}),Aw(Ue[hi])||kw(Ue,hi,function(){return this});var Uc={IteratorPrototype:Ue,BUGGY_SAFARI_ITERATORS:Mc},Uw=Uc.IteratorPrototype,Bw=Br,Dw=Ir,Fw=ke,Gw=Mr,Hw=function(){return this},Bc=function(e,r,t,n){var a=r+" Iterator";return e.prototype=Bw(Uw,{next:Dw(+!n,t)}),Fw(e,a,!1),Gw[a]=Hw,e},zw=B,Ww=F,Dc=ct,Kw=j,qw=Bc,Fc=Fa,Gc=Zn,Vw=ke,Yw=Ve,yi=Z,Xw=M,Jw=Mr,Hc=Uc,Qw=Dc.PROPER,Zw=Dc.CONFIGURABLE,zc=Hc.IteratorPrototype,Yt=Hc.BUGGY_SAFARI_ITERATORS,Dr=Xw("iterator"),Wc="keys",Fr="values",Kc="entries",eS=function(){return this},mi=function(e,r,t,n,a,i,o){qw(t,r,n);var s=function(S){if(S===a&&f)return f;if(!Yt&&S&&S in v)return v[S];switch(S){case Wc:return function(){return new t(this,S)};case Fr:return function(){return new t(this,S)};case Kc:return function(){return new t(this,S)}}return function(){return new t(this)}},c=r+" Iterator",u=!1,v=e.prototype,l=v[Dr]||v["@@iterator"]||a&&v[a],f=!Yt&&l||s(a),d=r==="Array"&&v.entries||l,g,$,m;if(d&&(g=Fc(d.call(new e)),g!==Object.prototype&&g.next&&(Fc(g)!==zc&&(Gc?Gc(g,zc):Kw(g[Dr])||yi(g,Dr,eS)),Vw(g,c,!0))),Qw&&a===Fr&&l&&l.name!==Fr&&(Zw?Yw(v,"name",Fr):(u=!0,f=function(){return Ww(l,this)})),a)if($={values:s(Fr),keys:i?f:s(Wc),entries:s(Kc)},o)for(m in $)(Yt||u||!(m in v))&&yi(v,m,$[m]);else zw({target:r,proto:!0,forced:Yt||u},$);return v[Dr]!==f&&yi(v,Dr,f,{name:a}),Jw[r]=f,$},Xt=function(e,r){return{value:e,done:r}},rS=ge,$i=xw,qc=Mr,Vc=Ee,tS=ce.f,nS=mi,Jt=Xt,aS=G,Yc="Array Iterator",iS=Vc.set,oS=Vc.getterFor(Yc),sS=nS(Array,"Array",function(e,r){iS(this,{type:Yc,target:rS(e),index:0,kind:r})},function(){var e=oS(this),r=e.target,t=e.index++;if(!r||t>=r.length)return e.target=void 0,Jt(void 0,!0);switch(e.kind){case"keys":return Jt(t,!1);case"values":return Jt(r[t],!1)}return Jt([t,r[t]],!1)},"values"),Xc=qc.Arguments=qc.Array;if($i("keys"),$i("values"),$i("entries"),aS&&Xc.name!=="values")try{tS(Xc,"name",{value:"values"})}catch{}var uS=ri.charAt,cS=Pe,Jc=Ee,lS=mi,Qc=Xt,Zc="String Iterator",vS=Jc.set,fS=Jc.getterFor(Zc);lS(String,"String",function(e){vS(this,{type:Zc,string:cS(e),index:0})},function(){var r=fS(this),t=r.string,n=r.index,a;return n>=t.length?Qc(void 0,!0):(a=uS(t,n),r.index+=a.length,Qc(a,!1))});var el=A,rl=Uu,dS=Du,Gr=sS,tl=Ve,hS=ke,pS=M,bi=pS("iterator"),wi=Gr.values,nl=function(e,r){if(e){if(e[bi]!==wi)try{tl(e,bi,wi)}catch{e[bi]=wi}if(hS(e,r,!0),rl[r]){for(var t in Gr)if(e[t]!==Gr[t])try{tl(e,t,Gr[t])}catch{e[t]=Gr[t]}}}};for(var Si in rl)nl(el[Si]&&el[Si].prototype,Si);nl(dS,"DOMTokenList");var gS=P,yS=M,mS=G,al=Fv,$S=yS("iterator"),il=!gS(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),r=e.searchParams,t=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",r.forEach(function(a,i){r.delete("b"),n+=i+a}),t.delete("a",2),t.delete("b",void 0),al&&(!e.toJSON||!t.has("a",1)||t.has("a",2)||!t.has("a",void 0)||t.has("b"))||!r.size&&(al||!mS)||!r.sort||e.href!=="https://a/c%20d?a=1&c=3"||r.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!r[$S]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://тест").host!=="xn--e1aybc"||new URL("https://a#б").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"}),ol=G,bS=_,wS=F,SS=P,Ei=Bt,ES=Xn,OS=gt,IS=we,TS=yt,sr=Object.assign,sl=Object.defineProperty,PS=bS([].concat),RS=!sr||SS(function(){if(ol&&sr({b:1},sr(sl({},"a",{enumerable:!0,get:function(){sl(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},r={},t=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[t]=7,n.split("").forEach(function(a){r[a]=a}),sr({},e)[t]!==7||Ei(sr({},r)).join("")!==n})?function(r,t){for(var n=IS(r),a=arguments.length,i=1,o=ES.f,s=OS.f;a>i;)for(var c=TS(arguments[i++]),u=o?PS(Ei(c),o(c)):Ei(c),v=u.length,l=0,f;v>l;)f=u[l++],(!ol||wS(s,c,f))&&(n[f]=c[f]);return n}:sr,CS=z,_S=pu,xS=function(e,r,t,n){try{return n?r(CS(t)[0],t[1]):r(t)}catch(a){_S(e,"throw",a)}},LS=Ie,AS=F,jS=we,kS=xS,NS=fu,MS=Et,US=Xe,ul=Ua,BS=Ta,DS=kt,cl=Array,FS=function(r){var t=jS(r),n=MS(this),a=arguments.length,i=a>1?arguments[1]:void 0,o=i!==void 0;o&&(i=LS(i,a>2?arguments[2]:void 0));var s=DS(t),c=0,u,v,l,f,d,g;if(s&&!(this===cl&&NS(s)))for(v=n?new this:[],f=BS(t,s),d=f.next;!(l=AS(d,f)).done;c++)g=o?kS(f,i,[l.value,c],!0):l.value,ul(v,c,g);else for(u=US(t),v=n?new this(u):cl(u);u>c;c++)g=o?i(t[c],c):t[c],ul(v,c,g);return v.length=c,v},Be=_,Oi=2147483647,Hr=36,ll=1,Ii=26,GS=38,HS=700,zS=72,WS=128,KS="-",qS=/[^\0-\u007E]/,vl=/[.\u3002\uFF0E\uFF61]/g,fl="Overflow: input needs wider integers to process",Ti=Hr-ll,dl=RangeError,VS=Be(vl.exec),ur=Math.floor,Pi=String.fromCharCode,hl=Be("".charCodeAt),pl=Be([].join),_e=Be([].push),YS=Be("".replace),XS=Be("".split),JS=Be("".toLowerCase),QS=function(e){for(var r=[],t=0,n=e.length;t<n;){var a=hl(e,t++);if(a>=55296&&a<=56319&&t<n){var i=hl(e,t++);(i&64512)===56320?_e(r,((a&1023)<<10)+(i&1023)+65536):(_e(r,a),t--)}else _e(r,a)}return r},gl=function(e){return e+22+75*(e<26)},ZS=function(e,r,t){var n=0;for(e=t?ur(e/HS):e>>1,e+=ur(e/r);e>Ti*Ii>>1;)e=ur(e/Ti),n+=Hr;return ur(n+(Ti+1)*e/(e+GS))},eE=function(e){var r=[];e=QS(e);var t=e.length,n=WS,a=0,i=zS,o,s;for(o=0;o<e.length;o++)s=e[o],s<128&&_e(r,Pi(s));var c=r.length,u=c;for(c&&_e(r,KS);u<t;){var v=Oi;for(o=0;o<e.length;o++)s=e[o],s>=n&&s<v&&(v=s);var l=u+1;if(v-n>ur((Oi-a)/l))throw new dl(fl);for(a+=(v-n)*l,n=v,o=0;o<e.length;o++){if(s=e[o],s<n&&++a>Oi)throw new dl(fl);if(s===n){for(var f=a,d=Hr;;){var g=d<=i?ll:d>=i+Ii?Ii:d-i;if(f<g)break;var $=f-g,m=Hr-g;_e(r,Pi(gl(g+$%m))),f=ur($/m),d+=Hr}_e(r,Pi(gl(f))),i=ZS(a,l,u===c),a=0,u++}}a++,n++}return pl(r,"")},rE=function(e){var r=[],t=XS(YS(JS(e),vl,"."),"."),n,a;for(n=0;n<t.length;n++)a=t[n],_e(r,VS(qS,a)?"xn--"+eE(a):a);return pl(r,".")},tE=Z,yl=function(e,r,t){for(var n in r)tE(e,n,r[n],t);return e},ml=Lr,nE=Math.floor,Ri=function(e,r){var t=e.length;if(t<8)for(var n=1,a,i;n<t;){for(i=n,a=e[n];i&&r(e[i-1],a)>0;)e[i]=e[--i];i!==n++&&(e[i]=a)}else for(var o=nE(t/2),s=Ri(ml(e,0,o),r),c=Ri(ml(e,o),r),u=s.length,v=c.length,l=0,f=0;l<u||f<v;)e[l+f]=l<u&&f<v?r(s[l],c[f])<=0?s[l++]:c[f++]:l<u?s[l++]:c[f++];return e},aE=Ri,Ci=B,Qt=A,_i=Ms,Zt=F,he=_,zr=G,$l=il,bl=Z,iE=St,oE=yl,sE=ke,uE=Bc,xi=Ee,wl=_r,Li=j,cE=V,lE=Ie,vE=Pr,fE=z,Sl=H,W=Pe,dE=Br,El=Ir,Ol=Ta,hE=kt,en=Xt,cr=ra,pE=M,gE=aE,yE=pE("iterator"),lr="URLSearchParams",Il=lr+"Iterator",Tl=xi.set,ee=xi.getterFor(lr),mE=xi.getterFor(Il),Pl=_i("fetch"),rn=_i("Request"),Wr=_i("Headers"),Ai=rn&&rn.prototype,Rl=Wr&&Wr.prototype,$E=Qt.RegExp,bE=Qt.TypeError,Cl=Qt.decodeURIComponent,wE=Qt.encodeURIComponent,SE=he("".charAt),_l=he([].join),De=he([].push),ji=he("".replace),EE=he([].shift),xl=he([].splice),Ll=he("".split),OE=he("".slice),IE=/\+/g,Al=Array(4),TE=function(e){return Al[e-1]||(Al[e-1]=$E("((?:%[\\da-f]{2}){"+e+"})","gi"))},PE=function(e){try{return Cl(e)}catch{return e}},jl=function(e){var r=ji(e,IE," "),t=4;try{return Cl(r)}catch{for(;t;)r=ji(r,TE(t--),PE);return r}},RE=/[!'()~]|%20/g,CE={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},_E=function(e){return CE[e]},kl=function(e){return ji(wE(e),RE,_E)},ki=uE(function(r,t){Tl(this,{type:Il,target:ee(r).entries,index:0,kind:t})},lr,function(){var r=mE(this),t=r.target,n=r.index++;if(!t||n>=t.length)return r.target=void 0,en(void 0,!0);var a=t[n];switch(r.kind){case"keys":return en(a.key,!1);case"values":return en(a.value,!1)}return en([a.key,a.value],!1)},!0),Nl=function(e){this.entries=[],this.url=null,e!==void 0&&(Sl(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?SE(e,0)==="?"?OE(e,1):e:W(e)))};Nl.prototype={type:lr,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var r=this.entries,t=hE(e),n,a,i,o,s,c,u;if(t)for(n=Ol(e,t),a=n.next;!(i=Zt(a,n)).done;){if(o=Ol(fE(i.value)),s=o.next,(c=Zt(s,o)).done||(u=Zt(s,o)).done||!Zt(s,o).done)throw new bE("Expected sequence with length 2");De(r,{key:W(c.value),value:W(u.value)})}else for(var v in e)cE(e,v)&&De(r,{key:v,value:W(e[v])})},parseQuery:function(e){if(e)for(var r=this.entries,t=Ll(e,"&"),n=0,a,i;n<t.length;)a=t[n++],a.length&&(i=Ll(a,"="),De(r,{key:jl(EE(i)),value:jl(_l(i,"="))}))},serialize:function(){for(var e=this.entries,r=[],t=0,n;t<e.length;)n=e[t++],De(r,kl(n.key)+"="+kl(n.value));return _l(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var tn=function(){wl(this,vr);var r=arguments.length>0?arguments[0]:void 0,t=Tl(this,new Nl(r));zr||(this.size=t.entries.length)},vr=tn.prototype;if(oE(vr,{append:function(r,t){var n=ee(this);cr(arguments.length,2),De(n.entries,{key:W(r),value:W(t)}),zr||this.length++,n.updateURL()},delete:function(e){for(var r=ee(this),t=cr(arguments.length,1),n=r.entries,a=W(e),i=t<2?void 0:arguments[1],o=i===void 0?i:W(i),s=0;s<n.length;){var c=n[s];if(c.key===a&&(o===void 0||c.value===o)){if(xl(n,s,1),o!==void 0)break}else s++}zr||(this.size=n.length),r.updateURL()},get:function(r){var t=ee(this).entries;cr(arguments.length,1);for(var n=W(r),a=0;a<t.length;a++)if(t[a].key===n)return t[a].value;return null},getAll:function(r){var t=ee(this).entries;cr(arguments.length,1);for(var n=W(r),a=[],i=0;i<t.length;i++)t[i].key===n&&De(a,t[i].value);return a},has:function(r){for(var t=ee(this).entries,n=cr(arguments.length,1),a=W(r),i=n<2?void 0:arguments[1],o=i===void 0?i:W(i),s=0;s<t.length;){var c=t[s++];if(c.key===a&&(o===void 0||c.value===o))return!0}return!1},set:function(r,t){var n=ee(this);cr(arguments.length,1);for(var a=n.entries,i=!1,o=W(r),s=W(t),c=0,u;c<a.length;c++)u=a[c],u.key===o&&(i?xl(a,c--,1):(i=!0,u.value=s));i||De(a,{key:o,value:s}),zr||(this.size=a.length),n.updateURL()},sort:function(){var r=ee(this);gE(r.entries,function(t,n){return t.key>n.key?1:-1}),r.updateURL()},forEach:function(r){for(var t=ee(this).entries,n=lE(r,arguments.length>1?arguments[1]:void 0),a=0,i;a<t.length;)i=t[a++],n(i.value,i.key,this)},keys:function(){return new ki(this,"keys")},values:function(){return new ki(this,"values")},entries:function(){return new ki(this,"entries")}},{enumerable:!0}),bl(vr,yE,vr.entries,{name:"entries"}),bl(vr,"toString",function(){return ee(this).serialize()},{enumerable:!0}),zr&&iE(vr,"size",{get:function(){return ee(this).entries.length},configurable:!0,enumerable:!0}),sE(tn,lr),Ci({global:!0,constructor:!0,forced:!$l},{URLSearchParams:tn}),!$l&&Li(Wr)){var xE=he(Rl.has),LE=he(Rl.set),Ml=function(e){if(Sl(e)){var r=e.body,t;if(vE(r)===lr)return t=e.headers?new Wr(e.headers):new Wr,xE(t,"content-type")||LE(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),dE(e,{body:El(0,W(r)),headers:El(0,t)})}return e};if(Li(Pl)&&Ci({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(r){return Pl(r,arguments.length>1?Ml(arguments[1]):{})}}),Li(rn)){var Ni=function(r){return wl(this,Ai),new rn(r,arguments.length>1?Ml(arguments[1]):{})};Ai.constructor=Ni,Ni.prototype=Ai,Ci({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Ni})}}var AE={URLSearchParams:tn,getState:ee},jE=B,Mi=G,kE=il,Ui=A,Ul=Ie,re=_,nn=Z,te=St,NE=_r,Bi=V,Di=RS,fr=FS,le=Lr,ME=ri.codeAt,UE=rE,ye=Pe,BE=ke,DE=ra,Bl=AE,Dl=Ee,FE=Dl.set,an=Dl.getterFor("URL"),GE=Bl.URLSearchParams,HE=Bl.getState,Kr=Ui.URL,Fi=Ui.TypeError,on=Ui.parseInt,zE=Math.floor,Fl=Math.pow,ne=re("".charAt),ve=re(/./.exec),qr=re([].join),WE=re(1 .toString),KE=re([].pop),dr=re([].push),Gi=re("".replace),qE=re([].shift),VE=re("".split),Vr=re("".slice),sn=re("".toLowerCase),YE=re([].unshift),XE="Invalid authority",Hi="Invalid scheme",Fe="Invalid host",Gl="Invalid port",Hl=/[a-z]/i,JE=/[\d+-.a-z]/i,zi=/\d/,QE=/^0x/i,ZE=/^[0-7]+$/,e1=/^\d+$/,zl=/^[\da-f]+$/i,r1=/[\0\t\n\r #%/:<>?@[\\\]^|]/,t1=/[\0\t\n\r #/:<>?@[\\\]^|]/,n1=/^[\u0000-\u0020]+/,a1=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,i1=/[\t\n\r]/g,ae,o1=function(e){var r=VE(e,"."),t,n,a,i,o,s,c;if(r.length&&r[r.length-1]===""&&r.length--,t=r.length,t>4)return e;for(n=[],a=0;a<t;a++){if(i=r[a],i==="")return e;if(o=10,i.length>1&&ne(i,0)==="0"&&(o=ve(QE,i)?16:8,i=Vr(i,o===8?1:2)),i==="")s=0;else{if(!ve(o===10?e1:o===8?ZE:zl,i))return e;s=on(i,o)}dr(n,s)}for(a=0;a<t;a++)if(s=n[a],a===t-1){if(s>=Fl(256,5-t))return null}else if(s>255)return null;for(c=KE(n),a=0;a<n.length;a++)c+=n[a]*Fl(256,3-a);return c},s1=function(e){var r=[0,0,0,0,0,0,0,0],t=0,n=null,a=0,i,o,s,c,u,v,l,f=function(){return ne(e,a)};if(f()===":"){if(ne(e,1)!==":")return;a+=2,t++,n=t}for(;f();){if(t===8)return;if(f()===":"){if(n!==null)return;a++,t++,n=t;continue}for(i=o=0;o<4&&ve(zl,f());)i=i*16+on(f(),16),a++,o++;if(f()==="."){if(o===0||(a-=o,t>6))return;for(s=0;f();){if(c=null,s>0)if(f()==="."&&s<4)a++;else return;if(!ve(zi,f()))return;for(;ve(zi,f());){if(u=on(f(),10),c===null)c=u;else{if(c===0)return;c=c*10+u}if(c>255)return;a++}r[t]=r[t]*256+c,s++,(s===2||s===4)&&t++}if(s!==4)return;break}else if(f()===":"){if(a++,!f())return}else if(f())return;r[t++]=i}if(n!==null)for(v=t-n,t=7;t!==0&&v>0;)l=r[t],r[t--]=r[n+v-1],r[n+--v]=l;else if(t!==8)return;return r},u1=function(e){for(var r=null,t=1,n=null,a=0,i=0;i<8;i++)e[i]!==0?(a>t&&(r=n,t=a),n=null,a=0):(n===null&&(n=i),++a);return a>t?n:r},Yr=function(e){var r,t,n,a;if(typeof e=="number"){for(r=[],t=0;t<4;t++)YE(r,e%256),e=zE(e/256);return qr(r,".")}if(typeof e=="object"){for(r="",n=u1(e),t=0;t<8;t++)a&&e[t]===0||(a&&(a=!1),n===t?(r+=t?":":"::",a=!0):(r+=WE(e[t],16),t<7&&(r+=":")));return"["+r+"]"}return e},un={},Wl=Di({},un,{" ":1,'"':1,"<":1,">":1,"`":1}),Kl=Di({},Wl,{"#":1,"?":1,"{":1,"}":1}),Wi=Di({},Kl,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),xe=function(e,r){var t=ME(e,0);return t>32&&t<127&&!Bi(r,e)?e:encodeURIComponent(e)},cn={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Xr=function(e,r){var t;return e.length===2&&ve(Hl,ne(e,0))&&((t=ne(e,1))===":"||!r&&t==="|")},ql=function(e){var r;return e.length>1&&Xr(Vr(e,0,2))&&(e.length===2||(r=ne(e,2))==="/"||r==="\\"||r==="?"||r==="#")},c1=function(e){return e==="."||sn(e)==="%2e"},l1=function(e){return e=sn(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},Ki={},Vl={},qi={},Yl={},Xl={},Vi={},Jl={},Ql={},ln={},vn={},Yi={},Xi={},Ji={},Qi={},Zl={},Zi={},hr={},pe={},ev={},Ge={},me={},eo=function(e,r,t){var n=ye(e),a,i,o;if(r){if(i=this.parse(n),i)throw new Fi(i);this.searchParams=null}else{if(t!==void 0&&(a=new eo(t,!0)),i=this.parse(n,null,a),i)throw new Fi(i);o=HE(new GE),o.bindURL(this),this.searchParams=o}};eo.prototype={type:"URL",parse:function(e,r,t){var n=this,a=r||Ki,i=0,o="",s=!1,c=!1,u=!1,v,l,f,d;for(e=ye(e),r||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=Gi(e,n1,""),e=Gi(e,a1,"$1")),e=Gi(e,i1,""),v=fr(e);i<=v.length;){switch(l=v[i],a){case Ki:if(l&&ve(Hl,l))o+=sn(l),a=Vl;else{if(r)return Hi;a=qi;continue}break;case Vl:if(l&&(ve(JE,l)||l==="+"||l==="-"||l==="."))o+=sn(l);else if(l===":"){if(r&&(n.isSpecial()!==Bi(cn,o)||o==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=o,r){n.isSpecial()&&cn[n.scheme]===n.port&&(n.port=null);return}o="",n.scheme==="file"?a=Qi:n.isSpecial()&&t&&t.scheme===n.scheme?a=Yl:n.isSpecial()?a=Ql:v[i+1]==="/"?(a=Xl,i++):(n.cannotBeABaseURL=!0,dr(n.path,""),a=ev)}else{if(r)return Hi;o="",a=qi,i=0;continue}break;case qi:if(!t||t.cannotBeABaseURL&&l!=="#")return Hi;if(t.cannotBeABaseURL&&l==="#"){n.scheme=t.scheme,n.path=le(t.path),n.query=t.query,n.fragment="",n.cannotBeABaseURL=!0,a=me;break}a=t.scheme==="file"?Qi:Vi;continue;case Yl:if(l==="/"&&v[i+1]==="/")a=ln,i++;else{a=Vi;continue}break;case Xl:if(l==="/"){a=vn;break}else{a=pe;continue}case Vi:if(n.scheme=t.scheme,l===ae)n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=le(t.path),n.query=t.query;else if(l==="/"||l==="\\"&&n.isSpecial())a=Jl;else if(l==="?")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=le(t.path),n.query="",a=Ge;else if(l==="#")n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=le(t.path),n.query=t.query,n.fragment="",a=me;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,n.path=le(t.path),n.path.length--,a=pe;continue}break;case Jl:if(n.isSpecial()&&(l==="/"||l==="\\"))a=ln;else if(l==="/")a=vn;else{n.username=t.username,n.password=t.password,n.host=t.host,n.port=t.port,a=pe;continue}break;case Ql:if(a=ln,l!=="/"||ne(o,i+1)!=="/")continue;i++;break;case ln:if(l!=="/"&&l!=="\\"){a=vn;continue}break;case vn:if(l==="@"){s&&(o="%40"+o),s=!0,f=fr(o);for(var g=0;g<f.length;g++){var $=f[g];if($===":"&&!u){u=!0;continue}var m=xe($,Wi);u?n.password+=m:n.username+=m}o=""}else if(l===ae||l==="/"||l==="?"||l==="#"||l==="\\"&&n.isSpecial()){if(s&&o==="")return XE;i-=fr(o).length+1,o="",a=Yi}else o+=l;break;case Yi:case Xi:if(r&&n.scheme==="file"){a=Zi;continue}else if(l===":"&&!c){if(o==="")return Fe;if(d=n.parseHost(o),d)return d;if(o="",a=Ji,r===Xi)return}else if(l===ae||l==="/"||l==="?"||l==="#"||l==="\\"&&n.isSpecial()){if(n.isSpecial()&&o==="")return Fe;if(r&&o===""&&(n.includesCredentials()||n.port!==null))return;if(d=n.parseHost(o),d)return d;if(o="",a=hr,r)return;continue}else l==="["?c=!0:l==="]"&&(c=!1),o+=l;break;case Ji:if(ve(zi,l))o+=l;else if(l===ae||l==="/"||l==="?"||l==="#"||l==="\\"&&n.isSpecial()||r){if(o!==""){var S=on(o,10);if(S>65535)return Gl;n.port=n.isSpecial()&&S===cn[n.scheme]?null:S,o=""}if(r)return;a=hr;continue}else return Gl;break;case Qi:if(n.scheme="file",l==="/"||l==="\\")a=Zl;else if(t&&t.scheme==="file")switch(l){case ae:n.host=t.host,n.path=le(t.path),n.query=t.query;break;case"?":n.host=t.host,n.path=le(t.path),n.query="",a=Ge;break;case"#":n.host=t.host,n.path=le(t.path),n.query=t.query,n.fragment="",a=me;break;default:ql(qr(le(v,i),""))||(n.host=t.host,n.path=le(t.path),n.shortenPath()),a=pe;continue}else{a=pe;continue}break;case Zl:if(l==="/"||l==="\\"){a=Zi;break}t&&t.scheme==="file"&&!ql(qr(le(v,i),""))&&(Xr(t.path[0],!0)?dr(n.path,t.path[0]):n.host=t.host),a=pe;continue;case Zi:if(l===ae||l==="/"||l==="\\"||l==="?"||l==="#"){if(!r&&Xr(o))a=pe;else if(o===""){if(n.host="",r)return;a=hr}else{if(d=n.parseHost(o),d)return d;if(n.host==="localhost"&&(n.host=""),r)return;o="",a=hr}continue}else o+=l;break;case hr:if(n.isSpecial()){if(a=pe,l!=="/"&&l!=="\\")continue}else if(!r&&l==="?")n.query="",a=Ge;else if(!r&&l==="#")n.fragment="",a=me;else if(l!==ae&&(a=pe,l!=="/"))continue;break;case pe:if(l===ae||l==="/"||l==="\\"&&n.isSpecial()||!r&&(l==="?"||l==="#")){if(l1(o)?(n.shortenPath(),l!=="/"&&!(l==="\\"&&n.isSpecial())&&dr(n.path,"")):c1(o)?l!=="/"&&!(l==="\\"&&n.isSpecial())&&dr(n.path,""):(n.scheme==="file"&&!n.path.length&&Xr(o)&&(n.host&&(n.host=""),o=ne(o,0)+":"),dr(n.path,o)),o="",n.scheme==="file"&&(l===ae||l==="?"||l==="#"))for(;n.path.length>1&&n.path[0]==="";)qE(n.path);l==="?"?(n.query="",a=Ge):l==="#"&&(n.fragment="",a=me)}else o+=xe(l,Kl);break;case ev:l==="?"?(n.query="",a=Ge):l==="#"?(n.fragment="",a=me):l!==ae&&(n.path[0]+=xe(l,un));break;case Ge:!r&&l==="#"?(n.fragment="",a=me):l!==ae&&(l==="'"&&n.isSpecial()?n.query+="%27":l==="#"?n.query+="%23":n.query+=xe(l,un));break;case me:l!==ae&&(n.fragment+=xe(l,Wl));break}i++}},parseHost:function(e){var r,t,n;if(ne(e,0)==="["){if(ne(e,e.length-1)!=="]"||(r=s1(Vr(e,1,-1)),!r))return Fe;this.host=r}else if(this.isSpecial()){if(e=UE(e),ve(r1,e)||(r=o1(e),r===null))return Fe;this.host=r}else{if(ve(t1,e))return Fe;for(r="",t=fr(e),n=0;n<t.length;n++)r+=xe(t[n],un);this.host=r}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return Bi(cn,this.scheme)},shortenPath:function(){var e=this.path,r=e.length;r&&(this.scheme!=="file"||r!==1||!Xr(e[0],!0))&&e.length--},serialize:function(){var e=this,r=e.scheme,t=e.username,n=e.password,a=e.host,i=e.port,o=e.path,s=e.query,c=e.fragment,u=r+":";return a!==null?(u+="//",e.includesCredentials()&&(u+=t+(n?":"+n:"")+"@"),u+=Yr(a),i!==null&&(u+=":"+i)):r==="file"&&(u+="//"),u+=e.cannotBeABaseURL?o[0]:o.length?"/"+qr(o,"/"):"",s!==null&&(u+="?"+s),c!==null&&(u+="#"+c),u},setHref:function(e){var r=this.parse(e);if(r)throw new Fi(r);this.searchParams.update()},getOrigin:function(){var e=this.scheme,r=this.port;if(e==="blob")try{return new pr(e.path[0]).origin}catch{return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+Yr(this.host)+(r!==null?":"+r:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(ye(e)+":",Ki)},getUsername:function(){return this.username},setUsername:function(e){var r=fr(ye(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var t=0;t<r.length;t++)this.username+=xe(r[t],Wi)}},getPassword:function(){return this.password},setPassword:function(e){var r=fr(ye(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var t=0;t<r.length;t++)this.password+=xe(r[t],Wi)}},getHost:function(){var e=this.host,r=this.port;return e===null?"":r===null?Yr(e):Yr(e)+":"+r},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Yi)},getHostname:function(){var e=this.host;return e===null?"":Yr(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Xi)},getPort:function(){var e=this.port;return e===null?"":ye(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=ye(e),e===""?this.port=null:this.parse(e,Ji))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+qr(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,hr))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=ye(e),e===""?this.query=null:(ne(e,0)==="?"&&(e=Vr(e,1)),this.query="",this.parse(e,Ge)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=ye(e),e===""){this.fragment=null;return}ne(e,0)==="#"&&(e=Vr(e,1)),this.fragment="",this.parse(e,me)},update:function(){this.query=this.searchParams.serialize()||null}};var pr=function(r){var t=NE(this,K),n=DE(arguments.length,1)>1?arguments[1]:void 0,a=FE(t,new eo(r,!1,n));Mi||(t.href=a.serialize(),t.origin=a.getOrigin(),t.protocol=a.getProtocol(),t.username=a.getUsername(),t.password=a.getPassword(),t.host=a.getHost(),t.hostname=a.getHostname(),t.port=a.getPort(),t.pathname=a.getPathname(),t.search=a.getSearch(),t.searchParams=a.getSearchParams(),t.hash=a.getHash())},K=pr.prototype,ie=function(e,r){return{get:function(){return an(this)[e]()},set:r&&function(t){return an(this)[r](t)},configurable:!0,enumerable:!0}};if(Mi&&(te(K,"href",ie("serialize","setHref")),te(K,"origin",ie("getOrigin")),te(K,"protocol",ie("getProtocol","setProtocol")),te(K,"username",ie("getUsername","setUsername")),te(K,"password",ie("getPassword","setPassword")),te(K,"host",ie("getHost","setHost")),te(K,"hostname",ie("getHostname","setHostname")),te(K,"port",ie("getPort","setPort")),te(K,"pathname",ie("getPathname","setPathname")),te(K,"search",ie("getSearch","setSearch")),te(K,"searchParams",ie("getSearchParams")),te(K,"hash",ie("getHash","setHash"))),nn(K,"toJSON",function(){return an(this).serialize()},{enumerable:!0}),nn(K,"toString",function(){return an(this).serialize()},{enumerable:!0}),Kr){var rv=Kr.createObjectURL,tv=Kr.revokeObjectURL;rv&&nn(pr,"createObjectURL",Ul(rv,Kr)),tv&&nn(pr,"revokeObjectURL",Ul(tv,Kr))}BE(pr,"URL"),jE({global:!0,constructor:!0,forced:!kE,sham:!Mi},{URL:pr});var v1=B,f1=F;v1({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return f1(URL.prototype.toString,this)}});function d1(e,r){if(!e.length)return[];var t=URL.createObjectURL(new Blob(e)),n=document.createElement("a");return n.href=t,n.download=r,n.rel="noopener",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t),e}function h1(e){return ro.apply(this,arguments)}function ro(){return ro=q(R().mark(function e(r){var t,n,a,i,o,s,c,u,v,l;return R().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(t=r.interactionId,n=t===void 0?"":t,a=r.token,i=a===void 0?"":a,o=r.timezone,s=o===void 0?"":o,c=r.fileName,u=c===void 0?"unknown.txt":c,n){d.next=3;break}throw new Error("Interaction ID is required");case 3:if(i){d.next=5;break}throw new Error("Token is required");case 5:return v="/cds/interactions/".concat(n,"/messages/transcript"),d.next=8,Vt.get(v,{params:{timezone:s},token:i,responseType:Ac.BLOB});case 8:return l=d.sent,d.abrupt("return",d1([l],u));case 10:case"end":return d.stop()}},e)})),ro.apply(this,arguments)}var to=function(){function e(r){$r(this,e),L(this,"current",void 0),this.current=r}return br(e,null,[{key:"create",value:function(t){return new e(t)}},{key:"empty",value:function(){return new e(null)}}])}();function no(e,r){try{return e==null?void 0:e()}catch(t){r==null||r(t)}}var p1=function(r){var t={chatIcon:r.chatIcon?"url(".concat(r.chatIcon,")"):void 0,chatThemeColor:r.chatThemeColor,chatHoverThemeColor:r.chatHoverThemeColor,triggerButtonWidth:r.triggerButtonWidth,triggerButtonHeight:r.triggerButtonHeight,triggerButtonPositionBottom:r.triggerButtonPositionBottom,triggerButtonPositionRight:r.triggerButtonPositionRight,chatPositionBottom:r.chatPositionBottom,chatContainerHeight:r.chatContainerHeight,chatContainerWidth:r.chatContainerWidth,chatLauncherColor:r.chatLauncherColor,chatHoverLauncherColor:r.chatHoverLauncherColor};return R$(t,{removeEmptyString:!0})};const g1='.tdw-widget-wrapper{--chat-z-index: 99999;position:fixed;z-index:var(--chat-z-index)}.tdw-widget-wrapper[data-preview]{position:sticky;display:flex;flex-direction:column;gap:24px;align-items:self-end}.tdw-widget{position:fixed;right:20px;bottom:var(--chat-position-bottom, 20px);z-index:var(--chat-z-index);width:var(--chat-container-width, 360px);min-width:360px;height:var(--chat-container-height, 680px);border:none;border-radius:20px;box-shadow:0 32px 20px #00000005,0 16px 16px #0000000a,0 4px 8px #0000000f,0 -4px 24px #00000014;overflow:hidden;transition:height .2s linear;will-change:height;max-height:calc(var(--chat-screen-height) - var(--chat-position-bottom, 20px) - 20px)}.tdw-widget[data-preview]{position:unset}.tdw-widget iframe{width:100%;height:100%;border:none;border-radius:inherit}@media only screen and (max-width: 600px),(max-height: 620px){.tdw-widget[data-responsive-layout=true]{top:0;right:0;bottom:0;left:0;overflow:hidden;width:var(--chat-screen-width, 100%);min-width:var(--chat-screen-width, 100%);max-width:var(--chat-screen-width, 100%);height:var(--chat-screen-height, 100%);min-height:var(--chat-screen-height, 100%);max-height:var(--chat-screen-height, 100%);border-radius:0}}.tdw-widget-trigger{position:fixed;right:var(--trigger-button-position-right, 10px);bottom:var(--trigger-button-position-bottom, 20px);z-index:var(--chat-z-index);display:flex;justify-content:center;align-items:center;width:var(--trigger-button-width, 64px);height:var(--trigger-button-height, 64px);border:none;border-radius:50%;cursor:pointer;background-image:var(--chat-icon, url(https://prd-cdn-talkdesk.talkdesk.com/cdn-assets/latest/talkdesk/product/app-icons/sms.svg));background-color:var(--chat-launcher-color, #1f1f1f);background-size:56%;background-repeat:no-repeat;background-position:center;transition:background-color .1s ease-in-out}.tdw-widget-trigger:hover{background-color:var(--chat-hover-launcher-color, #383838)}.tdw-widget-trigger[data-preview]{position:relative;right:unset;bottom:unset}.tdw-widget-trigger-badge{position:absolute;top:0;right:0;width:16px;height:16px;line-height:16px;text-align:center;color:#fff;background-color:#f5222d;font-size:10px;border-radius:50%;box-sizing:border-box;transition:right,width,border-radius .25s ease}.tdw-widget-trigger-badge-more{right:-4px;width:28px;border-radius:48px}.tdw-widget-loading{display:flex;flex-direction:column;width:100%;height:100%}.tdw-widget-header{height:64px;background-color:var(--chat-header-background-color, #f8f8f8);border-top-left-radius:8px;border-top-right-radius:8px}.tdw-widget-content{display:flex;flex-direction:column;justify-content:center;align-items:center;height:calc(100% - 56px);padding:16px;box-sizing:border-box}.tdw-loader{position:relative;width:100px;height:10px}.tdw-loader:before,.tdw-loader:after{content:"";position:absolute;top:0;left:0;width:10px;height:10px;margin-left:25%;border-radius:50%;box-shadow:20px 0 #e9e9e9;background:#e9e9e9;animation:move-x 1s linear infinite}.tdw-loader:after{box-shadow:none;transform:translate(40px) scale(1);z-index:2;animation:loading 1s linear infinite}@keyframes loading{0%,5%{transform:translate(40px) scale(1);background:#e9e9e9}10%{transform:translate(40px) scale(1);background:var(--chat-theme-color, #1f1f1f)}40%{transform:translate(20px) scale(1.5);background:var(--chat-theme-color, #1f1f1f)}90%,95%{transform:translate(0) scale(1);background:var(--chat-theme-color, #1f1f1f)}to{transform:translate(0) scale(1);background:#e9e9e9}}@keyframes move-x{0%,10%{transform:translate(0)}90%,to{transform:translate(20px)}}';var y1="talkdesk-chat-widget-style";function m1(e){var r,t,n,a=e==null?void 0:e.config,i=a?$$(a,{}):e==null?void 0:e.widgetSettings,o={};if(i!=null&&(r=i.appearance)!==null&&r!==void 0&&(r=r.theme)!==null&&r!==void 0&&r.brandColor){var s,c;o.chatThemeColor=i==null||(s=i.appearance)===null||s===void 0?void 0:s.theme.brandColor,o.chatHoverThemeColor=i==null||(c=i.appearance)===null||c===void 0?void 0:c.theme.brandColor}if(i!=null&&(t=i.appearance)!==null&&t!==void 0&&(t=t.launcher)!==null&&t!==void 0&&t.color){var u,v;o.chatLauncherColor=i==null||(u=i.appearance)===null||u===void 0||(u=u.launcher)===null||u===void 0?void 0:u.color,o.chatHoverLauncherColor=i==null||(v=i.appearance)===null||v===void 0||(v=v.launcher)===null||v===void 0?void 0:v.color}if(i!=null&&(n=i.appearance)!==null&&n!==void 0&&(n=n.launcher)!==null&&n!==void 0&&n.iconUrl){var l;o.chatIcon=i==null||(l=i.appearance)===null||l===void 0||(l=l.launcher)===null||l===void 0?void 0:l.iconUrl}return o}function $1(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return p1(N(N({},m1(r)),e))}function b1(e){var r=[];return r.push(m$(g1,y1,e)),function(){r.forEach(function(t){return t()}),r.length=0}}function w1(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,n=$1(r,t),a=Object.keys(n);if(a.length)return Mu(e,n)}function S1(e,r){var t=function(){Mu(e,{chatScreenWidth:window.innerWidth+"px",chatScreenHeight:window.innerHeight+"px"})},n=function(){t()};return t(),window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}var nv="tdw-widget-wrapper";function E1(e){var r=e.root,t=e.isPreview,n=t===void 0?!1:t,a=document.createElement("div");return a.className=nv,a.setAttribute("data-".concat(nv),""),n&&a.setAttribute("data-preview",""),r.appendChild(a),{element:a,destroy:function(){Lm(r,a)&&r.removeChild(a),a.remove()}}}var O1=F,I1=V,T1=it,P1=fc,av=RegExp.prototype,R1=function(e){var r=e.flags;return r===void 0&&!("flags"in av)&&!I1(e,"flags")&&T1(av,e)?O1(P1,e):r},C1=ct.PROPER,_1=Z,x1=z,iv=Pe,L1=P,A1=R1,ao="toString",ov=RegExp.prototype,sv=ov[ao],j1=L1(function(){return sv.call({source:"a",flags:"b"})!=="/a/b"}),k1=C1&&sv.name!==ao;(j1||k1)&&_1(ov,ao,function(){var r=x1(this),t=iv(r.source),n=iv(A1(r));return"/"+t+"/"+n},{unsafe:!0});var uv="talkdesk-chat-widget-trigger";function N1(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=document.createElement("button");n.id=uv,n.className="tdw-widget-trigger",n.ariaLabel="Open chat widget",t&&n.setAttribute("data-preview","");var a=null,i=null,o=function(){var $;($=i)===null||$===void 0||$.destroy(),i=null},s=function(){i||(i=new b$(n,{onClick:function(){r==null||r()}}))},c=function(){document.getElementById(uv)||(e.appendChild(n),n.onclick=function(){i||r==null||r()})},u=function(){c(),n.style.display=""},v=function(){n.style.display="none"},l=function($){var m=$.enablePointMoveTriggerButton;m&&s()},f=function(){o(),n.remove()},d=function($){$>0?(a||(a=document.createElement("span"),a.className="tdw-widget-trigger-badge ".concat($>9?"tdw-widget-trigger-badge-more":""),a.ariaLabel="new message indicator",n.appendChild(a)),a.textContent=$>99?"99+":$.toString()):a&&(a.remove(),a=null)};return{open:u,close:v,update:l,destroy:f,setBadge:d}}var M1=B,U1=xa.filter,B1=Ut,D1=B1("filter");M1({target:"Array",proto:!0,forced:!D1},{filter:function(r){return U1(this,r,arguments.length>1?arguments[1]:void 0)}});function io(e){try{return!isNaN(+e)}catch{return!1}}function F1(e){if(!e)return!1;try{var r=e.toString().split(".").map(function(o){return o.trim()}).filter(Boolean);if(r.length!==3)return!1;var t=gn(r,3),n=t[0],a=t[1],i=t[2];return io(n)&&io(a)&&io(i)}catch{return!1}}var cv={exports:{}},lv={},G1=Oe,H1=ge,vv=mt.f,z1=Lr,fv=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],W1=function(e){try{return vv(e)}catch{return z1(fv)}};lv.f=function(r){return fv&&G1(r)==="Window"?W1(r):vv(H1(r))};var K1=P,q1=K1(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}),V1=P,Y1=H,X1=Oe,dv=q1,fn=Object.isExtensible,J1=V1(function(){fn(1)}),Q1=J1||dv?function(r){return!Y1(r)||dv&&X1(r)==="ArrayBuffer"?!1:fn?fn(r):!0}:fn,Z1=P,eO=!Z1(function(){return Object.isExtensible(Object.preventExtensions({}))}),rO=B,tO=_,nO=lt,aO=H,oo=V,iO=ce.f,hv=mt,oO=lv,so=Q1,sO=Sn,uO=eO,pv=!1,$e=sO("meta"),cO=0,uo=function(e){iO(e,$e,{value:{objectID:"O"+cO++,weakData:{}}})},lO=function(e,r){if(!aO(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!oo(e,$e)){if(!so(e))return"F";if(!r)return"E";uo(e)}return e[$e].objectID},vO=function(e,r){if(!oo(e,$e)){if(!so(e))return!0;if(!r)return!1;uo(e)}return e[$e].weakData},fO=function(e){return uO&&pv&&so(e)&&!oo(e,$e)&&uo(e),e},dO=function(){hO.enable=function(){},pv=!0;var e=hv.f,r=tO([].splice),t={};t[$e]=1,e(t).length&&(hv.f=function(n){for(var a=e(n),i=0,o=a.length;i<o;i++)if(a[i]===$e){r(a,i,1);break}return a},rO({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:oO.f}))},hO=cv.exports={enable:dO,fastKey:lO,getWeakData:vO,onFreeze:fO};nO[$e]=!0;var gv=cv.exports,pO=j,gO=H,yv=Zn,yO=function(e,r,t){var n,a;return yv&&pO(n=r.constructor)&&n!==t&&gO(a=n.prototype)&&a!==t.prototype&&yv(e,a),e},mO=B,$O=A,bO=_,mv=Jn,wO=Z,SO=gv,EO=Mt,OO=_r,IO=j,TO=Ae,co=H,lo=P,PO=Su,RO=ke,CO=yO,_O=function(e,r,t){var n=e.indexOf("Map")!==-1,a=e.indexOf("Weak")!==-1,i=n?"set":"add",o=$O[e],s=o&&o.prototype,c=o,u={},v=function(S){var w=bO(s[S]);wO(s,S,S==="add"?function(x){return w(this,x===0?0:x),this}:S==="delete"?function(T){return a&&!co(T)?!1:w(this,T===0?0:T)}:S==="get"?function(x){return a&&!co(x)?void 0:w(this,x===0?0:x)}:S==="has"?function(x){return a&&!co(x)?!1:w(this,x===0?0:x)}:function(x,fe){return w(this,x===0?0:x,fe),this})},l=mv(e,!IO(o)||!(a||s.forEach&&!lo(function(){new o().entries().next()})));if(l)c=t.getConstructor(r,e,n,i),SO.enable();else if(mv(e,!0)){var f=new c,d=f[i](a?{}:-0,1)!==f,g=lo(function(){f.has(1)}),$=PO(function(S){new o(S)}),m=!a&&lo(function(){for(var S=new o,w=5;w--;)S[i](w,w);return!S.has(-0)});$||(c=r(function(S,w){OO(S,s);var T=CO(new o,S,c);return TO(w)||EO(w,T[i],{that:T,AS_ENTRIES:n}),T}),c.prototype=s,s.constructor=c),(g||m)&&(v("delete"),v("has"),n&&v("get")),(m||d)&&v(i),a&&s.clear&&delete s.clear}return u[e]=c,mO({global:!0,constructor:!0,forced:c!==o},u),RO(c,e),a||t.setStrong(c,e,n),c},$v=Br,xO=St,bv=yl,LO=Ie,AO=_r,jO=Ae,kO=Mt,NO=mi,dn=Xt,MO=hs,Jr=G,wv=gv.fastKey,Sv=Ee,Ev=Sv.set,vo=Sv.getterFor,UO={getConstructor:function(e,r,t,n){var a=e(function(u,v){AO(u,i),Ev(u,{type:r,index:$v(null),first:void 0,last:void 0,size:0}),Jr||(u.size=0),jO(v)||kO(v,u[n],{that:u,AS_ENTRIES:t})}),i=a.prototype,o=vo(r),s=function(u,v,l){var f=o(u),d=c(u,v),g,$;return d?d.value=l:(f.last=d={index:$=wv(v,!0),key:v,value:l,previous:g=f.last,next:void 0,removed:!1},f.first||(f.first=d),g&&(g.next=d),Jr?f.size++:u.size++,$!=="F"&&(f.index[$]=d)),u},c=function(u,v){var l=o(u),f=wv(v),d;if(f!=="F")return l.index[f];for(d=l.first;d;d=d.next)if(d.key===v)return d};return bv(i,{clear:function(){for(var v=this,l=o(v),f=l.first;f;)f.removed=!0,f.previous&&(f.previous=f.previous.next=void 0),f=f.next;l.first=l.last=void 0,l.index=$v(null),Jr?l.size=0:v.size=0},delete:function(u){var v=this,l=o(v),f=c(v,u);if(f){var d=f.next,g=f.previous;delete l.index[f.index],f.removed=!0,g&&(g.next=d),d&&(d.previous=g),l.first===f&&(l.first=d),l.last===f&&(l.last=g),Jr?l.size--:v.size--}return!!f},forEach:function(v){for(var l=o(this),f=LO(v,arguments.length>1?arguments[1]:void 0),d;d=d?d.next:l.first;)for(f(d.value,d.key,this);d&&d.removed;)d=d.previous},has:function(v){return!!c(this,v)}}),bv(i,t?{get:function(v){var l=c(this,v);return l&&l.value},set:function(v,l){return s(this,v===0?0:v,l)}}:{add:function(v){return s(this,v=v===0?0:v,v)}}),Jr&&xO(i,"size",{configurable:!0,get:function(){return o(this).size}}),a},setStrong:function(e,r,t){var n=r+" Iterator",a=vo(r),i=vo(n);NO(e,r,function(o,s){Ev(this,{type:n,target:o,state:a(o),kind:s,last:void 0})},function(){for(var o=i(this),s=o.kind,c=o.last;c&&c.removed;)c=c.previous;return!o.target||!(o.last=c=c?c.next:o.state.first)?(o.target=void 0,dn(void 0,!0)):dn(s==="keys"?c.key:s==="values"?c.value:[c.key,c.value],!1)},t?"entries":"values",!t,!0),MO(r)}},BO=_O,DO=UO;BO("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},DO);function FO(e){var r=document.createElement("div");r.id=e,r.className="tdw-widget";var t=new Map,n=function(){r.remove(),t.forEach(function(v){return v.destroy()}),t.clear()},a=function(v,l){t.set(v,l),r.appendChild(l.element)},i=function(v){var l=t.get(v);l&&(l.destroy(),t.delete(v))},o=function(){r.style.visibility="visible",r.style.pointerEvents="auto"},s=function(){r.style.visibility="hidden",r.style.pointerEvents="none"},c=function(){return!!document.getElementById(e)};return{element:r,append:a,remove:i,show:o,hide:s,isMounted:c,destroy:n}}function GO(){var e=document.createElement("div");e.className="tdw-widget-loading",e.id="tdw-widget-loading",e.ariaLabel="Loading",e.innerHTML=['<div class="tdw-widget-content">','<span class="tdw-loader"></span>',"</div>"].join("");var r=function(){e.remove()};return{element:e,destroy:r}}function HO(e){var r=document.createElement("iframe");r.title="Chat Widget",r.allowFullscreen=!0,r.style.display="none";var t=function(){r.style.display="block",e()};r.addEventListener("load",t);var n=function(){r.removeEventListener("load",t),r.remove()};return{element:r,destroy:n}}var zO="talkdesk-chat-widget",Ov="loading-element",WO="iframe-element",KO=function(){var r=Ce.getAllConfig(),t=r.touchpoint,n=r.appProps,a=n!=null&&n.proxyHost?"//".concat(n.proxyHost).concat(Ur.tdChatSdk):"",i=(t==null?void 0:t.release_version)||"",o=F1(i);return"".concat(a||"https://talkdeskchatsdk.talkdeskapp.com","/v2/widget/").concat(o?i:"latest","/index.html?touchpointId=").concat(n==null?void 0:n.touchpointId)},qO=function(){return"./widget/latest/preview.html"};function VO(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=FO(zO),a=HO(function(){n.remove(Ov)});n.append(Ov,GO()),n.hide(),t&&n.element.setAttribute("data-preview","");var i=function(){n.isMounted()||(e.appendChild(n.element),a.element.src=t?qO():KO(),n.append(WO,a),r&&a.element.contentWindow&&r(a.element.contentWindow))},o=function(){i()},s=function(d){var g=d.height;g&&(n.element.style.height=typeof g=="string"?g:"".concat(g,"px"))},c=function(){i(),n.show()},u=function(){n.hide()},v=function(){n.destroy()},l=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=d.enableResponsiveLayout,$=g===void 0?!1:g;$?n.element.setAttribute("data-responsive-layout","true"):n.element.removeAttribute("data-responsive-layout")};return{initInBackground:o,resize:s,open:c,close:u,destroy:v,update:l}}var YO=["enableResponsiveLayout","enableUserInput","enablePointMoveTriggerButton"];function XO(e,r){var t=document.getElementById(e);if(!t)throw new Error('The element not exist, element id = "#'.concat(e,'"'));var n=r.touchpointId||r.flowId;if(!n.trim())throw new Error("The td chat jssdk touchpointId or flowId no exist");if(!r.region)throw new Error("The td chat jssdk region not exist");Ce.setAppProps(N(N({},r),{},{touchpointId:n}));var a=[],i=null,o=!1,s=!1,c=null,u=null,v=null,l=to.empty(),f=to.empty(),d=to.empty(),g=E1({root:t}),$=N1(g.element,function(){w()}),m=VO(g.element,function(U){u=new D$({name:"SDK",sender:U,topic:Y.Topic,debug:!1}),u.register(Y.Methods.FrameReady,function(){if(!s){var O;s=!0,(O=c)===null||O===void 0||O(!0),$.open()}}),u.register(Y.Methods.FrameResize,function(O){m.resize(O)}),u.register(Y.Methods.Maximize,function(){w()}),u.register(Y.Methods.Minimize,function(){T()}),u.register(Y.Methods.GetAllConfig,function(){return Ce.getAllConfig()}),u.register(Y.Methods.GetCredentials,function(O){return Tw(N(N({},O),{},{app_id:n}))}),u.register(Y.Methods.ConversationStart,function(){no(d.current,function(O){console.error('An error occurred in "onConversationStart" callback.',O)})}),u.register(Y.Methods.SetBadge,function(O){$.setBadge(O)}),u.register(Y.Methods.GetTdAccessToken,function(){return Iw(n)}),u.register(Y.Methods.DownloadTranscript,function(){var O=q(R().mark(function k(oe){return R().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,h1(oe);case 2:return se.abrupt("return",!0);case 3:case"end":return se.stop()}},k)}));return function(k){return O.apply(this,arguments)}}())}),S=function(){var U=q(R().mark(function O(){var k,oe,gr,se,hn,He,ze,be,p,h,y,E=arguments;return R().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return k=E.length>0&&E[0]!==void 0?E[0]:{},oe=k.enableResponsiveLayout,gr=oe===void 0?!0:oe,se=k.enableUserInput,hn=se===void 0?!0:se,He=k.enablePointMoveTriggerButton,ze=He===void 0?!1:He,be=kv(k,YO),i||(i=Pw(n)),I.next=4,i;case 4:if(p=I.sent,p!=null&&p.active){I.next=7;break}return I.abrupt("return",!1);case 7:if(h=Ce.setAppConfig(N(N({},be),{},{enableResponsiveLayout:gr,enableUserInput:hn,enablePointMoveTriggerButton:ze,languageCode:(be==null?void 0:be.languageCode)||(r==null?void 0:r.languageCode)})),Ce.setTouchpoint(p),o){I.next=19;break}return o=!0,v=S1(g.element),a.push(b1(g.element)),m.update({enableResponsiveLayout:gr}),$.update({enablePointMoveTriggerButton:ze}),w1(g.element,h==null?void 0:h.styles,p),I.abrupt("return",new Promise(function(D){c=D,m.initInBackground()}));case 19:return I.next=21,(y=u)===null||y===void 0?void 0:y.trigger(Y.Methods.UpdateAppConfigs,{appConfig:h});case 21:return I.abrupt("return",!0);case 22:case"end":return I.stop()}},O)}));return function(){return U.apply(this,arguments)}}(),w=function(){var O;$.close(),m.open(),(O=u)===null||O===void 0||O.trigger(Y.Methods.FrameOpened),no(l.current,function(k){console.error('An error occurred in "onOpenWebchat" callback.',k)})},T=function(){m.close(),$.open(),no(f.current,function(O){console.error('An error occurred in "onCloseWebchat" callback.',O)})},x=function(){var O,k;$.destroy(),m.destroy(),g.destroy(),a.forEach(function(oe){return oe()}),a.length=0,(O=u)===null||O===void 0||O.destroy(),u=null,f.current=null,l.current=null,d.current=null,Ce.clearAll(),i=null,o=!1,s=!1,c=null,(k=v)===null||k===void 0||k(),v=null},fe=function(O){var k;Ce.setContextParam(O),(k=u)===null||k===void 0||k.trigger(Y.Methods.UpdateContext,O)};return{open:w,close:T,init:S,destroy:x,setContextParam:fe,set onOpenWebchat(U){l.current=U},set onCloseWebchat(U){f.current=U},set onConversationStart(U){d.current=U}}}function JO(e,r){return XO(e,r)}return JO});
