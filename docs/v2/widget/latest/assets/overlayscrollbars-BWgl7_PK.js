const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./browser-BYuZYzs8.js","./main-vendor-N2Dp62kv.js","./DefaultAgentAvatarIcon-BvykMufc.js","./DefaultAvatarIcon.module-C6JQAtkI.js","./DefaultAvatarIcon-Cv_biWpz.css","./DefaultAvatarIcon-lbn3a-tz.js","./Buttons-Br6owuiq.js","./reporter-vendor-BrFA8t6T.js","./Carousel-RQrLSTK8.js","./Carousel-BXmEestL.css","./TextMessage-BAIKRTjl.js","./TextMessage-Dy7sXIvH.css","./HtmlMessage-CTTQrchX.js","./HtmlMessage-BtRC1RYO.css","./MediaMessage-BVAtYfI2.js","./MediaMessage-CUjPzWYZ.css","./QuickReplyMessage-DYjPBLbV.js","./QuickReplyMessage-BXu2YnnQ.css","./Arrow-BIFPurkU.js","./Attachment-CWbnzsTA.js","./Close-pjcaxt8-.js","./Clear-CS4zU9u8.js","./Confirm-DDlQ6YZn.js","./Emoji-COfvhN7W.js","./Minimize-EBBEeR-0.js","./MoreVert-BE7Le2SD.js","./Retry-D2AhBxhY.js","./Send-t9sT8p0t.js","./Warning-D78NKuu6.js","./Logo-Csh_f_2t.js","./Download-CcRizf4t.js","./Terminate-Dz9_wd-I.js","./Refresh-ueDGeYgw.js","./emoji-picker-react.esm-BuoC0-mk.js"])))=>i.map(i=>d[i]);
var hf=Object.defineProperty;var mf=(t,e,n)=>e in t?hf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var de=(t,e,n)=>mf(t,typeof e!="symbol"?e+"":e,n);import{i as ir,d as gf,c as Ye,g as eo,E as yf,a as _r,e as Mn,s as Ic,p as Rc,r as T,j as f,f as jc,R as Ie,u as et,L as _f,h as vf,C as Ao,k as bf}from"./main-vendor-N2Dp62kv.js";import{O as wf,a as xf,R as Ci,S as Si,L as Cf,b as Sf,l as Tf,W as kf,c as Ef,Z as Af,t as Ti,d as hs,e as Lf}from"./reporter-vendor-BrFA8t6T.js";/*!
* Talkdesk Confidential
*
* Copyright (C) Talkdesk Inc. 2024
*
* The source code for this program is not published or otherwise divested
* of its trade secrets, irrespective of what has been deposited with the
* U.S. Copyright Office. Unauthorized copying of this file, via any medium
* is strictly prohibited.
*/(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const If="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Pc=(t=21)=>{let e="",n=crypto.getRandomValues(new Uint8Array(t));for(;t--;)e+=If[n[t]&63];return e};const Rf=72e6,Is={getAccessToken:"GET_ACCESS_TOKEN",getConversationAndParticipant:"CREATE_CONVERSATION_AND_PARTICIPANT"},ki={twilio:"twilio"},Ee={Start:"start",Loading:"loading",Conversation:"conversation",InitialScreen:"initial_screen",End:"end",Error:"error"},Ct={preloadClient:"preloadClient",conversationCreated:"conversationCreated",conversationEnded:"conversationEnded",conversationEndedByError:"conversationEndedByError",resetFrame:"resetFrame",enableScreenLoading:"enableScreenLoading"},jr={ltr:"ltr",rtl:"rtl"},jf=["sa-AR","eg-AR"],Pr={BUTTONS:10,CAROUSEL_CARDS:10,CAROUSEL_BUTTONS:3,FILE_SIZE:10*1024*1024},jS=2,Nc=680,PS=64,Pf=48,Nf=/^(?!.{256})(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,Bf=/^(\+\d{1,3}\s?)\(?\d{1,3}\)?[\s-]?\d{3,4}[\s-]?\d{3,5}/i,NS=5,Lo={US1:"us1",IE1:"ie1"},Ln={tdGatewayUs:"/tdgateway/us",tdGatewayEu:"/tdgateway/eu",tdGatewayCa:"/tdgateway/ca",tdGatewayUsFed:"/tdgateway/usfed",tdChatSdk:"/tdchatsdk",tdReporter:"/tdreporter",twilioUs1:"/tdsocketprovider/us1/v3/wsconnect",twilioIe1:"/tdsocketprovider/ie1/v3/wsconnect",twilioMcsUs1:"/tdmcsprovider/us1",twilioMcsIe1:"/tdmcsprovider/ie1",twilioMediaUs1:"/tdmediaprovider/us1",twilioMediaIe1:"/tdmediaprovider/ie1"},Bc=["botIcon","botIconVerticalAlign","chatIcon","chatTitleIcon","chatTitle","chatSubtitle","customFieldPhoneDescription","customFieldPhoneInvalidFormatMessage","customFieldEmailInvalidFormatMessage","customFieldInputPlaceholder","customDropdownInputPlaceholder","chatConfirmButtonEndChat","chatCancelButtonEndChat","chatDialogBoxEndChat","chatPlaceholder","chatAriaLabel","startChatButtonLabel","endedChatMessage","linkProtocol","linkTarget","chatDialogBoxRetryEndChat","chatConfirmButtonRetryEndChat","chatCancelButtonRetryEndChat"],Er={chatThemeColor:"#1f1f1f",chatHoverThemeColor:"#1f1f1f",chatContainerWidth:"360px",chatContainerHeight:"".concat(Nc,"px"),chatPositionBottom:"20px",chatPlaceholder:"Type a message...",chatAriaLabel:"Type a message",endedChatMessage:"This chat has ended",linkProtocol:"https",linkTarget:"_blank",chatLauncherColor:"#1f1f1f",chatHoverLauncherColor:"#1f1f1f",triggerButtonHeight:"64px",triggerButtonWidth:"64px",triggerButtonPositionBottom:"20px",triggerButtonPositionRight:"10px",chatTitle:"Talkdesk",chatTitleTextColor:"#1f1f1f",chatTitleIconColor:"#ffffff",chatTitleIcon:"https://prd-cdn-talkdesk.talkdesk.com/cdn-assets/latest/talkdesk/product/app-icons/sms.svg",chatTitleIconWidth:"32px",chatTitleIconHeight:"32px",chatIcon:"https://prd-cdn-talkdesk.talkdesk.com/cdn-assets/latest/talkdesk/product/app-icons/sms.svg",chatSubtitle:"Powered by Talkdesk",chatSubtitleTextColor:"#1f1f1f",chatCloseIconHeight:"20px",chatCloseIconWidth:"20px",chatCloseButtonColor:"#1f1f1f",chatHeaderBackgroundColor:"#f8f8f8",avatarBackgroundColor:"#1f1f1f",avatarForegroundColor:"#ffffff",avatarBorderColor:"#1f1f1f",botIcon:"",botIconHeight:"24px",botIconWidth:"24px",botIconVerticalAlign:"top",botTextColor:"#1f1f1f",botBackgroundColor:"#ffffff",botAnchorTextColor:"#1f1f1f",botAnchorTextColorVisited:"#1f1f1f",userTextColor:"#ffffff",userBackgroundColor:"#1f1f1f",userAnchorTextColor:"#ffffff",userAnchorTextColorVisited:"#ffffff",carouselTextColor:"#1f1f1f",buttonTextColor:"#1f1f1f",buttonBackgroundColor:"#f2f2f2",buttonHoverBackgroundColor:"#e9e9e9",replyTextColor:"#1f1f1f",replyBorderColor:"#1f1f1f",replyBackgroundColor:"#ffffff",replyHoverBackgroundColor:"#e9e9e9",startChatButtonLabel:"Let's start the chat!",startChatButtonTextColor:"#ffffff",startChatButtonBorderColor:"#1f1f1f",startChatButtonBackgroundColor:"#1f1f1f",startChatButtonHoverTextColor:"#ffffff",startChatButtonHoverBorderColor:"#2c2c2c",startChatButtonHoverBackgroundColor:"#2c2c2c",startChatTransparentButtonTextColor:"#1f1f1f",startChatTransparentButtonHoverBackgroundColor:"#f2f2f2",userInputSeparatorColor:"#dfdfdf",userInputHeight:"48px",initialFormBackgroundColor:"#f8f8f8",welcomeMessageBackgroundColor:"#f8f8f8",welcomeMessageTitleFontSize:"24px",welcomeMessageTitleFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",welcomeMessageTitleColor:"#1f1f1f",welcomeMessageContentFontSize:"14px",welcomeMessageContentFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",welcomeMessageContentColor:"#1f1f1f",customMessageFontSize:"14px",customMessageColor:"#1f1f1f",customMessageFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customMessageBackgroundColor:"#ffffff",customMessageNoBubbleFontSize:"14px",customMessageNoBubbleColor:"#1f1f1f",customMessageNoBubbleFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customFieldLabelFontSize:"14px",customFieldLabelFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customFieldLabelColor:"#595959",customFieldInputFontSize:"14px",customFieldInputFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customFieldInputColor:"#595959",customFieldInputBackgroundColor:"#ffffff",customFieldInputPlaceholder:"Type",customFieldPhoneDescription:"Include the country code, avoid spaces and/or symbols (e.g. +1123456789).",customFieldPhoneInvalidFormatMessage:"Please type a valid phone number",customFieldEmailInvalidFormatMessage:"Please type a valid email",customDropdownLabelFontSize:"14px",customDropdownLabelFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customDropdownLabelColor:"#595959",customDropdownInputFontSize:"14px",customDropdownInputFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customDropdownInputColor:"#595959",customDropdownInputBackgroundColor:"#ffffff",customDropdownInputPlaceholder:"Select",customButtonHeight:"32px",customButtonFontSize:"14px",customButtonFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",customButtonColor:"#ffffff",customButtonBorderColor:"#1f1f1f",customButtonBackgroundColor:"#1f1f1f",customButtonHoverColor:"#ffffff",customButtonHoverBorderColor:"#2c2c2c",customButtonHoverBackgroundColor:"#2c2c2c",chatConfirmButtonFontSize:"14px",chatConfirmButtonFontColor:"#ffffff",chatConfirmButtonFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",chatConfirmButtonBackgroundColor:"#1f1f1f",chatConfirmButtonHoverBackgroundColor:"#2c2c2c",chatConfirmButtonEndChat:"End chat",chatConfirmButtonRetryEndChat:"Try again",chatCancelButtonFontColor:"#1f1f1f",chatCancelButtonFontSize:"14px",chatCancelButtonFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",chatCancelButtonEndChat:"Cancel",chatCancelButtonRetryEndChat:"Dismiss",chatCancelButtonBackgroundColor:"transparent",chatCancelButtonHoverBackgroundColor:"#f2f2f2",chatDialogBoxIconColor:"#8c8c8c",chatDialogBoxFontFamily:"Inter,-apple-system,system-ui,avenir,helvetica,arial,sans-serif",chatDialogBoxFontSize:"16px",chatDialogBoxFontColor:"#1f1f1f",chatDialogBoxEndChat:"Are you sure you want to end this chat?",chatDialogBoxRetryEndChat:"There was an error while ending the chat."},cr={botIcon:"",botIconVerticalAlign:Er.botIconVerticalAlign,chatIcon:"",chatTitleIcon:"",chatTitle:Er.chatTitle,chatSubtitle:"",customFieldPhoneDescription:"",customFieldPhoneInvalidFormatMessage:"",customFieldEmailInvalidFormatMessage:"",customFieldInputPlaceholder:Er.customFieldInputPlaceholder,customDropdownInputPlaceholder:"",chatConfirmButtonEndChat:"",chatCancelButtonEndChat:"",chatDialogBoxEndChat:"",chatPlaceholder:"",chatAriaLabel:"",startChatButtonLabel:"",endedChatMessage:"",linkProtocol:Er.linkProtocol,linkTarget:Er.linkTarget,chatDialogBoxRetryEndChat:"",chatConfirmButtonRetryEndChat:"",chatCancelButtonRetryEndChat:""};function vt(t){return typeof t=="string"?t:t==null?void 0:t.message}function $f(t){const e=t.charCodeAt(0);return e>=65&&e<=90}function Ei(t){const e=[...t].map((n,r)=>$f(n)?r===0?n.toLowerCase():"-"+n.toLowerCase():n).join("");return"--".concat(e)}function Of(t,e){const n=Object.keys(e);return n.length?n.reduce((r,s)=>s.indexOf("-")>-1||s.indexOf("_")>-1?r:(t.style.setProperty(Ei(s),e[s]),{...r,[Ei(s)]:e[s]}),{}):{}}function Go(t,e){let n;if(typeof t=="string"?n=t.indexOf("#")>-1?document.querySelector(t):document.getElementById(t):n=t,n)return Of(n,e)}function Ve(t,e){try{return JSON.stringify(t)}catch(n){return""}}function $c(t,e,n){try{return JSON.parse(t)}catch(r){return n==null||n(r),e}}class Mf{constructor(e){de(this,"_status","pending");de(this,"_suspender");de(this,"_result");de(this,"_error");this._suspender=e.then(n=>{this._status="fulfilled",this._result=n}).catch(n=>{this._status="rejected",this._error=n})}get status(){return this._status}load(){if(this._status==="pending")throw this._suspender;if(this._status==="rejected")throw this._error;if(this._status==="fulfilled")return this._result;{const e=this._status;throw new Error('Status "'.concat(e,'" is not supported'))}}}function Df(t,e){const n=t.length;let r="";if(n<=0)return r;for(let s=0;s<n;s++){const{addedNodes:o}=t[s];o.forEach(a=>{var c;const i=((c=a==null?void 0:a.getAttribute)==null?void 0:c.call(a,e))||"";!r&&i&&(r=i)})}return r}function Oc(t){return new Promise(e=>{t<=0?e(!0):setTimeout(()=>e(!0),t)})}function Ff(t){return Math.min(2e3*t,3e4)}async function Ca(t,e={}){const{defaultRetry:n=5,retryDelay:r=Ff,onError:s}=e;if(n<=0)return await t();let o=0;const a=async()=>{try{return await t()}catch(i){if(s==null||s(i,o),o===n)throw i;return o+=1,await Oc(typeof r=="function"?r(o):r),await a()}};return a()}function Vf(t,e,n={}){const{mode:r=window.localStorage,onError:s}=n;try{return r.setItem(t,e),!0}catch(o){return s==null||s(o),!1}}function Hf(t,e={}){const{mode:n=window.localStorage,onError:r}=e;try{return n.removeItem(t),!0}catch(s){return r==null||r(s),!1}}const Fe={Topic:"WidgetCommunication",Methods:{Maximize:"Maximize",Minimize:"Minimize",GetAllConfig:"GetAllConfig",GetCredentials:"GetCredentials",GetTdAccessToken:"GetTdAccessToken",SetBadge:"SetBadge",FrameOpened:"FrameOpened",DownloadTranscript:"DownloadTranscript",UpdatePreviewConfig:"UpdatePreviewConfig",PreviewReady:"PreviewReady",ConversationStart:"ConversationStart",FrameReady:"FrameReady",FrameResize:"FrameResize",UpdateAppConfigs:"UpdateAppConfigs",UpdateContext:"UpdateContext",OnSend:"OnSend",UpdateMessage:"UpdateMessage",OnComposer:"OnComposer"}},Uf={Image:"image",Video:"video",Audio:"audio",File:"file"};class ln{constructor(){de(this,"enableSplitTwilioBootstrap");de(this,"participantName");de(this,"feedbackFlowId");de(this,"appearanceConfig",{initialScreen:{showInitialScreen:!1,welcomeMessage:{title:"",subtitle:""},controls:[]},chat:{messages:[]},generalSettings:{showCloseConversationButton:!1,showChatTranscriptsDownloadButton:!1,showTypingIndicatorButton:!1}});de(this,"appConfig",{enableEmoji:!0,enableAttachments:!0,enableValidation:!1,enableResponsiveLayout:!0,enablePointMoveTriggerButton:!1,enableUserInput:!0,languageCode:"en-US"});de(this,"appProps",{touchpointId:"",accountId:"",region:"td-us-1"});de(this,"options",{...cr});de(this,"styles",{});de(this,"context",{});de(this,"injectorWindowHostname","")}}const zf="modulepreload",Zf=function(t,e){return new URL(t,e).href},Ai={},xe=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),i=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.all(n.map(c=>{if(c=Zf(c,r),c in Ai)return;Ai[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!r)for(let y=o.length-1;y>=0;y--){const g=o[y];if(g.href===c&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(c,'"]').concat(u)))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":zf,l||(m.as="script",m.crossOrigin=""),m.href=c,i&&m.setAttribute("nonce",i),document.head.appendChild(m),l)return new Promise((y,g)=>{m.addEventListener("load",y),m.addEventListener("error",()=>g(new Error("Unable to preload CSS for ".concat(c))))})}))}return s.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function Wf(){const t="en-US";let e=t,n=!1,r=null,s=[];const o=(i="")=>{const c=i||navigator.language||t;return s.indexOf(c)>-1?c:s.find(u=>u.toLocaleLowerCase().indexOf(c.toLocaleLowerCase())>-1)||t},a=async(i="")=>(n=!0,r=(await xe(async()=>{const{default:c}=await import("./index-CGA_YNtO.js");return{default:c}},[],import.meta.url)).default,s=Object.keys(r),e=o(i),await ir.use(gf).init({lng:e,fallbackLng:t,resources:r,keySeparator:!1,supportedLngs:s,interpolation:{escapeValue:!1},react:{useSuspense:!1}}),e);return{changeLanguage:async(i="")=>n?(i===e||(e=o(i),await ir.changeLanguage(e)),e):await a(i),get current(){return e}}}const Rs=Wf(),qo={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]};function Yo(t,e,n,r=!1){const s=String(e),o=(c,l)=>"\x1B[".concat(l[0],"m").concat(c,"\x1B[").concat(l[1],"m"),a=(c,l)=>l!=null&&typeof l=="string"?o(c,qo[l]):l!=null&&Array.isArray(l)?l.reduce((u,p)=>a(u,p),c):l!=null&&l[c.trim()]!=null?a(c,l[c.trim()]):l!=null&&l["*"]!=null?a(c,l["*"]):c,i=null;return s.replace(/{{(.+?)}}/g,(c,l)=>{var p,m;const u=n[l]!=null?String(n[l]):r?"":c;return t.stylePrettyLogs?a(u,(m=(p=t==null?void 0:t.prettyLogStyles)==null?void 0:p[l])!=null?m:i)+o("",qo.reset):u})}function mt(t,e=2,n=0){return t!=null&&isNaN(t)?"":(t=t!=null?t+n:t,e===2?t==null?"--":t<10?"0"+t:t.toString():t==null?"---":t<10?"00"+t:t<100?"0"+t:t.toString())}function Gf(t){return{href:t.href,protocol:t.protocol,username:t.username,password:t.password,host:t.host,hostname:t.hostname,port:t.port,pathname:t.pathname,search:t.search,searchParams:[...t.searchParams].map(([e,n])=>({key:e,value:n})),hash:t.hash,origin:t.origin}}function Mc(t){const e=new Set;return JSON.stringify(t,(n,r)=>{if(typeof r=="object"&&r!==null){if(e.has(r))return"[Circular]";e.add(r)}return typeof r=="bigint"?"".concat(r):r})}function qe(t,e){const n={seen:[],stylize:Dc};return e!=null&&Uc(n,e),Qn(n.showHidden)&&(n.showHidden=!1),Qn(n.depth)&&(n.depth=2),Qn(n.colors)&&(n.colors=!0),Qn(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Yf),js(n,t,n.depth)}qe.colors=qo;qe.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function qf(t){return typeof t=="boolean"}function Qn(t){return t===void 0}function Dc(t){return t}function Yf(t,e){var r,s,o,a;const n=qe.styles[e];return n!=null&&((s=(r=qe==null?void 0:qe.colors)==null?void 0:r[n])==null?void 0:s[0])!=null&&((a=(o=qe==null?void 0:qe.colors)==null?void 0:o[n])==null?void 0:a[1])!=null?"\x1B["+qe.colors[n][0]+"m"+t+"\x1B["+qe.colors[n][1]+"m":t}function ms(t){return typeof t=="function"}function Fc(t){return typeof t=="string"}function Kf(t){return typeof t=="number"}function Vc(t){return t===null}function Hc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Io(t){return to(t)&&Sa(t)==="[object RegExp]"}function to(t){return typeof t=="object"&&t!==null}function Ro(t){return to(t)&&(Sa(t)==="[object Error]"||t instanceof Error)}function Li(t){return to(t)&&Sa(t)==="[object Date]"}function Sa(t){return Object.prototype.toString.call(t)}function Jf(t){const e={};return t.forEach(n=>{e[n]=!0}),e}function Xf(t,e,n,r,s){const o=[];for(let a=0,i=e.length;a<i;++a)Hc(e,String(a))?o.push(Ko(t,e,n,r,String(a),!0)):o.push("");return s.forEach(a=>{a.match(/^\d+$/)||o.push(Ko(t,e,n,r,a,!0))}),o}function jo(t){return"["+Error.prototype.toString.call(t)+"]"}function js(t,e,n=0){if(t.customInspect&&e!=null&&ms(e)&&(e==null?void 0:e.inspect)!==qe&&!(e!=null&&e.constructor&&(e==null?void 0:e.constructor.prototype)===e)){if(typeof e.inspect!="function"&&e.toString!=null)return e.toString();let u=e==null?void 0:e.inspect(n,t);return Fc(u)||(u=js(t,u,n)),u}const r=cn(t,e);if(r)return r;let s=Object.keys(e);const o=Jf(s);try{t.showHidden&&Object.getOwnPropertyNames&&(s=Object.getOwnPropertyNames(e))}catch(u){}if(Ro(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return jo(e);if(s.length===0)if(ms(t.stylize)){if(ms(e)){const u=e.name?": "+e.name:"";return t.stylize("[Function"+u+"]","special")}if(Io(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(Li(e))return t.stylize(Date.prototype.toISOString.call(e),"date");if(Ro(e))return jo(e)}else return e;let a="",i=!1,c=["{\n","\n}"];if(Array.isArray(e)&&(i=!0,c=["[\n","\n]"]),ms(e)&&(a=" [Function"+(e.name?": "+e.name:"")+"]"),Io(e)&&(a=" "+RegExp.prototype.toString.call(e)),Li(e)&&(a=" "+Date.prototype.toUTCString.call(e)),Ro(e)&&(a=" "+jo(e)),s.length===0&&(!i||e.length==0))return c[0]+a+c[1];if(n<0)return Io(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);let l;return i?l=Xf(t,e,n,o,s):l=s.map(u=>Ko(t,e,n,o,u,i)),t.seen.pop(),Qf(l,a,c)}function Ko(t,e,n,r,s,o){let a,i,c={value:void 0};try{c.value=e[s]}catch(l){}try{Object.getOwnPropertyDescriptor&&(c=Object.getOwnPropertyDescriptor(e,s)||c)}catch(l){}if(c.get?c.set?i=t.stylize("[Getter/Setter]","special"):i=t.stylize("[Getter]","special"):c.set&&(i=t.stylize("[Setter]","special")),Hc(r,s)||(a="["+s+"]"),i||(t.seen.indexOf(c.value)<0?(Vc(n)?i=js(t,c.value,void 0):i=js(t,c.value,n-1),i.indexOf("\n")>-1&&(o?i=i.split("\n").map(l=>"  "+l).join("\n").substr(2):i="\n"+i.split("\n").map(l=>"   "+l).join("\n"))):i=t.stylize("[Circular]","special")),Qn(a)){if(o&&s.match(/^\d+$/))return i;a=JSON.stringify(""+s),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,"\\'").replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+i}function cn(t,e){if(Qn(e))return t.stylize("undefined","undefined");if(Fc(e)){const n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,"\\'")+"'";return t.stylize(n,"string")}if(Kf(e))return t.stylize(""+e,"number");if(qf(e))return t.stylize(""+e,"boolean");if(Vc(e))return t.stylize("null","null")}function Qf(t,e,n){return n[0]+(e===""?"":e+"\n")+"  "+t.join(",\n  ")+" "+n[1]}function Uc(t,e){const n={...t};if(!e||!to(e))return t;const r={...e},s=Object.keys(e);let o=s.length;for(;o--;)n[s[o]]=r[s[o]];return n}function ep(t,...e){const n={seen:[],stylize:Dc};t!=null&&Uc(n,t);const r=e[0];let s=0,o="",a="";if(typeof r=="string"){if(e.length===1)return r;let i,c=0;for(let l=0;l<r.length-1;l++)if(r.charCodeAt(l)===37){const u=r.charCodeAt(++l);if(s+1!==e.length){switch(u){case 115:{const p=e[++s];typeof p=="number"||typeof p=="bigint"?i=cn(n,p):typeof p!="object"||p===null?i=String(p):i=qe(p,{...t,compact:3,colors:!1,depth:0});break}case 106:i=Mc(e[++s]);break;case 100:{const p=e[++s];typeof p=="bigint"?i=cn(n,p):typeof p=="symbol"?i="NaN":i=cn(n,p);break}case 79:i=qe(e[++s],t);break;case 111:i=qe(e[++s],{...t,showHidden:!0,showProxy:!0,depth:4});break;case 105:{const p=e[++s];typeof p=="bigint"?i=cn(n,p):typeof p=="symbol"?i="NaN":i=cn(n,parseInt(i));break}case 102:{const p=e[++s];typeof p=="symbol"?i="NaN":i=cn(n,parseInt(p));break}case 99:s+=1,i="";break;case 37:o+=r.slice(c,l),c=l+1;continue;default:continue}c!==l-1&&(o+=r.slice(c,l-1)),o+=i,c=l+1}else u===37&&(o+=r.slice(c,l),c=l+1)}c!==0&&(s++,a=" ",c<r.length&&(o+=r.slice(c)))}for(;s<e.length;){const i=e[s];o+=a,o+=typeof i!="string"?qe(i,t):i,a=" ",s++}return o}const tp={getCallerStackFrame:zc,getErrorTrace:Zc,getMeta:sp,transportJSON:ip,transportFormatted:ap,isBuffer:cp,isError:Gc,prettyFormatLogObj:op,prettyFormatErrorObj:qc};var Lc;const np={runtime:[typeof window,typeof document].includes("undefined")?"Generic":"Browser",browser:(Lc=globalThis==null?void 0:globalThis.navigator)==null?void 0:Lc.userAgent},rp=/(?:(?:file|https?|global code|[^@]+)@)?(?:file:)?((?:\/[^:/]+){2,})(?::(\d+))?(?::(\d+))?/;function sp(t,e,n,r,s,o){return Object.assign({},np,{name:s,parentNames:o,date:new Date,logLevelId:t,logLevelName:e,path:r?void 0:zc(n)})}function zc(t,e=Error()){var n,r,s;return Wc((s=(r=(n=e==null?void 0:e.stack)==null?void 0:n.split("\n"))==null?void 0:r.filter(o=>!o.includes("Error: ")))==null?void 0:s[t])}function Zc(t){var e,n,r,s;return(s=(r=(n=(e=t==null?void 0:t.stack)==null?void 0:e.split("\n"))!=null?n:[])==null?void 0:r.filter(o=>!o.includes("Error: ")))==null?void 0:s.reduce((o,a)=>(o.push(Wc(a)),o),[])}function Wc(t){var r;const e=(r=globalThis==null?void 0:globalThis.location)==null?void 0:r.origin,n={fullFilePath:void 0,fileName:void 0,fileNameWithLine:void 0,fileColumn:void 0,fileLine:void 0,filePath:void 0,filePathWithLine:void 0,method:void 0};if(t!=null){const s=t.match(rp);if(s){n.filePath=s[1].replace(/\?.*$/,""),n.fullFilePath="".concat(e).concat(n.filePath);const o=n.filePath.split("/");n.fileName=o[o.length-1],n.fileLine=s[2],n.fileColumn=s[3],n.filePathWithLine="".concat(n.filePath,":").concat(n.fileLine),n.fileNameWithLine="".concat(n.fileName,":").concat(n.fileLine)}}return n}function Gc(t){return t instanceof Error}function op(t,e){return t.reduce((n,r)=>(Gc(r)?n.errors.push(qc(r,e)):n.args.push(r),n),{args:[],errors:[]})}function qc(t,e){const n=Zc(t).map(s=>Yo(e,e.prettyErrorStackTemplate,{...s},!0)),r={errorName:" ".concat(t.name," "),errorMessage:Object.getOwnPropertyNames(t).reduce((s,o)=>(o!=="stack"&&s.push(t[o]),s),[]).join(", "),errorStack:n.join("\n")};return Yo(e,e.prettyErrorTemplate,r)}function ap(t,e,n,r){const s=(n.length>0&&e.length>0?"\n":"")+n.join("\n");r.prettyInspectOptions.colors=r.stylePrettyLogs,console.log(t+ep(r.prettyInspectOptions,...e)+s)}function ip(t){console.log(Mc(t))}function cp(t){return!1}class lp{constructor(e,n,r=4){var s,o,a,i,c,l,u,p,m,y,g,v,w,C,I,_,S,L,x,B,M,H,N,E,z,K;this.logObj=n,this.stackDepthLevel=r,this.runtime=tp,this.settings={type:(s=e==null?void 0:e.type)!=null?s:"pretty",name:e==null?void 0:e.name,parentNames:e==null?void 0:e.parentNames,minLevel:(o=e==null?void 0:e.minLevel)!=null?o:0,argumentsArrayName:e==null?void 0:e.argumentsArrayName,hideLogPositionForProduction:(a=e==null?void 0:e.hideLogPositionForProduction)!=null?a:!1,prettyLogTemplate:(i=e==null?void 0:e.prettyLogTemplate)!=null?i:"{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}	{{logLevelName}}	{{filePathWithLine}}{{nameWithDelimiterPrefix}}	",prettyErrorTemplate:(c=e==null?void 0:e.prettyErrorTemplate)!=null?c:"\n{{errorName}} {{errorMessage}}\nerror stack:\n{{errorStack}}",prettyErrorStackTemplate:(l=e==null?void 0:e.prettyErrorStackTemplate)!=null?l:"  â€¢ {{fileName}}	{{method}}\n	{{filePathWithLine}}",prettyErrorParentNamesSeparator:(u=e==null?void 0:e.prettyErrorParentNamesSeparator)!=null?u:":",prettyErrorLoggerNameDelimiter:(p=e==null?void 0:e.prettyErrorLoggerNameDelimiter)!=null?p:"	",stylePrettyLogs:(m=e==null?void 0:e.stylePrettyLogs)!=null?m:!0,prettyLogTimeZone:(y=e==null?void 0:e.prettyLogTimeZone)!=null?y:"UTC",prettyLogStyles:(g=e==null?void 0:e.prettyLogStyles)!=null?g:{logLevelName:{"*":["bold","black","bgWhiteBright","dim"],SILLY:["bold","white"],TRACE:["bold","whiteBright"],DEBUG:["bold","green"],INFO:["bold","blue"],WARN:["bold","yellow"],ERROR:["bold","red"],FATAL:["bold","redBright"]},dateIsoStr:"white",filePathWithLine:"white",name:["white","bold"],nameWithDelimiterPrefix:["white","bold"],nameWithDelimiterSuffix:["white","bold"],errorName:["bold","bgRedBright","whiteBright"],fileName:["yellow"],fileNameWithLine:"white"},prettyInspectOptions:(v=e==null?void 0:e.prettyInspectOptions)!=null?v:{colors:!0,compact:!1,depth:1/0},metaProperty:(w=e==null?void 0:e.metaProperty)!=null?w:"_meta",maskPlaceholder:(C=e==null?void 0:e.maskPlaceholder)!=null?C:"[***]",maskValuesOfKeys:(I=e==null?void 0:e.maskValuesOfKeys)!=null?I:["password"],maskValuesOfKeysCaseInsensitive:(_=e==null?void 0:e.maskValuesOfKeysCaseInsensitive)!=null?_:!1,maskValuesRegEx:e==null?void 0:e.maskValuesRegEx,prefix:[...(S=e==null?void 0:e.prefix)!=null?S:[]],attachedTransports:[...(L=e==null?void 0:e.attachedTransports)!=null?L:[]],overwrite:{mask:(x=e==null?void 0:e.overwrite)==null?void 0:x.mask,toLogObj:(B=e==null?void 0:e.overwrite)==null?void 0:B.toLogObj,addMeta:(M=e==null?void 0:e.overwrite)==null?void 0:M.addMeta,addPlaceholders:(H=e==null?void 0:e.overwrite)==null?void 0:H.addPlaceholders,formatMeta:(N=e==null?void 0:e.overwrite)==null?void 0:N.formatMeta,formatLogObj:(E=e==null?void 0:e.overwrite)==null?void 0:E.formatLogObj,transportFormatted:(z=e==null?void 0:e.overwrite)==null?void 0:z.transportFormatted,transportJSON:(K=e==null?void 0:e.overwrite)==null?void 0:K.transportJSON}}}log(e,n,...r){var p,m,y,g,v,w,C,I,_,S,L,x,B,M;if(e<this.settings.minLevel)return;const s=[...this.settings.prefix,...r],o=((p=this.settings.overwrite)==null?void 0:p.mask)!=null?(m=this.settings.overwrite)==null?void 0:m.mask(s):this.settings.maskValuesOfKeys!=null&&this.settings.maskValuesOfKeys.length>0?this._mask(s):s,a=this.logObj!=null?this._recursiveCloneAndExecuteFunctions(this.logObj):void 0,i=((y=this.settings.overwrite)==null?void 0:y.toLogObj)!=null?(g=this.settings.overwrite)==null?void 0:g.toLogObj(o,a):this._toLogObj(o,a),c=((v=this.settings.overwrite)==null?void 0:v.addMeta)!=null?(w=this.settings.overwrite)==null?void 0:w.addMeta(i,e,n):this._addMetaToLogObj(i,e,n);let l,u;return((C=this.settings.overwrite)==null?void 0:C.formatMeta)!=null&&(l=(I=this.settings.overwrite)==null?void 0:I.formatMeta(c==null?void 0:c[this.settings.metaProperty])),((_=this.settings.overwrite)==null?void 0:_.formatLogObj)!=null&&(u=(S=this.settings.overwrite)==null?void 0:S.formatLogObj(o,this.settings)),this.settings.type==="pretty"&&(l=l!=null?l:this._prettyFormatLogObjMeta(c==null?void 0:c[this.settings.metaProperty]),u=u!=null?u:this.runtime.prettyFormatLogObj(o,this.settings)),l!=null&&u!=null?((L=this.settings.overwrite)==null?void 0:L.transportFormatted)!=null?(x=this.settings.overwrite)==null||x.transportFormatted(l,u.args,u.errors,this.settings):this.runtime.transportFormatted(l,u.args,u.errors,this.settings):((B=this.settings.overwrite)==null?void 0:B.transportJSON)!=null?(M=this.settings.overwrite)==null||M.transportJSON(c):this.settings.type!=="hidden"&&this.runtime.transportJSON(c),this.settings.attachedTransports!=null&&this.settings.attachedTransports.length>0&&this.settings.attachedTransports.forEach(H=>{H(c)}),c}attachTransport(e){this.settings.attachedTransports.push(e)}getSubLogger(e,n){var o,a,i,c;const r={...this.settings,...e,parentNames:((o=this.settings)==null?void 0:o.parentNames)!=null&&((a=this.settings)==null?void 0:a.name)!=null?[...this.settings.parentNames,this.settings.name]:((i=this.settings)==null?void 0:i.name)!=null?[this.settings.name]:void 0,prefix:[...this.settings.prefix,...(c=e==null?void 0:e.prefix)!=null?c:[]]};return new this.constructor(r,n!=null?n:this.logObj,this.stackDepthLevel)}_mask(e){const n=this.settings.maskValuesOfKeysCaseInsensitive!==!0?this.settings.maskValuesOfKeys:this.settings.maskValuesOfKeys.map(r=>r.toLowerCase());return e==null?void 0:e.map(r=>this._recursiveCloneAndMaskValuesOfKeys(r,n))}_recursiveCloneAndMaskValuesOfKeys(e,n,r=[]){var s,o;if(r.includes(e))return{...e};if(typeof e=="object"&&e!==null&&r.push(e),this.runtime.isError(e)||this.runtime.isBuffer(e))return e;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(Array.isArray(e))return e.map(a=>this._recursiveCloneAndMaskValuesOfKeys(a,n,r));if(e instanceof Date)return new Date(e.getTime());if(e instanceof URL)return Gf(e);if(e!==null&&typeof e=="object"){const a=this.runtime.isError(e)?this._cloneError(e):Object.create(Object.getPrototypeOf(e));return Object.getOwnPropertyNames(e).reduce((i,c)=>{var l;return i[c]=n.includes(((l=this.settings)==null?void 0:l.maskValuesOfKeysCaseInsensitive)!==!0?c:c.toLowerCase())?this.settings.maskPlaceholder:(()=>{try{return this._recursiveCloneAndMaskValuesOfKeys(e[c],n,r)}catch(u){return null}})(),i},a)}else{if(typeof e=="string"){let a=e;for(const i of((s=this.settings)==null?void 0:s.maskValuesRegEx)||[])a=a.replace(i,((o=this.settings)==null?void 0:o.maskPlaceholder)||"");return a}return e}}_recursiveCloneAndExecuteFunctions(e,n=[]){return this.isObjectOrArray(e)&&n.includes(e)?this.shallowCopy(e):(this.isObjectOrArray(e)&&n.push(e),Array.isArray(e)?e.map(r=>this._recursiveCloneAndExecuteFunctions(r,n)):e instanceof Date?new Date(e.getTime()):this.isObject(e)?Object.getOwnPropertyNames(e).reduce((r,s)=>{const o=Object.getOwnPropertyDescriptor(e,s);if(o){Object.defineProperty(r,s,o);const a=e[s];r[s]=typeof a=="function"?a():this._recursiveCloneAndExecuteFunctions(a,n)}return r},Object.create(Object.getPrototypeOf(e))):e)}isObjectOrArray(e){return typeof e=="object"&&e!==null}isObject(e){return typeof e=="object"&&!Array.isArray(e)&&e!==null}shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}_toLogObj(e,n={}){return e=e==null?void 0:e.map(r=>this.runtime.isError(r)?this._toErrorObject(r):r),this.settings.argumentsArrayName==null?e.length===1&&!Array.isArray(e[0])&&this.runtime.isBuffer(e[0])!==!0&&!(e[0]instanceof Date)?n=typeof e[0]=="object"&&e[0]!=null?{...e[0],...n}:{0:e[0],...n}:n={...n,...e}:n={...n,[this.settings.argumentsArrayName]:e},n}_cloneError(e){const n=new e.constructor;return Object.getOwnPropertyNames(e).forEach(r=>{n[r]=e[r]}),n}_toErrorObject(e){var n;return{nativeError:e,name:(n=e.name)!=null?n:"Error",message:e.message,stack:this.runtime.getErrorTrace(e)}}_addMetaToLogObj(e,n,r){return{...e,[this.settings.metaProperty]:this.runtime.getMeta(n,r,this.stackDepthLevel,this.settings.hideLogPositionForProduction,this.settings.name,this.settings.parentNames)}}_prettyFormatLogObjMeta(e){var a,i,c,l,u,p,m,y,g,v,w,C,I,_,S,L,x,B,M,H,N,E,z,K,ee,ie,ae;if(e==null)return"";let n=this.settings.prettyLogTemplate;const r={};n.includes("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}")?n=n.replace("{{yyyy}}.{{mm}}.{{dd}} {{hh}}:{{MM}}:{{ss}}:{{ms}}","{{dateIsoStr}}"):this.settings.prettyLogTimeZone==="UTC"?(r.yyyy=(i=(a=e==null?void 0:e.date)==null?void 0:a.getUTCFullYear())!=null?i:"----",r.mm=mt((c=e==null?void 0:e.date)==null?void 0:c.getUTCMonth(),2,1),r.dd=mt((l=e==null?void 0:e.date)==null?void 0:l.getUTCDate(),2),r.hh=mt((u=e==null?void 0:e.date)==null?void 0:u.getUTCHours(),2),r.MM=mt((p=e==null?void 0:e.date)==null?void 0:p.getUTCMinutes(),2),r.ss=mt((m=e==null?void 0:e.date)==null?void 0:m.getUTCSeconds(),2),r.ms=mt((y=e==null?void 0:e.date)==null?void 0:y.getUTCMilliseconds(),3)):(r.yyyy=(v=(g=e==null?void 0:e.date)==null?void 0:g.getFullYear())!=null?v:"----",r.mm=mt((w=e==null?void 0:e.date)==null?void 0:w.getMonth(),2,1),r.dd=mt((C=e==null?void 0:e.date)==null?void 0:C.getDate(),2),r.hh=mt((I=e==null?void 0:e.date)==null?void 0:I.getHours(),2),r.MM=mt((_=e==null?void 0:e.date)==null?void 0:_.getMinutes(),2),r.ss=mt((S=e==null?void 0:e.date)==null?void 0:S.getSeconds(),2),r.ms=mt((L=e==null?void 0:e.date)==null?void 0:L.getMilliseconds(),3));const s=this.settings.prettyLogTimeZone==="UTC"?e==null?void 0:e.date:new Date(((x=e==null?void 0:e.date)==null?void 0:x.getTime())-((B=e==null?void 0:e.date)==null?void 0:B.getTimezoneOffset())*6e4);r.rawIsoStr=s==null?void 0:s.toISOString(),r.dateIsoStr=s==null?void 0:s.toISOString().replace("T"," ").replace("Z",""),r.logLevelName=e==null?void 0:e.logLevelName,r.fileNameWithLine=(H=(M=e==null?void 0:e.path)==null?void 0:M.fileNameWithLine)!=null?H:"",r.filePathWithLine=(E=(N=e==null?void 0:e.path)==null?void 0:N.filePathWithLine)!=null?E:"",r.fullFilePath=(K=(z=e==null?void 0:e.path)==null?void 0:z.fullFilePath)!=null?K:"";let o=(ee=this.settings.parentNames)==null?void 0:ee.join(this.settings.prettyErrorParentNamesSeparator);return o=o!=null&&(e==null?void 0:e.name)!=null?o+this.settings.prettyErrorParentNamesSeparator:void 0,r.name=(e==null?void 0:e.name)!=null||o!=null?(o!=null?o:"")+(e==null?void 0:e.name):"",r.nameWithDelimiterPrefix=r.name.length>0?this.settings.prettyErrorLoggerNameDelimiter+r.name:"",r.nameWithDelimiterSuffix=r.name.length>0?r.name+this.settings.prettyErrorLoggerNameDelimiter:"",((ie=this.settings.overwrite)==null?void 0:ie.addPlaceholders)!=null&&((ae=this.settings.overwrite)==null||ae.addPlaceholders(e,r)),Yo(this.settings,n,r)}}class dp extends lp{constructor(e,n){const r=typeof window<"u"&&typeof document<"u",s=r?window.chrome!==void 0&&window.CSS!==void 0&&window.CSS.supports("color","green"):!1,o=r?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1;e=e||{},e.stylePrettyLogs=e.stylePrettyLogs&&r&&!s?!1:e.stylePrettyLogs,super(e,n,o?4:5)}log(e,n,...r){return super.log(e,n,...r)}silly(...e){return super.log(0,"SILLY",...e)}trace(...e){return super.log(1,"TRACE",...e)}debug(...e){return super.log(2,"DEBUG",...e)}info(...e){return super.log(3,"INFO",...e)}warn(...e){return super.log(4,"WARN",...e)}error(...e){return super.log(5,"ERROR",...e)}fatal(...e){return super.log(6,"FATAL",...e)}getSubLogger(e,n){return super.getSubLogger(e,n)}}const up={BASE_URL:"./",DEV:!1,LEGACY:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL_TD_CA_1:"https://api.talkdeskappca.com",VITE_BASE_URL_TD_EU_1:"https://api.talkdeskapp.eu",VITE_BASE_URL_TD_US_1:"https://api.talkdeskapp.com",VITE_BASE_URL_TD_US_FED_1:"https://api.talkdeskapp-pubsec.com",VITE_CDN_BASE:"https://talkdeskchatsdk.talkdeskapp.com",VITE_DYNATRACE_ACCESS_TOKEN:"ZHQwYzAxLjZZNlpIQllBTE1JWlhBUDdTU1hBRFhZUi5SSEZPTVU3VUhFSkpHVUdUWVJHM0JFWDZEM0tQU0RXNldSVTRCNlJSVlpLR0xLMkhNMjVVRlNOQzVRTkhPQ0FH",VITE_DYNATRACE_API_URL:"https://wyv31614.live.dynatrace.com/api/v2/otlp",VITE_DYNATRACE_OTEL_SERVICE_NAME:"webchat-sdk-ui-v2",VITE_STAGE:"prd"},{VITE_DYNATRACE_API_URL:Ii,VITE_DYNATRACE_ACCESS_TOKEN:fp,VITE_DYNATRACE_OTEL_SERVICE_NAME:gs}=up,pp=t=>{try{return window.atob(t)}catch(e){return console.warn("Failed to parse provider reporter api key",e),t}},Ri=pp(fp);class Lr{constructor({context:e,proxyUrl:n}){de(this,"logger");de(this,"tracer");const r=this.createExporter(n),s=this.createTraceExporter(n);this.logger=this.createLogger(r,e),this.tracer=this.createTracer(s,e)}createExporter(e){return new wf({url:"".concat(e||Ii,"/v1/logs"),headers:{Authorization:"Api-Token ".concat(Ri)}})}createTraceExporter(e){return new xf({url:"".concat(e||Ii,"/v1/traces"),headers:{Authorization:"Api-Token ".concat(Ri)}})}createLogger(e,n){if(!e)return;const r=new Ci({[Si]:gs,...n}),s=new Cf({resource:r});s.addLogRecordProcessor(new Sf(e)),Tf.setGlobalLoggerProvider(s);const o=s.getLogger(gs);return(a,{severityNumber:i,severityText:c,...l})=>{o.emit({body:a,severityNumber:i,severityText:c,attributes:l})}}createTracer(e,n){if(!e)return;const r=new Ci({[Si]:gs,...n}),s=new kf({resource:r});return s.addSpanProcessor(new Ef(e)),s.register({contextManager:new Af}),Ti.setGlobalTracerProvider(s),s.getTracer(gs)}debug(e,n={}){var r;(r=this.escapeLogger)==null||r.call(this,e,{...n,severityNumber:hs.DEBUG,severityText:"DEBUG"})}info(e,n={}){var r;(r=this.escapeLogger)==null||r.call(this,e,{...n,severityNumber:hs.INFO,severityText:"INFO"})}error(e,n={}){var r;(r=this.escapeLogger)==null||r.call(this,e,{...n,severityNumber:hs.ERROR,severityText:"ERROR","otel.status_code":"ERROR"})}warn(e,n={}){var r;(r=this.escapeLogger)==null||r.call(this,e,{...n,severityNumber:hs.WARN,severityText:"WARN"})}startSpan(e,n={}){var s;const r=(s=this.tracer)==null?void 0:s.startSpan(e);return r?(r.setAttributes({...n,startAt:new Date().toISOString()}),r):null}startChildSpan(e,n,r={}){var a;if(!n)return null;const s=Ti.setSpan(Lf.active(),n),o=(a=this.tracer)==null?void 0:a.startSpan(e,{},s);return o?(o.setAttributes({...r,startAt:new Date().toISOString()}),o):null}get escapeLogger(){if(!this.logger){console.error("Can not reach to the dynatrace logger!");return}return this.logger}}de(Lr,"instance");function hp({context:t,proxyUrl:e}){return Lr.instance||(Lr.instance=new Lr({context:t,proxyUrl:e})),Lr.instance}function mp(t){let e,n=!1;function r(){return{documentVisibilityState:document.visibilityState,identity:k.getState().identity,roomId:k.getState().credentials.roomId,providerRegion:k.getState().credentials.region,maximize:k.getState().isFrameOpened?"on":"off",lang:Rs.current,browserLang:window.navigator.language}}function s(c){const{_meta:l,...u}=c,p=l,m=(p==null?void 0:p.name)||"unknown logger name",y=p.date.toISOString(),g=p.logLevelName,v=[m];if(u)try{Object.values(u).forEach(w=>{if(!(w instanceof Function||w instanceof RegExp))if(typeof w=="object")if(w!=null&&w.nativeError){const C=w;v.push("".concat((C==null?void 0:C.name)||"Error",": ").concat((C==null?void 0:C.message)||""))}else v.push(Ve(w));else v.push(String(w))})}catch(w){const C=w;v.push("Error formatTsLog payload",Ve(u),"".concat((C==null?void 0:C.name)||"Error",": ").concat((C==null?void 0:C.message)||""))}return{logLevelId:p.logLevelId,logLevelName:g,logDate:y,log:v.join(" | ")}}function o(c,l){var p,m,y;const u={talkdeskWidgetHref:window.location.href,talkdeskAccountId:(p=c==null?void 0:c.touchpoint)==null?void 0:p.account_id,talkdeskTouchpointId:(m=c==null?void 0:c.appProps)==null?void 0:m.touchpointId,talkdeskRegion:(y=c==null?void 0:c.appProps)==null?void 0:y.region,injectorWindowHref:c==null?void 0:c.injectorWindowHref,environment:"prd",userAgent:window.navigator.userAgent};n=/localhost/gi.test(u.injectorWindowHref||""),e=hp({context:u,proxyUrl:l})}function a({log:c,logLevelName:l,logDate:u}){var p;if(e){const m=l.toLocaleLowerCase();n||(p=e[m])==null||p.call(e,c,{logDate:u,...r()})}return c}return{init:c=>{var u,p;const l=(u=c==null?void 0:c.appProps)!=null&&u.proxyHost?"//".concat((p=c==null?void 0:c.appProps)==null?void 0:p.proxyHost).concat(Ln.tdReporter):"";switch(t){case"dynatrace":o(c,l);break}},run:(c,l)=>{const u=c._meta;if((u==null?void 0:u.logLevelId)>=l){const p=s(c);switch(t){case"dynatrace":return a(p);default:return null}}},startSpan:c=>{var l;return n?null:(l=e.startSpan)==null?void 0:l.call(e,c,r())},startChildSpan:(c,l)=>{var u;return n?null:(u=e.startChildSpan)==null?void 0:u.call(e,c,l,r())}}}const er=mp("dynatrace"),gp={SILLY:0,TRACE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,FATAL:6},ji=gp.INFO,Pi=(t,e)=>e!=null&&e.name?"".concat(e.name,":").concat(t):t;class yp extends dp{constructor(e,n){super(e,n)}startSpan(e){return er.startSpan(e)}startChildSpan(e,n){return er.startChildSpan(e,n)}getSubLogger(e,n){const r=super.getSubLogger(e,n);return r.startSpan=s=>er.startSpan(Pi(s,e)),r.startChildSpan=(s,o)=>er.startChildSpan(Pi(s,e),o),r}}const ut=new yp({type:"hidden",name:"Widget",minLevel:ji,prettyLogTemplate:"{{dateIsoStr}} [{{logLevelName}}] {{name}} ",attachedTransports:[t=>er.run(t,ji)]});var _p=200,Ta="__lodash_hash_undefined__",vp=1/0,Yc=9007199254740991,bp="[object Arguments]",wp="[object Function]",xp="[object GeneratorFunction]",Cp="[object Symbol]",Sp=/[\\^$.*+?()[\]{}|]/g,Tp=/^\[object .+?Constructor\]$/,kp=/^(?:0|[1-9]\d*)$/,Ep=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,Ap=typeof self=="object"&&self&&self.Object===Object&&self,ka=Ep||Ap||Function("return this")();function Lp(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Ip(t,e){var n=t?t.length:0;return!!n&&Pp(t,e,0)>-1}function Rp(t,e){for(var n=-1,r=t?t.length:0,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}function Ea(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}function jp(t,e,n,r){for(var s=t.length,o=n+-1;++o<s;)if(e(t[o],o,t))return o;return-1}function Pp(t,e,n){if(e!==e)return jp(t,Np,n);for(var r=n-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}function Np(t){return t!==t}function Bp(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function $p(t,e){return t.has(e)}function Op(t,e){return t==null?void 0:t[e]}function Mp(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch(n){}return e}function Kc(t,e){return function(n){return t(e(n))}}var Dp=Array.prototype,Fp=Function.prototype,no=Object.prototype,Po=ka["__core-js_shared__"],Ni=function(){var t=/[^.]+$/.exec(Po&&Po.keys&&Po.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Jc=Fp.toString,Xr=no.hasOwnProperty,Aa=no.toString,Vp=RegExp("^"+Jc.call(Xr).replace(Sp,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bi=ka.Symbol,Hp=Kc(Object.getPrototypeOf,Object),Up=no.propertyIsEnumerable,zp=Dp.splice,$i=Bi?Bi.isConcatSpreadable:void 0,Jo=Object.getOwnPropertySymbols,Oi=Math.max,Zp=Xc(ka,"Map"),Nr=Xc(Object,"create");function Nn(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wp(){this.__data__=Nr?Nr(null):{}}function Gp(t){return this.has(t)&&delete this.__data__[t]}function qp(t){var e=this.__data__;if(Nr){var n=e[t];return n===Ta?void 0:n}return Xr.call(e,t)?e[t]:void 0}function Yp(t){var e=this.__data__;return Nr?e[t]!==void 0:Xr.call(e,t)}function Kp(t,e){var n=this.__data__;return n[t]=Nr&&e===void 0?Ta:e,this}Nn.prototype.clear=Wp;Nn.prototype.delete=Gp;Nn.prototype.get=qp;Nn.prototype.has=Yp;Nn.prototype.set=Kp;function vr(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Jp(){this.__data__=[]}function Xp(t){var e=this.__data__,n=ro(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():zp.call(e,n,1),!0}function Qp(t){var e=this.__data__,n=ro(e,t);return n<0?void 0:e[n][1]}function eh(t){return ro(this.__data__,t)>-1}function th(t,e){var n=this.__data__,r=ro(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}vr.prototype.clear=Jp;vr.prototype.delete=Xp;vr.prototype.get=Qp;vr.prototype.has=eh;vr.prototype.set=th;function br(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nh(){this.__data__={hash:new Nn,map:new(Zp||vr),string:new Nn}}function rh(t){return so(this,t).delete(t)}function sh(t){return so(this,t).get(t)}function oh(t){return so(this,t).has(t)}function ah(t,e){return so(this,t).set(t,e),this}br.prototype.clear=nh;br.prototype.delete=rh;br.prototype.get=sh;br.prototype.has=oh;br.prototype.set=ah;function Ps(t){var e=-1,n=t?t.length:0;for(this.__data__=new br;++e<n;)this.add(t[e])}function ih(t){return this.__data__.set(t,Ta),this}function ch(t){return this.__data__.has(t)}Ps.prototype.add=Ps.prototype.push=ih;Ps.prototype.has=ch;function lh(t,e){var n=La(t)||Qc(t)?Bp(t.length,String):[],r=n.length,s=!!r;for(var o in t)s&&(o=="length"||xh(o,r))||n.push(o);return n}function ro(t,e){for(var n=t.length;n--;)if(Lh(t[n][0],e))return n;return-1}function dh(t,e,n,r){var s=-1,o=Ip,a=!0,i=t.length,c=[],l=e.length;if(!i)return c;e.length>=_p&&(o=$p,a=!1,e=new Ps(e));e:for(;++s<i;){var u=t[s],p=u;if(u=u!==0?u:0,a&&p===p){for(var m=l;m--;)if(e[m]===p)continue e;c.push(u)}else o(e,p,r)||c.push(u)}return c}function uh(t,e,n,r,s){var o=-1,a=t.length;for(n||(n=wh),s||(s=[]);++o<a;){var i=t[o];n(i)?Ea(s,i):s[s.length]=i}return s}function fh(t,e,n){var r=e(t);return La(t)?r:Ea(r,n(t))}function ph(t){if(!Ia(t)||Sh(t))return!1;var e=tl(t)||Mp(t)?Vp:Tp;return e.test(Ah(t))}function hh(t){if(!Ia(t))return kh(t);var e=Th(t),n=[];for(var r in t)r=="constructor"&&(e||!Xr.call(t,r))||n.push(r);return n}function mh(t,e){return t=Object(t),gh(t,e,function(n,r){return r in t})}function gh(t,e,n){for(var r=-1,s=e.length,o={};++r<s;){var a=e[r],i=t[a];n(i,a)&&(o[a]=i)}return o}function yh(t,e){return e=Oi(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=Oi(n.length-e,0),o=Array(s);++r<s;)o[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=o,Lp(t,this,a)}}function _h(t){return fh(t,Ph,bh)}function so(t,e){var n=t.__data__;return Ch(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Xc(t,e){var n=Op(t,e);return ph(n)?n:void 0}var vh=Jo?Kc(Jo,Object):rl,bh=Jo?function(t){for(var e=[];t;)Ea(e,vh(t)),t=Hp(t);return e}:rl;function wh(t){return La(t)||Qc(t)||!!($i&&t&&t[$i])}function xh(t,e){return e=e==null?Yc:e,!!e&&(typeof t=="number"||kp.test(t))&&t>-1&&t%1==0&&t<e}function Ch(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Sh(t){return!!Ni&&Ni in t}function Th(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||no;return t===n}function kh(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}function Eh(t){if(typeof t=="string"||jh(t))return t;var e=t+"";return e=="0"&&1/t==-vp?"-0":e}function Ah(t){if(t!=null){try{return Jc.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Lh(t,e){return t===e||t!==t&&e!==e}function Qc(t){return Ih(t)&&Xr.call(t,"callee")&&(!Up.call(t,"callee")||Aa.call(t)==bp)}var La=Array.isArray;function el(t){return t!=null&&Rh(t.length)&&!tl(t)}function Ih(t){return nl(t)&&el(t)}function tl(t){var e=Ia(t)?Aa.call(t):"";return e==wp||e==xp}function Rh(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Yc}function Ia(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function nl(t){return!!t&&typeof t=="object"}function jh(t){return typeof t=="symbol"||nl(t)&&Aa.call(t)==Cp}function Ph(t){return el(t)?lh(t):hh(t)}var Nh=yh(function(t,e){return t==null?{}:(e=Rp(uh(e),Eh),mh(t,dh(_h(t),e)))});function rl(){return[]}var Bh=Nh;const Ns=eo(Bh);var $h=1/0,Oh=9007199254740991,Mh="[object Arguments]",Dh="[object Function]",Fh="[object GeneratorFunction]",Vh="[object Symbol]",Hh=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,Uh=typeof self=="object"&&self&&self.Object===Object&&self,zh=Hh||Uh||Function("return this")();function Zh(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Wh(t,e){for(var n=-1,r=t?t.length:0,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}function Gh(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Ra=Object.prototype,qh=Ra.hasOwnProperty,ja=Ra.toString,Mi=zh.Symbol,Yh=Ra.propertyIsEnumerable,Di=Mi?Mi.isConcatSpreadable:void 0,Fi=Math.max;function Kh(t,e,n,r,s){var o=-1,a=t.length;for(n||(n=em),s||(s=[]);++o<a;){var i=t[o];n(i)?Gh(s,i):s[s.length]=i}return s}function Jh(t,e){return t=Object(t),Xh(t,e,function(n,r){return r in t})}function Xh(t,e,n){for(var r=-1,s=e.length,o={};++r<s;){var a=e[r],i=t[a];n(i,a)&&(o[a]=i)}return o}function Qh(t,e){return e=Fi(e===void 0?t.length-1:e,0),function(){for(var n=arguments,r=-1,s=Fi(n.length-e,0),o=Array(s);++r<s;)o[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=o,Zh(t,this,a)}}function em(t){return rm(t)||nm(t)||!!(Di&&t&&t[Di])}function tm(t){if(typeof t=="string"||lm(t))return t;var e=t+"";return e=="0"&&1/t==-$h?"-0":e}function nm(t){return om(t)&&qh.call(t,"callee")&&(!Yh.call(t,"callee")||ja.call(t)==Mh)}var rm=Array.isArray;function sm(t){return t!=null&&im(t.length)&&!am(t)}function om(t){return sl(t)&&sm(t)}function am(t){var e=cm(t)?ja.call(t):"";return e==Dh||e==Fh}function im(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Oh}function cm(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function sl(t){return!!t&&typeof t=="object"}function lm(t){return typeof t=="symbol"||sl(t)&&ja.call(t)==Vh}var dm=Qh(function(t,e){return t==null?{}:Jh(t,Wh(Kh(e),tm))}),um=dm;const fm=eo(um);var Bs={exports:{}};Bs.exports;(function(t,e){var n=200,r="Expected a function",s="__lodash_hash_undefined__",o=1,a=2,i=1/0,c=9007199254740991,l="[object Arguments]",u="[object Array]",p="[object Boolean]",m="[object Date]",y="[object Error]",g="[object Function]",v="[object GeneratorFunction]",w="[object Map]",C="[object Number]",I="[object Object]",_="[object Promise]",S="[object RegExp]",L="[object Set]",x="[object String]",B="[object Symbol]",M="[object WeakMap]",H="[object ArrayBuffer]",N="[object DataView]",E="[object Float32Array]",z="[object Float64Array]",K="[object Int8Array]",ee="[object Int16Array]",ie="[object Int32Array]",ae="[object Uint8Array]",fe="[object Uint8ClampedArray]",me="[object Uint16Array]",le="[object Uint32Array]",Se=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O=/^\w*$/,D=/^\./,U=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Z=/[\\^$.*+?()[\]{}|]/g,j=/\\(\\)?/g,q=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,$={};$[E]=$[z]=$[K]=$[ee]=$[ie]=$[ae]=$[fe]=$[me]=$[le]=!0,$[l]=$[u]=$[H]=$[p]=$[N]=$[m]=$[y]=$[g]=$[w]=$[C]=$[I]=$[S]=$[L]=$[x]=$[M]=!1;var se=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,ge=typeof self=="object"&&self&&self.Object===Object&&self,ye=se||ge||Function("return this")(),we=e&&!e.nodeType&&e,Be=we&&!0&&t&&!t.nodeType&&t,te=Be&&Be.exports===we,$e=te&&se.process,ze=function(){try{return $e&&$e.binding("util")}catch(d){}}(),Re=ze&&ze.isTypedArray;function Oe(d,h){for(var b=-1,P=h.length,ne=d.length;++b<P;)d[ne+b]=h[b];return d}function Te(d,h){for(var b=-1,P=d?d.length:0;++b<P;)if(h(d[b],b,d))return!0;return!1}function je(d){return function(h){return h==null?void 0:h[d]}}function be(d,h){for(var b=-1,P=Array(d);++b<d;)P[b]=h(b);return P}function Ce(d){return function(h){return d(h)}}function Pe(d,h){return d==null?void 0:d[h]}function Ue(d){var h=!1;if(d!=null&&typeof d.toString!="function")try{h=!!(d+"")}catch(b){}return h}function bn(d){var h=-1,b=Array(d.size);return d.forEach(function(P,ne){b[++h]=[ne,P]}),b}function Xt(d,h){return function(b){return d(h(b))}}function Dn(d){var h=-1,b=Array(d.size);return d.forEach(function(P){b[++h]=P}),b}var Fn=Array.prototype,Vt=Function.prototype,xt=Object.prototype,wn=ye["__core-js_shared__"],Vn=function(){var d=/[^.]+$/.exec(wn&&wn.keys&&wn.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Hn=Vt.toString,nt=xt.hasOwnProperty,Ze=xt.toString,Cr=RegExp("^"+Hn.call(nt).replace(Z,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qt=ye.Symbol,en=ye.Uint8Array,At=Xt(Object.getPrototypeOf,Object),Un=xt.propertyIsEnumerable,xn=Fn.splice,Sr=Object.getOwnPropertySymbols,vo=Xt(Object.keys,Object),zn=qn(ye,"DataView"),Cn=qn(ye,"Map"),Tr=qn(ye,"Promise"),Zn=qn(ye,"Set"),tn=qn(ye,"WeakMap"),Lt=qn(Object,"create"),Wn=Tn(zn),Gn=Tn(Cn),bo=Tn(Tr),ss=Tn(Zn),lu=Tn(tn),os=Qt?Qt.prototype:void 0,wo=os?os.valueOf:void 0,li=os?os.toString:void 0;function Sn(d){var h=-1,b=d?d.length:0;for(this.clear();++h<b;){var P=d[h];this.set(P[0],P[1])}}function du(){this.__data__=Lt?Lt(null):{}}function uu(d){return this.has(d)&&delete this.__data__[d]}function fu(d){var h=this.__data__;if(Lt){var b=h[d];return b===s?void 0:b}return nt.call(h,d)?h[d]:void 0}function pu(d){var h=this.__data__;return Lt?h[d]!==void 0:nt.call(h,d)}function hu(d,h){var b=this.__data__;return b[d]=Lt&&h===void 0?s:h,this}Sn.prototype.clear=du,Sn.prototype.delete=uu,Sn.prototype.get=fu,Sn.prototype.has=pu,Sn.prototype.set=hu;function Ht(d){var h=-1,b=d?d.length:0;for(this.clear();++h<b;){var P=d[h];this.set(P[0],P[1])}}function mu(){this.__data__=[]}function gu(d){var h=this.__data__,b=is(h,d);if(b<0)return!1;var P=h.length-1;return b==P?h.pop():xn.call(h,b,1),!0}function yu(d){var h=this.__data__,b=is(h,d);return b<0?void 0:h[b][1]}function _u(d){return is(this.__data__,d)>-1}function vu(d,h){var b=this.__data__,P=is(b,d);return P<0?b.push([d,h]):b[P][1]=h,this}Ht.prototype.clear=mu,Ht.prototype.delete=gu,Ht.prototype.get=yu,Ht.prototype.has=_u,Ht.prototype.set=vu;function Ut(d){var h=-1,b=d?d.length:0;for(this.clear();++h<b;){var P=d[h];this.set(P[0],P[1])}}function bu(){this.__data__={hash:new Sn,map:new(Cn||Ht),string:new Sn}}function wu(d){return cs(this,d).delete(d)}function xu(d){return cs(this,d).get(d)}function Cu(d){return cs(this,d).has(d)}function Su(d,h){return cs(this,d).set(d,h),this}Ut.prototype.clear=bu,Ut.prototype.delete=wu,Ut.prototype.get=xu,Ut.prototype.has=Cu,Ut.prototype.set=Su;function as(d){var h=-1,b=d?d.length:0;for(this.__data__=new Ut;++h<b;)this.add(d[h])}function Tu(d){return this.__data__.set(d,s),this}function ku(d){return this.__data__.has(d)}as.prototype.add=as.prototype.push=Tu,as.prototype.has=ku;function zt(d){this.__data__=new Ht(d)}function Eu(){this.__data__=new Ht}function Au(d){return this.__data__.delete(d)}function Lu(d){return this.__data__.get(d)}function Iu(d){return this.__data__.has(d)}function Ru(d,h){var b=this.__data__;if(b instanceof Ht){var P=b.__data__;if(!Cn||P.length<n-1)return P.push([d,h]),this;b=this.__data__=new Ut(P)}return b.set(d,h),this}zt.prototype.clear=Eu,zt.prototype.delete=Au,zt.prototype.get=Lu,zt.prototype.has=Iu,zt.prototype.set=Ru;function di(d,h){var b=rn(d)||vi(d)?be(d.length,String):[],P=b.length,ne=!!P;for(var Y in d)(h||nt.call(d,Y))&&!(ne&&(Y=="length"||hi(Y,P)))&&b.push(Y);return b}function is(d,h){for(var b=d.length;b--;)if(_i(d[b][0],h))return b;return-1}function ui(d,h){h=ls(h,d)?[h]:fi(h);for(var b=0,P=h.length;d!=null&&b<P;)d=d[ds(h[b++])];return b&&b==P?d:void 0}function ju(d,h,b){var P=h(d);return rn(d)?P:Oe(P,b(d))}function Pu(d){return Ze.call(d)}function Nu(d,h){return d!=null&&h in Object(d)}function xo(d,h,b,P,ne){return d===h?!0:d==null||h==null||!kr(d)&&!us(h)?d!==d&&h!==h:Bu(d,h,xo,b,P,ne)}function Bu(d,h,b,P,ne,Y){var ce=rn(d),Me=rn(h),De=u,Ge=u;ce||(De=nn(d),De=De==l?I:De),Me||(Ge=nn(h),Ge=Ge==l?I:Ge);var rt=De==I&&!Ue(d),st=Ge==I&&!Ue(h),Je=De==Ge;if(Je&&!rt)return Y||(Y=new zt),ce||of(d)?pi(d,h,b,P,ne,Y):Gu(d,h,De,b,P,ne,Y);if(!(ne&a)){var pt=rt&&nt.call(d,"__wrapped__"),ht=st&&nt.call(h,"__wrapped__");if(pt||ht){var sn=pt?d.value():d,Zt=ht?h.value():h;return Y||(Y=new zt),b(sn,Zt,P,ne,Y)}}return Je?(Y||(Y=new zt),qu(d,h,b,P,ne,Y)):!1}function $u(d,h,b,P){var ne=b.length,Y=ne;if(d==null)return!Y;for(d=Object(d);ne--;){var ce=b[ne];if(ce[2]?ce[1]!==d[ce[0]]:!(ce[0]in d))return!1}for(;++ne<Y;){ce=b[ne];var Me=ce[0],De=d[Me],Ge=ce[1];if(ce[2]){if(De===void 0&&!(Me in d))return!1}else{var rt=new zt,st;if(!(st===void 0?xo(Ge,De,P,o|a,rt):st))return!1}}return!0}function Ou(d){if(!kr(d)||tf(d))return!1;var h=bi(d)||Ue(d)?Cr:q;return h.test(Tn(d))}function Mu(d){return us(d)&&To(d.length)&&!!$[Ze.call(d)]}function Du(d){return typeof d=="function"?d:d==null?ff:typeof d=="object"?rn(d)?Uu(d[0],d[1]):Hu(d):pf(d)}function Fu(d){if(!mi(d))return vo(d);var h=[];for(var b in Object(d))nt.call(d,b)&&b!="constructor"&&h.push(b);return h}function Vu(d){if(!kr(d))return nf(d);var h=mi(d),b=[];for(var P in d)P=="constructor"&&(h||!nt.call(d,P))||b.push(P);return b}function Hu(d){var h=Ku(d);return h.length==1&&h[0][2]?yi(h[0][0],h[0][1]):function(b){return b===d||$u(b,d,h)}}function Uu(d,h){return ls(d)&&gi(h)?yi(ds(d),h):function(b){var P=cf(b,d);return P===void 0&&P===h?lf(b,d):xo(h,P,void 0,o|a)}}function zu(d,h,b){for(var P=-1,ne=h.length,Y={};++P<ne;){var ce=h[P],Me=d[ce];b(Me,ce)&&(Y[ce]=Me)}return Y}function Zu(d){return function(h){return ui(h,d)}}function Wu(d){if(typeof d=="string")return d;if(ko(d))return li?li.call(d):"";var h=d+"";return h=="0"&&1/d==-i?"-0":h}function fi(d){return rn(d)?d:rf(d)}function pi(d,h,b,P,ne,Y){var ce=ne&a,Me=d.length,De=h.length;if(Me!=De&&!(ce&&De>Me))return!1;var Ge=Y.get(d);if(Ge&&Y.get(h))return Ge==h;var rt=-1,st=!0,Je=ne&o?new as:void 0;for(Y.set(d,h),Y.set(h,d);++rt<Me;){var pt=d[rt],ht=h[rt];if(P)var sn=ce?P(ht,pt,rt,h,d,Y):P(pt,ht,rt,d,h,Y);if(sn!==void 0){if(sn)continue;st=!1;break}if(Je){if(!Te(h,function(Zt,kn){if(!Je.has(kn)&&(pt===Zt||b(pt,Zt,P,ne,Y)))return Je.add(kn)})){st=!1;break}}else if(!(pt===ht||b(pt,ht,P,ne,Y))){st=!1;break}}return Y.delete(d),Y.delete(h),st}function Gu(d,h,b,P,ne,Y,ce){switch(b){case N:if(d.byteLength!=h.byteLength||d.byteOffset!=h.byteOffset)return!1;d=d.buffer,h=h.buffer;case H:return!(d.byteLength!=h.byteLength||!P(new en(d),new en(h)));case p:case m:case C:return _i(+d,+h);case y:return d.name==h.name&&d.message==h.message;case S:case x:return d==h+"";case w:var Me=bn;case L:var De=Y&a;if(Me||(Me=Dn),d.size!=h.size&&!De)return!1;var Ge=ce.get(d);if(Ge)return Ge==h;Y|=o,ce.set(d,h);var rt=pi(Me(d),Me(h),P,ne,Y,ce);return ce.delete(d),rt;case B:if(wo)return wo.call(d)==wo.call(h)}return!1}function qu(d,h,b,P,ne,Y){var ce=ne&a,Me=Eo(d),De=Me.length,Ge=Eo(h),rt=Ge.length;if(De!=rt&&!ce)return!1;for(var st=De;st--;){var Je=Me[st];if(!(ce?Je in h:nt.call(h,Je)))return!1}var pt=Y.get(d);if(pt&&Y.get(h))return pt==h;var ht=!0;Y.set(d,h),Y.set(h,d);for(var sn=ce;++st<De;){Je=Me[st];var Zt=d[Je],kn=h[Je];if(P)var xi=ce?P(kn,Zt,Je,h,d,Y):P(Zt,kn,Je,d,h,Y);if(!(xi===void 0?Zt===kn||b(Zt,kn,P,ne,Y):xi)){ht=!1;break}sn||(sn=Je=="constructor")}if(ht&&!sn){var fs=d.constructor,ps=h.constructor;fs!=ps&&"constructor"in d&&"constructor"in h&&!(typeof fs=="function"&&fs instanceof fs&&typeof ps=="function"&&ps instanceof ps)&&(ht=!1)}return Y.delete(d),Y.delete(h),ht}function Yu(d){return ju(d,df,Xu)}function cs(d,h){var b=d.__data__;return ef(h)?b[typeof h=="string"?"string":"hash"]:b.map}function Ku(d){for(var h=Eo(d),b=h.length;b--;){var P=h[b],ne=d[P];h[b]=[P,ne,gi(ne)]}return h}function qn(d,h){var b=Pe(d,h);return Ou(b)?b:void 0}var Ju=Sr?Xt(Sr,Object):wi,Xu=Sr?function(d){for(var h=[];d;)Oe(h,Ju(d)),d=At(d);return h}:wi,nn=Pu;(zn&&nn(new zn(new ArrayBuffer(1)))!=N||Cn&&nn(new Cn)!=w||Tr&&nn(Tr.resolve())!=_||Zn&&nn(new Zn)!=L||tn&&nn(new tn)!=M)&&(nn=function(d){var h=Ze.call(d),b=h==I?d.constructor:void 0,P=b?Tn(b):void 0;if(P)switch(P){case Wn:return N;case Gn:return w;case bo:return _;case ss:return L;case lu:return M}return h});function Qu(d,h,b){h=ls(h,d)?[h]:fi(h);for(var P,ne=-1,ce=h.length;++ne<ce;){var Y=ds(h[ne]);if(!(P=d!=null&&b(d,Y)))break;d=d[Y]}if(P)return P;var ce=d?d.length:0;return!!ce&&To(ce)&&hi(Y,ce)&&(rn(d)||vi(d))}function hi(d,h){return h=h==null?c:h,!!h&&(typeof d=="number"||W.test(d))&&d>-1&&d%1==0&&d<h}function ls(d,h){if(rn(d))return!1;var b=typeof d;return b=="number"||b=="symbol"||b=="boolean"||d==null||ko(d)?!0:O.test(d)||!Se.test(d)||h!=null&&d in Object(h)}function ef(d){var h=typeof d;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?d!=="__proto__":d===null}function tf(d){return!!Vn&&Vn in d}function mi(d){var h=d&&d.constructor,b=typeof h=="function"&&h.prototype||xt;return d===b}function gi(d){return d===d&&!kr(d)}function yi(d,h){return function(b){return b==null?!1:b[d]===h&&(h!==void 0||d in Object(b))}}function nf(d){var h=[];if(d!=null)for(var b in Object(d))h.push(b);return h}var rf=Co(function(d){d=af(d);var h=[];return D.test(d)&&h.push(""),d.replace(U,function(b,P,ne,Y){h.push(ne?Y.replace(j,"$1"):P||b)}),h});function ds(d){if(typeof d=="string"||ko(d))return d;var h=d+"";return h=="0"&&1/d==-i?"-0":h}function Tn(d){if(d!=null){try{return Hn.call(d)}catch(h){}try{return d+""}catch(h){}}return""}function Co(d,h){if(typeof d!="function"||h&&typeof h!="function")throw new TypeError(r);var b=function(){var P=arguments,ne=h?h.apply(this,P):P[0],Y=b.cache;if(Y.has(ne))return Y.get(ne);var ce=d.apply(this,P);return b.cache=Y.set(ne,ce),ce};return b.cache=new(Co.Cache||Ut),b}Co.Cache=Ut;function _i(d,h){return d===h||d!==d&&h!==h}function vi(d){return sf(d)&&nt.call(d,"callee")&&(!Un.call(d,"callee")||Ze.call(d)==l)}var rn=Array.isArray;function So(d){return d!=null&&To(d.length)&&!bi(d)}function sf(d){return us(d)&&So(d)}function bi(d){var h=kr(d)?Ze.call(d):"";return h==g||h==v}function To(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=c}function kr(d){var h=typeof d;return!!d&&(h=="object"||h=="function")}function us(d){return!!d&&typeof d=="object"}function ko(d){return typeof d=="symbol"||us(d)&&Ze.call(d)==B}var of=Re?Ce(Re):Mu;function af(d){return d==null?"":Wu(d)}function cf(d,h,b){var P=d==null?void 0:ui(d,h);return P===void 0?b:P}function lf(d,h){return d!=null&&Qu(d,h,Nu)}function Eo(d){return So(d)?di(d):Fu(d)}function df(d){return So(d)?di(d,!0):Vu(d)}function uf(d,h){return d==null?{}:zu(d,Yu(d),Du(h))}function ff(d){return d}function pf(d){return ls(d)?je(ds(d)):Zu(d)}function wi(){return[]}t.exports=uf})(Bs,Bs.exports);var pm=Bs.exports;const hm=eo(pm);function $s(t){return t?Ns(t,Bc):{}}function Xo(t){return t?fm(t,Bc):{}}function ol(t,e){let n={};if(t!=null&&t.theme){const{brandColor:r,headerTextColor:s,headerBgColor:o,welcomeBgColor:a,welcomeTextColor:i,initialFormBgColor:c,agentBubbleColor:l,agentTextColor:u,customerBubbleColor:p,customerTextColor:m,buttonColors:{primary:{textColor:y,backgroundColor:g,hoverBackgroundColor:v},secondary:{textColor:w,backgroundColor:C,hoverBackgroundColor:I},outLine:{textColor:_,borderColor:S,backgroundColor:L,hoverBackgroundColor:x},transparent:{textColor:B=_,hoverBackgroundColor:M=x}={}}}=t.theme;n={chatThemeColor:r,chatHoverThemeColor:r,chatHeaderBackgroundColor:o,chatTitleTextColor:s,chatSubtitleTextColor:s,chatCloseButtonColor:s,chatTitleIconColor:y,welcomeMessageBackgroundColor:a,welcomeMessageTitleColor:i,welcomeMessageContentColor:i,initialFormBackgroundColor:c,botTextColor:u,botBackgroundColor:l,botAnchorTextColor:u,botAnchorTextColorVisited:u,userTextColor:m,userBackgroundColor:p,userAnchorTextColor:m,userAnchorTextColorVisited:m,customButtonBackgroundColor:g,customButtonColor:y,customButtonBorderColor:g,customButtonHoverBackgroundColor:v,customButtonHoverColor:y,customButtonHoverBorderColor:v,startChatButtonTextColor:y,startChatButtonBorderColor:g,startChatButtonBackgroundColor:g,startChatButtonHoverTextColor:y,startChatButtonHoverBorderColor:v,startChatButtonHoverBackgroundColor:v,startChatTransparentButtonTextColor:B,startChatTransparentButtonHoverBackgroundColor:M,replyTextColor:_,replyBorderColor:S,replyBackgroundColor:L,replyHoverBackgroundColor:x,buttonTextColor:w,buttonBackgroundColor:C,buttonHoverBackgroundColor:I,chatConfirmButtonFontColor:y,chatConfirmButtonBackgroundColor:g,chatConfirmButtonHoverBackgroundColor:v}}return t!=null&&t.logoUrl&&(n={...n,chatTitleIcon:"url(".concat(t.logoUrl,")")}),e&&(n={...n,...e},e.chatTitleIcon&&(n={...n,chatTitleIcon:"url(".concat(e.chatTitleIcon,")")})),n}function Vi(t){return t?hm({chatTitleIcon:t.logoUrl,chatTitle:t.title,chatSubtitle:t.description},e=>!!e):{}}var Os=function(){return Os=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Os.apply(this,arguments)};function Hi(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function i(u){try{l(r.next(u))}catch(p){a(p)}}function c(u){try{l(r.throw(u))}catch(p){a(p)}}function l(u){u.done?o(u.value):s(u.value).then(i,c)}l((r=r.apply(t,[])).next())})}function Ui(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,a;return a={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function i(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(n=0)),n;)try{if(r=1,s&&(o=l[0]&2?s.return:l[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,l[1])).done)return o;switch(s=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,s=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],s=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var al=function(){function t(e){this.options=e,this._traceId=0,this._methods=new Map,this._emitter=new yf,this._handlerOnMessageByBound=this.handlerOnMessage.bind(this),this.createService(),this.getListener().addEventListener("message",this._handlerOnMessageByBound,!1)}return t.jsonParseData=function(e,n){try{return JSON.parse(e)}catch(r){return n}},t.jsonStringifyData=function(e){try{return JSON.stringify(e)}catch(n){return""}},t.runHandler=function(e){return Hi(this,void 0,void 0,function(){var n,r;return Ui(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,e()];case 1:return n=s.sent(),[2,{data:n,error:null}];case 2:return r=s.sent(),[2,{error:typeof r=="string"?r:r.message}];case 3:return[2]}})})},t.prototype.destroy=function(){this._emitter.removeAllListeners(),this._methods.clear(),this.getListener().removeEventListener("message",this._handlerOnMessageByBound,!1)},t.prototype.register=function(e,n){this._methods.set(e,n),this.log("Register ".concat(e),this._methods)},t.prototype.unregister=function(e){this._methods.delete(e),this.log("Unregister ".concat(e),this._methods)},t.prototype.trigger=function(e){for(var n=this,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];return new Promise(function(o){var a=n.createId();n.sendMessage({id:a,method:e,payload:r,type:"request"}),n.log("Trigger ".concat(e," | ").concat(a),r),n._emitter.once("response_".concat(a),function(i){o(i.payload),n.log("Receive ".concat(e," | ").concat(a),t.jsonStringifyData(i))})})},t.prototype.createId=function(){return"".concat(this.options.name,"_").concat(this._traceId++)},t.prototype.createService=function(){var e=this;this._emitter.on(this.options.topic,function(n){return Hi(e,void 0,void 0,function(){var r,s,o,a,i;return Ui(this,function(c){switch(c.label){case 0:return r=n.id,s=n.payload,o=n.method,a=this._methods.get(o),a?[4,t.runHandler(function(){return a.apply(void 0,s)})]:[3,2];case 1:return i=c.sent(),this.sendMessage({id:r,method:o,payload:i,type:"response"}),[3,3];case 2:this.sendMessage({id:r,method:o,payload:{error:"No found method in service"},type:"response"}),c.label=3;case 3:return[2]}})})})},t.prototype.sendMessage=function(e){var n=this.options,r=n.sender,s=n.origin,o=n.topic,a=t.jsonStringifyData(Os(Os({},e),{topic:o}));if(!r.postMessage)throw new Error("The sender no found postMessage method please check the sender option");a&&r.postMessage(a,s||"*")},t.prototype.handlerOnMessage=function(e){var n=e.data;if(n){var r=t.jsonParseData(n,null);if(!(!r||r.topic!==this.options.topic)){var s=r.id,o=r.type;o==="request"&&this._emitter.emit(this.options.topic,r),o==="response"&&this._emitter.emit("response_".concat(s),r)}}},t.prototype.getListener=function(){return this.options.listener||window},t.prototype.log=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var s=this.options,o=s.debug,a=s.name;if(o){var i=new Date().toISOString(),c="[RPC] [".concat(i,"] [").concat(a,"] ").concat(e);console.groupCollapsed(c),n!=null&&n.length&&console.info.apply(console,n),console.groupEnd()}},Object.defineProperty(t.prototype,"methods",{get:function(){return this._methods},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"emitter",{get:function(){return this._emitter},enumerable:!1,configurable:!0}),t}();const mm=[Intl.DateTimeFormat().resolvedOptions().locale,"en-US"],gm={hour:"2-digit",minute:"2-digit"};function oo(t){return new Date(t).toLocaleTimeString(mm,gm)}function Pa(t){return t<10?"0".concat(t):t}function ym(t){return new Date(t).getFullYear()}function _m(t){return Pa(new Date(t).getMonth()+1)}function vm(t){return Pa(new Date(t).getDate())}function bm(t){return Pa(new Date(t).getHours())}function wm(t){return new Date(t).getMinutes()}function xm(t){return new Date(t).getSeconds()}const Cm=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,Sm={YYYY:ym,MM:_m,DD:vm,HH:bm,mm:wm,ss:xm};function Tm(t,e="YYYY-MM-DD"){const n=e.match(Cm);return n?n.map(s=>Sm[s]||s).filter(s=>!!s).reduce((s,o)=>(s+=typeof o=="function"?o(t):o,s),""):""}function km(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function Em(){const t=new URL(window.location.href);return new URLSearchParams(t.search)}function Qr(){return Em().get("touchpointId")||""}const zi=()=>typeof window.BroadcastChannel=="function",ys=ut.getSubLogger({name:"useBoardCast"}),yt=_r()(()=>{const t="td-board-cast-".concat(Qr()||"unknown-touchpoint-id"),e=new Map;let n=!1,r=null;const s=(a,i=[])=>{if(a){const c=e.get(a);c==null||c.forEach(l=>l(...i)),ys.debug("Received tab event=".concat(a," data=").concat(Ve(i)))}},o=a=>{if(a.key===t&&a.newValue){const{event:i,data:c}=$c(a.newValue,{});s(i,c),Hf(t)}};return{init(){n||(zi()?(ys.debug("Using tab events for broadcast channel namespace=".concat(t)),r=new BroadcastChannel(t),r.onmessage=a=>{const{event:i,data:c}=a.data;s(i,c)}):(ys.debug("Using tab events for storage changed namespace=".concat(t)),window.addEventListener("storage",o)),n=!0)},on(a,i){const c=e.get(a)||[];e.set(a,[...c,i])},emit(a,...i){zi()?r==null||r.postMessage({event:a,data:i}):Vf(t,Ve({event:a,data:i})),ys.debug("Emit tab from event=".concat(a," data=").concat(Ve(i)))},off(a,i){var c;e.has(a)&&e.set(a,((c=e.get(a))==null?void 0:c.filter(l=>l!==i))||[])},destroy(){var a;(a=r==null?void 0:r.close)==null||a.call(r),r=null,window.removeEventListener("storage",o),e.clear(),n=!1},count(){const a={};return e.forEach((i,c)=>{a[c]=i}),a}}}),Am=t=>({on:t.on,off:t.off,emit:t.emit}),BS=()=>yt(Mn(Am)),Na=t=>{const{attributes:e,author:n}=t,r=e;return r!=null&&r.is_virtual_agent?"va":r!=null&&r.agentId?"agent":n==="system"?"system":"contact"},il=t=>{const{attributes:e}=t,n=e;return n!=null&&n.agentId?n.agentId:""},Lm=t=>{const{appearanceConfig:e,options:n}=ve.getState().config,{displayAgentsName:r,displayAutopilotsAvatar:s,autopilotsAvatar:o}=e.generalSettings,{botIcon:a}=n;switch(t){case"agent":return{url:a,type:r?"agent":"system"};case"va":return{url:s&&o?o:a};case"system":return{url:a};default:return}},cl=t=>{if(t!=="contact")return Lm(t)},ll=({role:t,agentName:e=""})=>{const{appearanceConfig:n}=ve.getState().config,{displayAgentsName:r,displayAutopilotsName:s,autopilotsName:o}=n.generalSettings;switch(t){case"contact":return"contactName";case"va":return s?o?o.trim():"autopilotsName":"";case"agent":return r?e:"";default:return""}},Im=t=>{var o;const e=t.attributes;if(!((o=e==null?void 0:e.action)!=null&&o.metadata))return;const{cur_identified_id:n,cur_participant_type:r,cur_display_name:s}=e.action.metadata;r==="LIVE_AGENT"&&He.getState().setAssigneeName(n,s)},dl=t=>{var s;const e=Na(t),n=((s=t.attributes)==null?void 0:s.agentId)||"",r=He.getState().getAssigneeName(n);return ll({role:e,agentName:r})},Ba="TYPING_MESSAGE_ID",Rm={tid:Ba,sid:"typing",status:"success",alignment:"received",timestamp:0,formattedTime:"",items:[{type:"typing"}]};function $a(t){return t===Ba}function jm(t){t==null||t(Ba)}function Qo({role:t,agentName:e}){const n=cl(t),r=ll({role:t,agentName:e});return{...Rm,role:t,avatar:n,participantName:r}}function Pm(t,e,n,r){const s=Date.now(),o=e.get("file"),a=o instanceof Blob?URL.createObjectURL(o):"";return{sid:"",alignment:"sent",tid:t,status:"sending",items:[{type:n,url:a,smart_text:{key:"download"}}],timestamp:s,formattedTime:oo(s),...r}}function Nm(t,e,n){const r=Date.now();return{sid:"",alignment:"sent",tid:t,status:"sending",items:[{type:"text",text:e}],timestamp:r,formattedTime:oo(r),...n}}function Bm(t){const{sid:e,index:n}=t,r=il(t),s=Na(t),o=dl(t);return{index:n,sid:e,rid:r,role:s,participantName:o,status:"success"}}const $m=t=>{var y;const e=t.attributes;if(!((y=e==null?void 0:e.action)!=null&&y.metadata))return!0;const{cur_identified_id:n,cur_participant_type:r,cur_display_name:s,pre_identified_id:o,pre_participant_type:a}=e.action.metadata,{appearanceConfig:i}=ve.getState().config,{displayAgentsName:c,agentsNameDisplayRule:l}=i.generalSettings;return!c||!s?!0:!a&&r==="VIRTUAL_AGENT"||n===o||l==="same name"&&a==="LIVE_AGENT"&&r==="LIVE_AGENT"};function Om(t){return t!==null&&!Array.isArray(t)&&typeof t=="object"&&t.constructor===Object}function Mm(t){return[{type:"text",text:t.text_response}]}function Dm(t){return t.content.map(e=>({type:"rich_text",html:e}))}const Fm=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),Vm=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),Hm=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),Um=/[^\p{L}\d]+/giu,Zi="$1\0$2",Wi="";function ul(t){let e=t.trim();e=e.replace(Fm,Zi).replace(Vm,Zi),e=e.replace(Um,"\0");let n=0,r=e.length;for(;e.charAt(n)==="\0";)n++;if(n===r)return[];for(;e.charAt(r-1)==="\0";)r--;return e.slice(n,r).split(/\0/g)}function zm(t){var n;const e=ul(t);for(let r=0;r<e.length;r++){const s=e[r],o=Hm.exec(s);if(o){const a=o.index+((n=o[1])!=null?n:o[2]).length;e.splice(r,1,s.slice(0,a),s.slice(a))}}return e}function Zm(t,e){var o;const[n,r,s]=qm(t,e);return n+r.map(Gm(e==null?void 0:e.locale)).join((o=e==null?void 0:e.delimiter)!=null?o:" ")+s}function Wm(t,e){return Zm(t,{delimiter:"_",...e})}function Gm(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function qm(t,e={}){var i,c,l;const n=(i=e.split)!=null?i:e.separateNumbers?zm:ul,r=(c=e.prefixCharacters)!=null?c:Wi,s=(l=e.suffixCharacters)!=null?l:Wi;let o=0,a=t.length;for(;o<t.length;){const u=t.charAt(o);if(!r.includes(u))break;o++}for(;a>o;){const u=a-1,p=t.charAt(u);if(!s.includes(p))break;a=u}return[t.slice(0,o),n(t.slice(o,a)),t.slice(a)]}const Ym=t=>t!==null&&typeof t=="object";function Km(t){return function e(n,r=1,s){if(r===0||!Ym(n))return n;if(Array.isArray(n))return n.map(a=>e(a,r-1,s));const o=Object.create(Object.getPrototypeOf(n));return Object.keys(n).forEach(a=>{const i=n[a],c=t(a,s),l=e(i,r-1,s);o[c]=l}),o}}const Jm=Km(Wm);var ue;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const o={};for(const a of s)o[a]=a;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(i=>typeof s[s[i]]!="number"),a={};for(const i of o)a[i]=s[i];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&o.push(a);return o},t.find=(s,o)=>{for(const a of s)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(a=>typeof a=="string"?"'".concat(a,"'"):a).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(ue||(ue={}));var ea;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(ea||(ea={}));const V=ue.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),dn=t=>{switch(typeof t){case"undefined":return V.undefined;case"string":return V.string;case"number":return isNaN(t)?V.nan:V.number;case"boolean":return V.boolean;case"function":return V.function;case"bigint":return V.bigint;case"symbol":return V.symbol;case"object":return Array.isArray(t)?V.array:t===null?V.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?V.promise:typeof Map<"u"&&t instanceof Map?V.map:typeof Set<"u"&&t instanceof Set?V.set:typeof Date<"u"&&t instanceof Date?V.date:V.object;default:return V.unknown}},R=ue.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Xm=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class at extends Error{constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let i=r,c=0;for(;c<a.path.length;){const l=a.path[c];c===a.path.length-1?(i[l]=i[l]||{_errors:[]},i[l]._errors.push(n(a))):i[l]=i[l]||{_errors:[]},i=i[l],c++}}};return s(this),r}static assert(e){if(!(e instanceof at))throw new Error("Not a ZodError: ".concat(e))}toString(){return this.message}get message(){return JSON.stringify(this.issues,ue.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}at.create=t=>new at(t);const lr=(t,e)=>{let n;switch(t.code){case R.invalid_type:t.received===V.undefined?n="Required":n="Expected ".concat(t.expected,", received ").concat(t.received);break;case R.invalid_literal:n="Invalid literal value, expected ".concat(JSON.stringify(t.expected,ue.jsonStringifyReplacer));break;case R.unrecognized_keys:n="Unrecognized key(s) in object: ".concat(ue.joinValues(t.keys,", "));break;case R.invalid_union:n="Invalid input";break;case R.invalid_union_discriminator:n="Invalid discriminator value. Expected ".concat(ue.joinValues(t.options));break;case R.invalid_enum_value:n="Invalid enum value. Expected ".concat(ue.joinValues(t.options),", received '").concat(t.received,"'");break;case R.invalid_arguments:n="Invalid function arguments";break;case R.invalid_return_type:n="Invalid function return type";break;case R.invalid_date:n="Invalid date";break;case R.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n='Invalid input: must include "'.concat(t.validation.includes,'"'),typeof t.validation.position=="number"&&(n="".concat(n," at one or more positions greater than or equal to ").concat(t.validation.position))):"startsWith"in t.validation?n='Invalid input: must start with "'.concat(t.validation.startsWith,'"'):"endsWith"in t.validation?n='Invalid input: must end with "'.concat(t.validation.endsWith,'"'):ue.assertNever(t.validation):t.validation!=="regex"?n="Invalid ".concat(t.validation):n="Invalid";break;case R.too_small:t.type==="array"?n="Array must contain ".concat(t.exact?"exactly":t.inclusive?"at least":"more than"," ").concat(t.minimum," element(s)"):t.type==="string"?n="String must contain ".concat(t.exact?"exactly":t.inclusive?"at least":"over"," ").concat(t.minimum," character(s)"):t.type==="number"?n="Number must be ".concat(t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than ").concat(t.minimum):t.type==="date"?n="Date must be ".concat(t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than ").concat(new Date(Number(t.minimum))):n="Invalid input";break;case R.too_big:t.type==="array"?n="Array must contain ".concat(t.exact?"exactly":t.inclusive?"at most":"less than"," ").concat(t.maximum," element(s)"):t.type==="string"?n="String must contain ".concat(t.exact?"exactly":t.inclusive?"at most":"under"," ").concat(t.maximum," character(s)"):t.type==="number"?n="Number must be ".concat(t.exact?"exactly":t.inclusive?"less than or equal to":"less than"," ").concat(t.maximum):t.type==="bigint"?n="BigInt must be ".concat(t.exact?"exactly":t.inclusive?"less than or equal to":"less than"," ").concat(t.maximum):t.type==="date"?n="Date must be ".concat(t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"," ").concat(new Date(Number(t.maximum))):n="Invalid input";break;case R.custom:n="Invalid input";break;case R.invalid_intersection_types:n="Intersection results could not be merged";break;case R.not_multiple_of:n="Number must be a multiple of ".concat(t.multipleOf);break;case R.not_finite:n="Number must be finite";break;default:n=e.defaultError,ue.assertNever(t)}return{message:n}};let fl=lr;function Qm(t){fl=t}function Ms(){return fl}const Ds=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,o=[...n,...s.path||[]],a={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let i="";const c=r.filter(l=>!!l).slice().reverse();for(const l of c)i=l(a,{data:e,defaultError:i}).message;return{...s,path:o,message:i}},eg=[];function F(t,e){const n=Ms(),r=Ds({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===lr?void 0:lr].filter(s=>!!s)});t.common.issues.push(r)}class Ke{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return Q;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const o=await s.key,a=await s.value;r.push({key:o,value:a})}return Ke.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:o,value:a}=s;if(o.status==="aborted"||a.status==="aborted")return Q;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[o.value]=a.value)}return{status:e.value,value:r}}}const Q=Object.freeze({status:"aborted"}),tr=t=>({status:"dirty",value:t}),Qe=t=>({status:"valid",value:t}),ta=t=>t.status==="aborted",na=t=>t.status==="dirty",Br=t=>t.status==="valid",$r=t=>typeof Promise<"u"&&t instanceof Promise;function Fs(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function pl(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var G;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(G||(G={}));var Ir,Rr;class Ot{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Gi=(t,e)=>{if(Br(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new at(t.common.issues);return this._error=n,this._error}}};function re(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return e?{errorMap:e,description:s}:{errorMap:(a,i)=>{var c,l;const{message:u}=t;return a.code==="invalid_enum_value"?{message:u!=null?u:i.defaultError}:typeof i.data>"u"?{message:(c=u!=null?u:r)!==null&&c!==void 0?c:i.defaultError}:a.code!=="invalid_type"?{message:i.defaultError}:{message:(l=u!=null?u:n)!==null&&l!==void 0?l:i.defaultError}},description:s}}class oe{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return dn(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:dn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Ke,ctx:{common:e.parent.common,data:e.data,parsedType:dn(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if($r(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dn(e)},o=this._parseSync({data:e,path:s.path,parent:s});return Gi(s,o)}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dn(e)},s=this._parse({data:e,path:r.path,parent:r}),o=await($r(s)?s:Promise.resolve(s));return Gi(r,o)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const a=e(s),i=()=>o.addIssue({code:R.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(i(),!1)):a?!0:(i(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new kt({schema:this,typeName:J.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return Nt.create(this,this._def)}nullable(){return yn.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Tt.create(this,this._def)}promise(){return ur.create(this,this._def)}or(e){return Fr.create([this,e],this._def)}and(e){return Vr.create(this,e,this._def)}transform(e){return new kt({...re(this._def),schema:this,typeName:J.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new Wr({...re(this._def),innerType:this,defaultValue:n,typeName:J.ZodDefault})}brand(){return new Oa({typeName:J.ZodBranded,type:this,...re(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new Gr({...re(this._def),innerType:this,catchValue:n,typeName:J.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return es.create(this,e)}readonly(){return qr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const tg=/^c[^\s-]{8,}$/i,ng=/^[0-9a-z]+$/,rg=/^[0-9A-HJKMNP-TV-Z]{26}$/,sg=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,og=/^[a-z0-9_-]{21}$/i,ag=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ig=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,cg="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let No;const lg=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,dg=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ug=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,hl="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",fg=new RegExp("^".concat(hl,"$"));function ml(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e="".concat(e,"\\.\\d{").concat(t.precision,"}"):t.precision==null&&(e="".concat(e,"(\\.\\d+)?")),e}function pg(t){return new RegExp("^".concat(ml(t),"$"))}function gl(t){let e="".concat(hl,"T").concat(ml(t));const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e="".concat(e,"(").concat(n.join("|"),")"),new RegExp("^".concat(e,"$"))}function hg(t,e){return!!((e==="v4"||!e)&&lg.test(t)||(e==="v6"||!e)&&dg.test(t))}class St extends oe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==V.string){const o=this._getOrReturnCtx(e);return F(o,{code:R.invalid_type,expected:V.string,received:o.parsedType}),Q}const r=new Ke;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:R.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:R.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const a=e.data.length>o.value,i=e.data.length<o.value;(a||i)&&(s=this._getOrReturnCtx(e,s),a?F(s,{code:R.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&F(s,{code:R.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")ig.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"email",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")No||(No=new RegExp(cg,"u")),No.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"emoji",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")sg.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"uuid",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")og.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"nanoid",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")tg.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"cuid",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")ng.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"cuid2",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")rg.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"ulid",code:R.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch(a){s=this._getOrReturnCtx(e,s),F(s,{validation:"url",code:R.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"regex",code:R.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),F(s,{code:R.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),F(s,{code:R.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),F(s,{code:R.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?gl(o).test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{code:R.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?fg.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{code:R.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?pg(o).test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{code:R.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?ag.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"duration",code:R.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?hg(e.data,o.version)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"ip",code:R.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?ug.test(e.data)||(s=this._getOrReturnCtx(e,s),F(s,{validation:"base64",code:R.invalid_string,message:o.message}),r.dirty()):ue.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:R.invalid_string,...G.errToObj(r)})}_addCheck(e){return new St({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...G.errToObj(e)})}url(e){return this._addCheck({kind:"url",...G.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...G.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...G.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...G.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...G.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...G.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...G.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...G.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...G.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...G.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...G.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...G.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...G.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...G.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...G.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...G.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...G.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...G.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...G.errToObj(n)})}nonempty(e){return this.min(1,G.errToObj(e))}trim(){return new St({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new St({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new St({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}St.create=t=>{var e;return new St({checks:[],typeName:J.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...re(t)})};function mg(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,o=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return o%a/Math.pow(10,s)}class hn extends oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==V.number){const o=this._getOrReturnCtx(e);return F(o,{code:R.invalid_type,expected:V.number,received:o.parsedType}),Q}let r;const s=new Ke;for(const o of this._def.checks)o.kind==="int"?ue.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),F(r,{code:R.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:R.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:R.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?mg(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),F(r,{code:R.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),F(r,{code:R.not_finite,message:o.message}),s.dirty()):ue.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,G.toString(n))}gt(e,n){return this.setLimit("min",e,!1,G.toString(n))}lte(e,n){return this.setLimit("max",e,!0,G.toString(n))}lt(e,n){return this.setLimit("max",e,!1,G.toString(n))}setLimit(e,n,r,s){return new hn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:G.toString(s)}]})}_addCheck(e){return new hn({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:G.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:G.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:G.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:G.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:G.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ue.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}hn.create=t=>new hn({checks:[],typeName:J.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...re(t)});class mn extends oe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==V.bigint){const o=this._getOrReturnCtx(e);return F(o,{code:R.invalid_type,expected:V.bigint,received:o.parsedType}),Q}let r;const s=new Ke;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:R.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),F(r,{code:R.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),F(r,{code:R.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):ue.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,G.toString(n))}gt(e,n){return this.setLimit("min",e,!1,G.toString(n))}lte(e,n){return this.setLimit("max",e,!0,G.toString(n))}lt(e,n){return this.setLimit("max",e,!1,G.toString(n))}setLimit(e,n,r,s){return new mn({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:G.toString(s)}]})}_addCheck(e){return new mn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:G.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:G.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:G.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:G.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:G.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}mn.create=t=>{var e;return new mn({checks:[],typeName:J.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...re(t)})};class Or extends oe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==V.boolean){const r=this._getOrReturnCtx(e);return F(r,{code:R.invalid_type,expected:V.boolean,received:r.parsedType}),Q}return Qe(e.data)}}Or.create=t=>new Or({typeName:J.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...re(t)});class Bn extends oe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==V.date){const o=this._getOrReturnCtx(e);return F(o,{code:R.invalid_type,expected:V.date,received:o.parsedType}),Q}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return F(o,{code:R.invalid_date}),Q}const r=new Ke;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:R.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),F(s,{code:R.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):ue.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Bn({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:G.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:G.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Bn.create=t=>new Bn({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:J.ZodDate,...re(t)});class Vs extends oe{_parse(e){if(this._getType(e)!==V.symbol){const r=this._getOrReturnCtx(e);return F(r,{code:R.invalid_type,expected:V.symbol,received:r.parsedType}),Q}return Qe(e.data)}}Vs.create=t=>new Vs({typeName:J.ZodSymbol,...re(t)});class Mr extends oe{_parse(e){if(this._getType(e)!==V.undefined){const r=this._getOrReturnCtx(e);return F(r,{code:R.invalid_type,expected:V.undefined,received:r.parsedType}),Q}return Qe(e.data)}}Mr.create=t=>new Mr({typeName:J.ZodUndefined,...re(t)});class Dr extends oe{_parse(e){if(this._getType(e)!==V.null){const r=this._getOrReturnCtx(e);return F(r,{code:R.invalid_type,expected:V.null,received:r.parsedType}),Q}return Qe(e.data)}}Dr.create=t=>new Dr({typeName:J.ZodNull,...re(t)});class dr extends oe{constructor(){super(...arguments),this._any=!0}_parse(e){return Qe(e.data)}}dr.create=t=>new dr({typeName:J.ZodAny,...re(t)});class Rn extends oe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qe(e.data)}}Rn.create=t=>new Rn({typeName:J.ZodUnknown,...re(t)});class Kt extends oe{_parse(e){const n=this._getOrReturnCtx(e);return F(n,{code:R.invalid_type,expected:V.never,received:n.parsedType}),Q}}Kt.create=t=>new Kt({typeName:J.ZodNever,...re(t)});class Hs extends oe{_parse(e){if(this._getType(e)!==V.undefined){const r=this._getOrReturnCtx(e);return F(r,{code:R.invalid_type,expected:V.void,received:r.parsedType}),Q}return Qe(e.data)}}Hs.create=t=>new Hs({typeName:J.ZodVoid,...re(t)});class Tt extends oe{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==V.array)return F(n,{code:R.invalid_type,expected:V.array,received:n.parsedType}),Q;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,i=n.data.length<s.exactLength.value;(a||i)&&(F(n,{code:a?R.too_big:R.too_small,minimum:i?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(F(n,{code:R.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(F(n,{code:R.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,i)=>s.type._parseAsync(new Ot(n,a,n.path,i)))).then(a=>Ke.mergeArray(r,a));const o=[...n.data].map((a,i)=>s.type._parseSync(new Ot(n,a,n.path,i)));return Ke.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Tt({...this._def,minLength:{value:e,message:G.toString(n)}})}max(e,n){return new Tt({...this._def,maxLength:{value:e,message:G.toString(n)}})}length(e,n){return new Tt({...this._def,exactLength:{value:e,message:G.toString(n)}})}nonempty(e){return this.min(1,e)}}Tt.create=(t,e)=>new Tt({type:t,minLength:null,maxLength:null,exactLength:null,typeName:J.ZodArray,...re(e)});function Xn(t){if(t instanceof Ae){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=Nt.create(Xn(r))}return new Ae({...t._def,shape:()=>e})}else return t instanceof Tt?new Tt({...t._def,type:Xn(t.element)}):t instanceof Nt?Nt.create(Xn(t.unwrap())):t instanceof yn?yn.create(Xn(t.unwrap())):t instanceof Mt?Mt.create(t.items.map(e=>Xn(e))):t}class Ae extends oe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=ue.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==V.object){const l=this._getOrReturnCtx(e);return F(l,{code:R.invalid_type,expected:V.object,received:l.parsedType}),Q}const{status:r,ctx:s}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof Kt&&this._def.unknownKeys==="strip"))for(const l in s.data)a.includes(l)||i.push(l);const c=[];for(const l of a){const u=o[l],p=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Ot(s,p,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof Kt){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of i)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")i.length>0&&(F(s,{code:R.unrecognized_keys,keys:i}),r.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of i){const p=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Ot(s,p,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const p=await u.key,m=await u.value;l.push({key:p,value:m,alwaysSet:u.alwaysSet})}return l}).then(l=>Ke.mergeObjectSync(r,l)):Ke.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return G.errToObj,new Ae({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o,a,i;const c=(a=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(i=G.errToObj(e).message)!==null&&i!==void 0?i:c}:{message:c}}}:{}})}strip(){return new Ae({...this._def,unknownKeys:"strip"})}passthrough(){return new Ae({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ae({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ae({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:J.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Ae({...this._def,catchall:e})}pick(e){const n={};return ue.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Ae({...this._def,shape:()=>n})}omit(e){const n={};return ue.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Ae({...this._def,shape:()=>n})}deepPartial(){return Xn(this)}partial(e){const n={};return ue.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Ae({...this._def,shape:()=>n})}required(e){const n={};return ue.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Nt;)o=o._def.innerType;n[r]=o}}),new Ae({...this._def,shape:()=>n})}keyof(){return yl(ue.objectKeys(this.shape))}}Ae.create=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strip",catchall:Kt.create(),typeName:J.ZodObject,...re(e)});Ae.strictCreate=(t,e)=>new Ae({shape:()=>t,unknownKeys:"strict",catchall:Kt.create(),typeName:J.ZodObject,...re(e)});Ae.lazycreate=(t,e)=>new Ae({shape:t,unknownKeys:"strip",catchall:Kt.create(),typeName:J.ZodObject,...re(e)});class Fr extends oe{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(o){for(const i of o)if(i.result.status==="valid")return i.result;for(const i of o)if(i.result.status==="dirty")return n.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(i=>new at(i.ctx.common.issues));return F(n,{code:R.invalid_union,unionErrors:a}),Q}if(n.common.async)return Promise.all(r.map(async o=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let o;const a=[];for(const c of r){const l={...n,common:{...n.common,issues:[]},parent:null},u=c._parseSync({data:n.data,path:n.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!o&&(o={result:u,ctx:l}),l.common.issues.length&&a.push(l.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const i=a.map(c=>new at(c));return F(n,{code:R.invalid_union,unionErrors:i}),Q}}get options(){return this._def.options}}Fr.create=(t,e)=>new Fr({options:t,typeName:J.ZodUnion,...re(e)});const Wt=t=>t instanceof Ur?Wt(t.schema):t instanceof kt?Wt(t.innerType()):t instanceof zr?[t.value]:t instanceof gn?t.options:t instanceof Zr?ue.objectValues(t.enum):t instanceof Wr?Wt(t._def.innerType):t instanceof Mr?[void 0]:t instanceof Dr?[null]:t instanceof Nt?[void 0,...Wt(t.unwrap())]:t instanceof yn?[null,...Wt(t.unwrap())]:t instanceof Oa||t instanceof qr?Wt(t.unwrap()):t instanceof Gr?Wt(t._def.innerType):[];class ao extends oe{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==V.object)return F(n,{code:R.invalid_type,expected:V.object,received:n.parsedType}),Q;const r=this.discriminator,s=n.data[r],o=this.optionsMap.get(s);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(F(n,{code:R.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Q)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const o of n){const a=Wt(o.shape[e]);if(!a.length)throw new Error("A discriminator value for key `".concat(e,"` could not be extracted from all schema options"));for(const i of a){if(s.has(i))throw new Error("Discriminator property ".concat(String(e)," has duplicate value ").concat(String(i)));s.set(i,o)}}return new ao({typeName:J.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...re(r)})}}function ra(t,e){const n=dn(t),r=dn(e);if(t===e)return{valid:!0,data:t};if(n===V.object&&r===V.object){const s=ue.objectKeys(e),o=ue.objectKeys(t).filter(i=>s.indexOf(i)!==-1),a={...t,...e};for(const i of o){const c=ra(t[i],e[i]);if(!c.valid)return{valid:!1};a[i]=c.data}return{valid:!0,data:a}}else if(n===V.array&&r===V.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const a=t[o],i=e[o],c=ra(a,i);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===V.date&&r===V.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Vr extends oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(o,a)=>{if(ta(o)||ta(a))return Q;const i=ra(o.value,a.value);return i.valid?((na(o)||na(a))&&n.dirty(),{status:n.value,value:i.data}):(F(r,{code:R.invalid_intersection_types}),Q)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,a])=>s(o,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Vr.create=(t,e,n)=>new Vr({left:t,right:e,typeName:J.ZodIntersection,...re(n)});class Mt extends oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==V.array)return F(r,{code:R.invalid_type,expected:V.array,received:r.parsedType}),Q;if(r.data.length<this._def.items.length)return F(r,{code:R.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Q;!this._def.rest&&r.data.length>this._def.items.length&&(F(r,{code:R.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((a,i)=>{const c=this._def.items[i]||this._def.rest;return c?c._parse(new Ot(r,a,r.path,i)):null}).filter(a=>!!a);return r.common.async?Promise.all(o).then(a=>Ke.mergeArray(n,a)):Ke.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new Mt({...this._def,rest:e})}}Mt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Mt({items:t,typeName:J.ZodTuple,rest:null,...re(e)})};class Hr extends oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==V.object)return F(r,{code:R.invalid_type,expected:V.object,received:r.parsedType}),Q;const s=[],o=this._def.keyType,a=this._def.valueType;for(const i in r.data)s.push({key:o._parse(new Ot(r,i,r.path,i)),value:a._parse(new Ot(r,r.data[i],r.path,i)),alwaysSet:i in r.data});return r.common.async?Ke.mergeObjectAsync(n,s):Ke.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof oe?new Hr({keyType:e,valueType:n,typeName:J.ZodRecord,...re(r)}):new Hr({keyType:St.create(),valueType:e,typeName:J.ZodRecord,...re(n)})}}class Us extends oe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==V.map)return F(r,{code:R.invalid_type,expected:V.map,received:r.parsedType}),Q;const s=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([i,c],l)=>({key:s._parse(new Ot(r,i,r.path,[l,"key"])),value:o._parse(new Ot(r,c,r.path,[l,"value"]))}));if(r.common.async){const i=new Map;return Promise.resolve().then(async()=>{for(const c of a){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return Q;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),i.set(l.value,u.value)}return{status:n.value,value:i}})}else{const i=new Map;for(const c of a){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return Q;(l.status==="dirty"||u.status==="dirty")&&n.dirty(),i.set(l.value,u.value)}return{status:n.value,value:i}}}}Us.create=(t,e,n)=>new Us({valueType:e,keyType:t,typeName:J.ZodMap,...re(n)});class $n extends oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==V.set)return F(r,{code:R.invalid_type,expected:V.set,received:r.parsedType}),Q;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(F(r,{code:R.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(F(r,{code:R.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function a(c){const l=new Set;for(const u of c){if(u.status==="aborted")return Q;u.status==="dirty"&&n.dirty(),l.add(u.value)}return{status:n.value,value:l}}const i=[...r.data.values()].map((c,l)=>o._parse(new Ot(r,c,r.path,l)));return r.common.async?Promise.all(i).then(c=>a(c)):a(i)}min(e,n){return new $n({...this._def,minSize:{value:e,message:G.toString(n)}})}max(e,n){return new $n({...this._def,maxSize:{value:e,message:G.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}$n.create=(t,e)=>new $n({valueType:t,minSize:null,maxSize:null,typeName:J.ZodSet,...re(e)});class sr extends oe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==V.function)return F(n,{code:R.invalid_type,expected:V.function,received:n.parsedType}),Q;function r(i,c){return Ds({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ms(),lr].filter(l=>!!l),issueData:{code:R.invalid_arguments,argumentsError:c}})}function s(i,c){return Ds({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ms(),lr].filter(l=>!!l),issueData:{code:R.invalid_return_type,returnTypeError:c}})}const o={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof ur){const i=this;return Qe(async function(...c){const l=new at([]),u=await i._def.args.parseAsync(c,o).catch(y=>{throw l.addIssue(r(c,y)),l}),p=await Reflect.apply(a,this,u);return await i._def.returns._def.type.parseAsync(p,o).catch(y=>{throw l.addIssue(s(p,y)),l})})}else{const i=this;return Qe(function(...c){const l=i._def.args.safeParse(c,o);if(!l.success)throw new at([r(c,l.error)]);const u=Reflect.apply(a,this,l.data),p=i._def.returns.safeParse(u,o);if(!p.success)throw new at([s(u,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new sr({...this._def,args:Mt.create(e).rest(Rn.create())})}returns(e){return new sr({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new sr({args:e||Mt.create([]).rest(Rn.create()),returns:n||Rn.create(),typeName:J.ZodFunction,...re(r)})}}class Ur extends oe{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Ur.create=(t,e)=>new Ur({getter:t,typeName:J.ZodLazy,...re(e)});class zr extends oe{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return F(n,{received:n.data,code:R.invalid_literal,expected:this._def.value}),Q}return{status:"valid",value:e.data}}get value(){return this._def.value}}zr.create=(t,e)=>new zr({value:t,typeName:J.ZodLiteral,...re(e)});function yl(t,e){return new gn({values:t,typeName:J.ZodEnum,...re(e)})}class gn extends oe{constructor(){super(...arguments),Ir.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return F(n,{expected:ue.joinValues(r),received:n.parsedType,code:R.invalid_type}),Q}if(Fs(this,Ir)||pl(this,Ir,new Set(this._def.values)),!Fs(this,Ir).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return F(n,{received:n.data,code:R.invalid_enum_value,options:r}),Q}return Qe(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return gn.create(e,{...this._def,...n})}exclude(e,n=this._def){return gn.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Ir=new WeakMap;gn.create=yl;class Zr extends oe{constructor(){super(...arguments),Rr.set(this,void 0)}_parse(e){const n=ue.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==V.string&&r.parsedType!==V.number){const s=ue.objectValues(n);return F(r,{expected:ue.joinValues(s),received:r.parsedType,code:R.invalid_type}),Q}if(Fs(this,Rr)||pl(this,Rr,new Set(ue.getValidEnumValues(this._def.values))),!Fs(this,Rr).has(e.data)){const s=ue.objectValues(n);return F(r,{received:r.data,code:R.invalid_enum_value,options:s}),Q}return Qe(e.data)}get enum(){return this._def.values}}Rr=new WeakMap;Zr.create=(t,e)=>new Zr({values:t,typeName:J.ZodNativeEnum,...re(e)});class ur extends oe{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==V.promise&&n.common.async===!1)return F(n,{code:R.invalid_type,expected:V.promise,received:n.parsedType}),Q;const r=n.parsedType===V.promise?n.data:Promise.resolve(n.data);return Qe(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ur.create=(t,e)=>new ur({type:t,typeName:J.ZodPromise,...re(e)});class kt extends oe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===J.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:a=>{F(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const a=s.transform(r.data,o);if(r.common.async)return Promise.resolve(a).then(async i=>{if(n.value==="aborted")return Q;const c=await this._def.schema._parseAsync({data:i,path:r.path,parent:r});return c.status==="aborted"?Q:c.status==="dirty"||n.value==="dirty"?tr(c.value):c});{if(n.value==="aborted")return Q;const i=this._def.schema._parseSync({data:a,path:r.path,parent:r});return i.status==="aborted"?Q:i.status==="dirty"||n.value==="dirty"?tr(i.value):i}}if(s.type==="refinement"){const a=i=>{const c=s.refinement(i,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Q:(i.status==="dirty"&&n.dirty(),a(i.value),{status:n.value,value:i.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>i.status==="aborted"?Q:(i.status==="dirty"&&n.dirty(),a(i.value).then(()=>({status:n.value,value:i.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Br(a))return a;const i=s.transform(a.value,o);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:i}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Br(a)?Promise.resolve(s.transform(a.value,o)).then(i=>({status:n.value,value:i})):a);ue.assertNever(s)}}kt.create=(t,e,n)=>new kt({schema:t,typeName:J.ZodEffects,effect:e,...re(n)});kt.createWithPreprocess=(t,e,n)=>new kt({schema:e,effect:{type:"preprocess",transform:t},typeName:J.ZodEffects,...re(n)});class Nt extends oe{_parse(e){return this._getType(e)===V.undefined?Qe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Nt.create=(t,e)=>new Nt({innerType:t,typeName:J.ZodOptional,...re(e)});class yn extends oe{_parse(e){return this._getType(e)===V.null?Qe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yn.create=(t,e)=>new yn({innerType:t,typeName:J.ZodNullable,...re(e)});class Wr extends oe{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===V.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}Wr.create=(t,e)=>new Wr({innerType:t,typeName:J.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...re(e)});class Gr extends oe{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return $r(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new at(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new at(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Gr.create=(t,e)=>new Gr({innerType:t,typeName:J.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...re(e)});class zs extends oe{_parse(e){if(this._getType(e)!==V.nan){const r=this._getOrReturnCtx(e);return F(r,{code:R.invalid_type,expected:V.nan,received:r.parsedType}),Q}return{status:"valid",value:e.data}}}zs.create=t=>new zs({typeName:J.ZodNaN,...re(t)});const gg=Symbol("zod_brand");class Oa extends oe{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class es extends oe{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Q:o.status==="dirty"?(n.dirty(),tr(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?Q:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new es({in:e,out:n,typeName:J.ZodPipeline})}}class qr extends oe{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Br(s)&&(s.value=Object.freeze(s.value)),s);return $r(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}qr.create=(t,e)=>new qr({innerType:t,typeName:J.ZodReadonly,...re(e)});function _l(t,e={},n){return t?dr.create().superRefine((r,s)=>{var o,a;if(!t(r)){const i=typeof e=="function"?e(r):typeof e=="string"?{message:e}:e,c=(a=(o=i.fatal)!==null&&o!==void 0?o:n)!==null&&a!==void 0?a:!0,l=typeof i=="string"?{message:i}:i;s.addIssue({code:"custom",...l,fatal:c})}}):dr.create()}const yg={object:Ae.lazycreate};var J;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(J||(J={}));const _g=(t,e={message:"Input not instance of ".concat(t.name)})=>_l(n=>n instanceof t,e),vl=St.create,bl=hn.create,vg=zs.create,bg=mn.create,wl=Or.create,wg=Bn.create,xg=Vs.create,Cg=Mr.create,Sg=Dr.create,Tg=dr.create,kg=Rn.create,Eg=Kt.create,Ag=Hs.create,Lg=Tt.create,Ig=Ae.create,Rg=Ae.strictCreate,jg=Fr.create,Pg=ao.create,Ng=Vr.create,Bg=Mt.create,$g=Hr.create,Og=Us.create,Mg=$n.create,Dg=sr.create,Fg=Ur.create,Vg=zr.create,Hg=gn.create,Ug=Zr.create,zg=ur.create,qi=kt.create,Zg=Nt.create,Wg=yn.create,Gg=kt.createWithPreprocess,qg=es.create,Yg=()=>vl().optional(),Kg=()=>bl().optional(),Jg=()=>wl().optional(),Xg={string:t=>St.create({...t,coerce:!0}),number:t=>hn.create({...t,coerce:!0}),boolean:t=>Or.create({...t,coerce:!0}),bigint:t=>mn.create({...t,coerce:!0}),date:t=>Bn.create({...t,coerce:!0})},Qg=Q;var A=Object.freeze({__proto__:null,defaultErrorMap:lr,setErrorMap:Qm,getErrorMap:Ms,makeIssue:Ds,EMPTY_PATH:eg,addIssueToContext:F,ParseStatus:Ke,INVALID:Q,DIRTY:tr,OK:Qe,isAborted:ta,isDirty:na,isValid:Br,isAsync:$r,get util(){return ue},get objectUtil(){return ea},ZodParsedType:V,getParsedType:dn,ZodType:oe,datetimeRegex:gl,ZodString:St,ZodNumber:hn,ZodBigInt:mn,ZodBoolean:Or,ZodDate:Bn,ZodSymbol:Vs,ZodUndefined:Mr,ZodNull:Dr,ZodAny:dr,ZodUnknown:Rn,ZodNever:Kt,ZodVoid:Hs,ZodArray:Tt,ZodObject:Ae,ZodUnion:Fr,ZodDiscriminatedUnion:ao,ZodIntersection:Vr,ZodTuple:Mt,ZodRecord:Hr,ZodMap:Us,ZodSet:$n,ZodFunction:sr,ZodLazy:Ur,ZodLiteral:zr,ZodEnum:gn,ZodNativeEnum:Zr,ZodPromise:ur,ZodEffects:kt,ZodTransformer:kt,ZodOptional:Nt,ZodNullable:yn,ZodDefault:Wr,ZodCatch:Gr,ZodNaN:zs,BRAND:gg,ZodBranded:Oa,ZodPipeline:es,ZodReadonly:qr,custom:_l,Schema:oe,ZodSchema:oe,late:yg,get ZodFirstPartyTypeKind(){return J},coerce:Xg,any:Tg,array:Lg,bigint:bg,boolean:wl,date:wg,discriminatedUnion:Pg,effect:qi,enum:Hg,function:Dg,instanceof:_g,intersection:Ng,lazy:Fg,literal:Vg,map:Og,nan:vg,nativeEnum:Ug,never:Eg,null:Sg,nullable:Wg,number:bl,object:Ig,oboolean:Jg,onumber:Kg,optional:Zg,ostring:Yg,pipeline:qg,preprocess:Gg,promise:zg,record:$g,set:Mg,strictObject:Rg,string:vl,symbol:xg,transformer:qi,tuple:Bg,undefined:Cg,union:jg,unknown:kg,void:Ag,NEVER:Qg,ZodIssueCode:R,quotelessJson:Xm,ZodError:at});function ey(t,e){return"".concat(t," field of type '").concat(e,"' is required")}function ty(t,e,n="string"){return"'".concat(t,"' field of type '").concat(e,"' must be a ").concat(n)}function fr(t,e){return"".concat(t," field of type '").concat(e,"' must be a non-empty array")}const pe={Text:"text",CustomText:"customtext",HTMLContent:"htmlcontent",Media:"media",Carousel:"carousel",QuickReplies:"quickreplies",Buttons:"buttons",MultiContent:"multicontent"},Ma=A.object({type:A.enum(["payload","link","call"]),payload:A.string().optional(),display_text:A.string(),phone_number:A.string().optional(),country_code:A.string().optional(),target:A.string().optional(),id:A.string().optional(),url:A.string().optional()}),ny=A.enum([pe.Text,pe.CustomText,pe.HTMLContent,pe.Media,pe.Carousel,pe.QuickReplies,pe.Buttons,pe.MultiContent]),ry=A.object({media_type:ny}),sy=A.object({media_type:A.literal(pe.Text)}),xl=A.object({media_type:A.literal(pe.CustomText),text_response:A.string()}),Cl=A.object({media_type:A.literal(pe.HTMLContent),content:A.array(A.string({invalid_type_error:ty("content",pe.HTMLContent)}),{required_error:ey("content",pe.HTMLContent)}).nonempty({message:fr("content",pe.HTMLContent)})}),Sl=A.object({media_type:A.literal(pe.Media),media:A.object({media_type:A.enum(["image","audio","video","file"]),url:A.string(),ignore_valid:A.boolean().optional(),provider:A.literal("twilio").optional(),getContentTemporaryUrl:A.function().returns(A.promise(A.string())).optional()})}),Tl=A.object({media_type:A.literal(pe.Carousel),carousel:A.object({elements:A.array(A.object({title:A.string(),text:A.string().optional(),image_url:A.string().optional(),buttons:A.array(Ma).nonempty({message:fr("carousel.elements.buttons",pe.Carousel)})})).nonempty({message:fr("carousel.elements",pe.Carousel)})})}),kl=A.object({media_type:A.literal(pe.QuickReplies),text_response:A.string().optional(),quick_actions:A.object({elements:A.array(Ma).nonempty({message:fr("quick_actions.elements",pe.QuickReplies)})})}),El=A.object({media_type:A.literal(pe.Buttons),text_response:A.string().optional(),quick_actions:A.object({elements:A.array(Ma).nonempty({message:fr("quick_actions.elements",pe.Buttons)})})}),oy=A.object({media_type:A.literal(pe.MultiContent),content:A.array(A.union([xl,Sl,Tl,kl,El,Cl])).nonempty({message:fr("content",pe.MultiContent)})}),ay=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(ry)}),Yi=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(A.never().or(sy))}),iy=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(xl)}),cy=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(Sl)}),ly=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(Cl)}),dy=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(Tl)}),uy=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(kl)}),fy=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(El)}),py=A.object({alt_text:A.string(),responses:A.array(A.string()),payloads:A.array(oy)});function hy(t){const e=Jm(t,10),n=Yi.safeParse(e);if(n.success)return n.data;const r=ay.safeParse(e);if(!r.success)throw r.error;let s;const o=r.data.payloads[0].media_type;switch(o){case pe.Text:return Yi.parse(e);case pe.CustomText:return iy.parse(e);case pe.HTMLContent:return ly.parse(e);case pe.Media:return cy.parse(e);case pe.Carousel:return dy.parse(e);case pe.QuickReplies:return uy.parse(e);case pe.Buttons:return fy.parse(e);case pe.MultiContent:return py.parse(e);default:throw s=o,new Error("Unsupported type: "+s)}}function Al(t=""){try{const[e,n]=t.split("/");return{prefix:e,suffix:n}}catch(e){return{prefix:"",suffix:""}}}const Ll=["audio/mpeg","audio/mp3","image/jpeg","image/png","video/mp4","video/quicktime","application/pdf"],my=Ll.join(",");function pr(t){return t.map(e=>({type:"text",text:e}))}function Da(t){return t.map(e=>{var i;const{type:n,payload:r,display_text:s,phone_number:o,url:a}=e;switch(n){case"payload":return{type:"reply",payload:r!=null?r:"",text:s};case"call":return{type:"call",payload:"tel:".concat(r!=null?r:o),text:s};case"link":return{type:"link",payload:(i=r!=null?r:a)!=null?i:"",text:s,target:"_blank"};default:console.error("Invalid button type: ",n);break}}).filter(Boolean)}function Il(t,e=""){if(t.length===0)return{lastMessage:e,previousMessages:[]};if(t.length===1)return{lastMessage:t[0],previousMessages:[]};const n=t[t.length-1],r=t.slice(0,-1);return{lastMessage:n,previousMessages:r}}function gy(t){let e;return t instanceof at?(t.issues.forEach(n=>{ut.error("".concat(n.message,": ").concat(n.path.map(r=>typeof r=="number"?"[".concat(r,"]"):r).join(".")))}),e=t.issues.map(n=>n.message).join("\n")):t instanceof Error?(e=t.message,ut.error(t)):e="Unknown error",e}function yy(t,e){const{quick_actions:n,text_response:r}=e,s=r?[r]:t,{lastMessage:o,previousMessages:a}=Il(s,"");return[...pr(a),{type:"buttons",text:o,buttons:Da(n.elements.slice(0,Pr.BUTTONS))}]}function _y(t,e){const n=e.carousel.elements.slice(0,Pr.CAROUSEL_CARDS).map(r=>{const{title:s,text:o,image_url:a,buttons:i}=r;return{title:s,description:o,imageUrl:a,buttons:Da(i.slice(0,Pr.CAROUSEL_BUTTONS))}});return[...pr(t.filter(r=>r!=="")),{type:"carousel",cards:n}]}function vy(t,e){const{media_type:n,url:r,ignore_valid:s,provider:o,getContentTemporaryUrl:a}=e.media;return[...pr(t.filter(i=>i!=="")),{type:n,url:r,ignoreValid:s,provider:o,getContentTemporaryUrl:a,smart_text:{key:"download"}}]}function by(t,e){const{quick_actions:n,text_response:r}=e,s=r?[r]:t,{lastMessage:o,previousMessages:a}=Il(s,ir.t("yourOptions"));return[...pr(a),{type:"quick_replies",text:o,replies:Da(n.elements.slice(0,Pr.BUTTONS))}]}function wy(t){return[{type:"system",action_type:t.action_type,smart_text:t.smart_text}]}const xy=ut.getSubLogger({name:"receiver"});function Cy(t,e){const{author:n="",sid:r,index:s}=t,{responses:o,payload:a}=Sy(t),i="success",c=n===e?"sent":"received",l=new Date(t.dateCreated||Date.now()).getTime(),u=l?oo(l):"",p=il(t),m=Na(t),y=cl(m),g=dl(t),v=Rl(o,a);return{index:s,sid:r,tid:"",rid:p,status:i,alignment:c,timestamp:l,formattedTime:u,items:v,role:m,avatar:y,participantName:g}}function Rl(t,e){let n=[];switch(e.media_type){case"text":n=pr(t);break;case"customtext":n=Mm(e);break;case"htmlcontent":n=Dm(e);break;case"carousel":n=_y(t,e);break;case"media":n=vy(t,e);break;case"buttons":n=yy(t,e);break;case"quickreplies":n=by(t,e);break;case"system":n=wy(e);break;case"multicontent":n=e.content.map(r=>Rl([],r)).flat();break;case"error":n=[{type:e.media_type,error_message:e.error_message}];break;default:n=pr(t);break}return n}function Sy(t){var c,l;const{type:e}=t,n=t.body,r=e==="media";let s=n?[n]:[],o={media_type:"text"};const a=t.attachedMedia;if(r&&a){const u=a[0],p=Al(u.contentType).prefix,m=()=>u.getContentTemporaryUrl();o={media_type:"media",media:{media_type:["video","image","audio"].indexOf(p)>-1?p:"file",ignore_valid:!0,provider:"twilio",getContentTemporaryUrl:m}}}const i=t.attributes;if(i!=null&&i.is_virtual_agent&&n)try{const u=hy(JSON.parse(n));s=u.responses,o=u.payloads[0]||o}catch(u){xy.warn("Failed to parse virtual agent message=".concat(typeof u=="string"?u:u==null?void 0:u.message),u);const p=gy(u);return{responses:[],payload:{media_type:"error",error_message:p}}}return((c=i==null?void 0:i.action)==null?void 0:c.name)==="digital_interaction_assigned"?{responses:[],payload:{media_type:"system",action_type:"assign",smart_text:{key:"assignMessage",options:{name:(l=i.action.metadata)==null?void 0:l.cur_display_name}}}}:{responses:s,payload:o}}const sa="close_conversation_by_participant";function jl(t,e){return Ca(async()=>{var r,s,o;const n=await Bt.getState().getCredentials(t);return n!=null&&n.error?Promise.reject(new Error("Failed to fetch TwilioCredentials reason=".concat(n.error," payload=").concat(Ve(t)))):n!=null&&n.data?t.bootstrap_type===Is.getAccessToken?{accessToken:((r=n.data)==null?void 0:r.accessToken)||"",region:((s=n.data)==null?void 0:s.region)||""}:t.bootstrap_type===Is.getConversationAndParticipant?{roomId:((o=n.data)==null?void 0:o.roomId)||""}:n.data:Promise.reject(new Error("Failed to fetch TwilioCredentials reason=response empty payload=".concat(Ve(t))))},{defaultRetry:e})}function Ty(t){return t?Date.now()-t>=Rf:!0}function ky(t=""){var i,c,l,u;const e=(c=(i=ve.getState().config)==null?void 0:i.appProps)==null?void 0:c.proxyHost,n=(u=(l=ve.getState().config)==null?void 0:l.appConfig)==null?void 0:u.languageCode,r=k.getState().layoutDirection,s=location.protocol==="https:",o=Qr();let a=t;if(a){const p=["ui_version=2","layout_direction=".concat(r),n?"lang=".concat(n):"",o?"touchpoint_id=".concat(o):""];e&&[["https://api.talkdeskapp.com","".concat(e).concat(Ln.tdGatewayUs)],["https://api.talkdeskapp.eu","".concat(e).concat(Ln.tdGatewayEu)],["https://api.talkdeskappca.com","".concat(e).concat(Ln.tdGatewayCa)],["https://api.talkdeskapp-pubsec.com","".concat(e).concat(Ln.tdGatewayUsFed)]].forEach(([y,g])=>{if(a.indexOf(y)>-1){const v="".concat(s?"https":"http","://").concat(g);a=a.replace(y,v),p.push("proxy_host=".concat(encodeURIComponent(v)))}}),a=a.indexOf("?")>-1?"".concat(a,"&").concat(p.filter(Boolean).join("&")):"".concat(a,"?").concat(p.filter(Boolean).join("&"))}return a}function Pl(t=""){var s;const e=(s=ve.getState().config)==null?void 0:s.appProps,n=Object.values(Lo).indexOf(t||"")>-1?t:Lo.US1,r={region:n};if(e!=null&&e.proxyHost){const o=location.protocol==="https:"?"wss":"ws";r.Twilsock={uri:"".concat(o,"://").concat(e.proxyHost).concat(n===Lo.US1?Ln.twilioUs1:Ln.twilioIe1)}}return r}async function Nl(t,e,n){return Ca(async()=>{try{const{Client:r}=await xe(async()=>{const{Client:s}=await import("./browser-BYuZYzs8.js").then(o=>o.b);return{Client:s}},__vite__mapDeps([0,1]),import.meta.url);return new Promise((s,o)=>{const a=new r(t,e);a.once("initFailed",i=>{var c;a.removeAllListeners(),a.shutdown(),o(new Error("Failed to create twilio client reason=".concat(((c=i==null?void 0:i.error)==null?void 0:c.message)||"unknown error")))}),a.once("stateChanged",i=>{i==="initialized"&&s(a)})})}catch(r){return Promise.reject("Failed to create twilio client reason=".concat(vt(r)))}},{defaultRetry:n})}async function Ey(t){const e=k.getState().createIdentity(),n=await jl({identity:e,bootstrap_type:Is.getAccessToken},t);return n.accessToken?(k.getState().setCredentials({region:n.region,accessToken:n.accessToken,createAccessTokenAt:Date.now()}),k.getState().credentials):Promise.reject(new Error("Failed to fetch twilio access token reason=access token empty"))}async function Ay(t){var m;const{roomId:e,accessToken:n,createAccessTokenAt:r}=k.getState().credentials;let s=!1;if(e)return k.getState().credentials;await Bt.getState().conversationStart();const o=await Bt.getState().getAllConfig(),i={...(m=o==null?void 0:o.data)==null?void 0:m.context,...k.getState().formData},l={identity:k.getState().createIdentity(),custom_fields:i};s=Ty(r),n&&!s&&(l.bootstrap_type=Is.getConversationAndParticipant);const u=await jl(l,t);if(!(u!=null&&u.roomId))return Promise.reject(new Error("Failed to fetch twilio room id reason=no found roomId"));if(!n&&!(u!=null&&u.accessToken))return Promise.reject(new Error("Failed to fetch twilio room id reason=no found accessToken"));n?k.getState().setCredentials(s?{roomId:u.roomId,accessToken:u.accessToken,createAccessTokenAt:Date.now()}:{roomId:u.roomId}):k.getState().setCredentials(u);const p=k.getState().credentials;return yt.getState().emit(Ct.conversationCreated,{identity:k.getState().identity,credentials:p}),p}function Bl(t){var n;const e=t.attributes;if(!(e!=null&&e.isReachabilityMessage)&&!(((n=e==null?void 0:e.action)==null?void 0:n.name)==="digital_interaction_assigned"&&(Im(t),$m(t)))&&!(e!=null&&e.tid&&(e==null?void 0:e.tid)!==""&&He.getState().update(e.tid,Bm(t))))return Cy(t,k.getState().identity)}async function $l(t,e=100){try{if(!t)return Promise.reject(new Error("Failed to fetch all twilio messages reason=no found conversation"));const n=await t.getMessages(e);if(n!=null&&n.items){const r=n.items.map(s=>Bl(s)).filter(Boolean);return He.getState().set(r),r}return Promise.reject(new Error("Failed to fetch all twilio messages sid=".concat(t.sid," reason=empty response")))}catch(n){return Promise.reject(new Error("Failed to fetch all twilio messages sid=".concat(t==null?void 0:t.sid," reason=").concat(vt(n))))}}async function Ol(t){const e=k.getState().identity;try{const r=(await t.getParticipants()).find(s=>s.identity===e);return r||Promise.reject(new Error("Failed to fetch contact person for twilio conversation participant sid=".concat(t.sid," identity=").concat(e," reason=contact person no found")))}catch(n){return Promise.reject(new Error("Failed to fetch contact person for conversation participant sid=".concat(t.sid," identity=").concat(e," reason=").concat(vt(n))))}}function On(t){return t&&Om(t)?t:null}function Ki(t){const e=On(t==null?void 0:t.attributes),n=(e==null?void 0:e.original_interaction_id)||"",r=(e==null?void 0:e.interaction_stage)||"";let s=(e==null?void 0:e.feedback_link)||"",o=!1;return e?(s=ky(s),!r&&s&&(o=!0),r==="END"&&s&&(o=!0),{interactionId:n,feedbackLink:s,interactionStage:r,shouldLoadFeedback:o}):{interactionId:n,feedbackLink:s,interactionStage:r,shouldLoadFeedback:o}}function Ly(t){const e=On(t==null?void 0:t.attributes);return e?{selfClosed:(e==null?void 0:e.update_reasons)===sa,bootstrapped:!!(e!=null&&e.bootstrapped)}:{selfClosed:!1,bootstrapped:!1}}function Iy(t){var e;return((e=t.state)==null?void 0:e.current)==="active"}function Ry({instance:t,selfClosed:e,shouldLoadFeedback:n}){return!!(!Iy(t)||e||n)}function jy(t){return Ca(async()=>{try{return await t.updateAttributes(Object.assign(On(t==null?void 0:t.attributes)||{},{bootstrapped:!0})),!0}catch(e){return Promise.reject(new Error("Failed to trigger flow for twilio participant sid=".concat(t.sid," reason=").concat(vt(e))))}},{defaultRetry:3})}async function Py(t){const e=await Ol(t);if(!e)return Promise.reject(new Error("Failed to fetch contact person participant reason=no found"));const n=await e.getUser();if(!n)return Promise.reject(new Error("Failed to fetch contact person user reason=no found"));const r=On(e==null?void 0:e.attributes)||{},s=On(n==null?void 0:n.attributes)||{};return await Promise.all([e.updateAttributes({...r,update_reasons:sa}),n.updateAttributes({...s,update_reasons:sa})]),!0}function Bo(t,e){He.getState().update(e,{status:"failure",resend:async()=>{k.getState().isNot("conversation")||(He.getState().remove(e),await Ss.sendMessage(t))}})}async function Ny(t){var e,n;try{let r=Date.now(),s=Date.now();t.shouldFetchAccessToken&&(await Ey(0),r=Date.now()-r,yt.getState().emit(Ct.preloadClient,{identity:k.getState().identity,credentials:k.getState().credentials}));const o=await Nl(k.getState().credentials.accessToken,Pl(k.getState().credentials.region),0);return s=Date.now()-s,(e=t==null?void 0:t.onResolve)==null||e.call(t,{fetchAccessTokenDuration:r,connectClientDuration:s}),{client:o}}catch(r){return(n=t==null?void 0:t.onReject)==null||n.call(t,r),{error:r}}}async function By(t,e){try{return await t.peekConversationBySid(e)}catch(n){return Promise.reject(new Error("Failed to fetch twilio conversation sid=".concat(e," reason=").concat(vt(n))))}}const Yn=ut.getSubLogger({name:"TwilioClient"});class $y{constructor(e){de(this,"_retryConfiguration",{fetchProviderRoomId:2,createProviderClient:3,connectProviderClient:0});de(this,"_preloadClientPromise",null);de(this,"_providerClient",null);de(this,"_bindEventsHandlers",null);de(this,"_preloadClientData",null);this.parent=e}handleOnStateChanged(e){Yn.info("client changed state=".concat(e," conversationEnded=").concat(this.parent.conversation.isEnd)),!this.parent.conversation.isEnd&&(e==="connected"?(this.parent.status="activated",k.getState().emit("reconnect"),$l(this.parent.conversation.current).catch(n=>Yn.warn("Failed to fetch messages after reconnect error=".concat(vt(n))))):(this.parent.status="deactivated",k.getState().emit("disconnect")))}handleOnTokenExpired(){Yn.warn("client token expired"),k.getState().isNot(Ee.Error)&&(k.getState().go(Ee.Error),this.parent.destroy())}listenerEvents(){if(this._providerClient&&!this._bindEventsHandlers){const e=this.handleOnStateChanged.bind(this),n=this.handleOnTokenExpired.bind(this);this._bindEventsHandlers=()=>{var r,s;(r=this._providerClient)==null||r.off("connectionStateChanged",e),(s=this._providerClient)==null||s.off("tokenExpired",n)},this._providerClient.on("connectionStateChanged",e),this._providerClient.on("tokenExpired",n)}}async preload(e){if(!k.getState().credentials.roomId){if(this._preloadClientPromise&&e==="tabEvent"){const n=await this._preloadClientPromise;if(n!=null&&n.client){await n.client.updateToken(k.getState().credentials.accessToken),Yn.debug("Success update twilio token for preload client scene=".concat(e));return}}this._preloadClientPromise||(this._preloadClientPromise=Ny({shouldFetchAccessToken:e!=="tabEvent",onResolve:n=>{this._preloadClientData=n}})),await this._preloadClientPromise}}async bootstrap(e,n){var s,o;const r=Yn.startChildSpan("Bootstrap",n);try{if(this._preloadClientPromise){const l=await this._preloadClientPromise;l!=null&&l.client&&(this._providerClient=l.client),r==null||r.setAttributes({preloadFetchAccessTokenDuration:((s=this._preloadClientData)==null?void 0:s.fetchAccessTokenDuration)||0,preloadConnectClientDuration:((o=this._preloadClientData)==null?void 0:o.connectClientDuration)||0,preloadProviderConnectClientError:vt(l==null?void 0:l.error)})}const a=Date.now(),{accessToken:i,region:c}=await Ay(this._retryConfiguration.fetchProviderRoomId);if(r==null||r.setAttributes({fetchTwilioRoomIdDuration:Date.now()-a}),this._providerClient)await this._providerClient.updateToken(i),Yn.debug("Success update twilio client token for connect client");else{const l=Date.now(),u=e==="pageLoaded"?this._retryConfiguration.connectProviderClient:this._retryConfiguration.createProviderClient;this._providerClient=await Nl(i,Pl(c),u),r==null||r.setAttributes({connectProviderClientDuration:Date.now()-l})}return this.listenerEvents(),r==null||r.setStatus({code:1}),r==null||r.end(),this._providerClient}catch(a){throw r==null||r.recordException(a),r==null||r.setStatus({code:2,message:vt(a)}),r==null||r.end(),a}}destroy(){var e,n,r;(e=this._bindEventsHandlers)==null||e.call(this),this._bindEventsHandlers=null,(n=this._providerClient)==null||n.removeAllListeners(),(r=this._providerClient)==null||r.shutdown(),this._providerClient=null,this._preloadClientPromise=null,this._preloadClientData=null}get current(){return this._providerClient}}const on=ut.getSubLogger({name:"TwilioConversation"});class Oy{constructor(e){de(this,"_providerConversation",null);de(this,"_contactPersonParticipant",null);de(this,"_bindEventsHandlers",null);de(this,"_isEnd",!1);this.parent=e}handleOnUpdated(e){const{conversation:n,updateReasons:r}=e,{interactionId:s,feedbackLink:o,shouldLoadFeedback:a}=Ki(n),i={};!k.getState().interactionId&&s&&(i.interactionId=s),!k.getState().shouldLoadFeedback&&a&&(i.shouldLoadFeedback=a),!k.getState().feedbackLink&&o&&(i.feedbackLink=o),Object.keys(i).length>0&&k.setState(i),a&&k.getState().isNot(Ee.End)&&k.getState().go(Ee.End),on.info("Received updated sid=".concat(n.sid," updateReasons=").concat(Ve(r)," attrs=").concat(Ve(n==null?void 0:n.attributes)," updatedAppState=").concat(Ve(i)))}handleOnMessageAdded(e){var r,s,o,a,i,c,l;on.info("Received message added. sid=".concat((r=this._providerConversation)==null?void 0:r.sid," m_sid=").concat(e.sid," p_sid=").concat(e.participantSid," index=").concat(e.index," type=").concat(e.type," author=").concat(e.author," attr=").concat(Ve(On(e==null?void 0:e.attributes)?Ns(On(e==null?void 0:e.attributes),["raw_message","rawMessage","attachments"]):"")," create_at=").concat((s=e.dateCreated)==null?void 0:s.toISOString()," update_at=").concat((o=e.dateUpdated)==null?void 0:o.toISOString()));const n=Bl(e);if(n){He.getState().add(n);const u=n.alignment;u&&(k.getState().hiddenScreenLoading(),(a=this.parent)!=null&&a.receivedFirstMessageSpan&&(this.parent.receivedFirstMessageSpan.setAttributes({roomId:(i=this._providerConversation)==null?void 0:i.sid,m_sid:e==null?void 0:e.sid,p_sid:(e==null?void 0:e.participantSid)||"",index:e==null?void 0:e.index,type:e==null?void 0:e.type,author:(e==null?void 0:e.author)||"",attributes:Ve(e==null?void 0:e.attributes),create_at:(c=e.dateCreated)==null?void 0:c.toISOString(),update_at:(l=e.dateUpdated)==null?void 0:l.toISOString()}),this.parent.receivedFirstMessageSpan.setStatus({code:1}),this.parent.receivedFirstMessageSpan.end(),this.parent.receivedFirstMessageSpan=null)),u&&!$a(n.tid)&&He.getState().hideTypingMessage()}}handleOnTypingStarted(e){var r;!Dl(ve.getState()).showTypingIndicatorButton||!this._contactPersonParticipant||e.sid!==this._contactPersonParticipant.sid&&He.getState().add(Qo({role:"agent",agentName:(r=e==null?void 0:e.attributes)==null?void 0:r.participant_display_name}))}handleOnTypingEnded(e){this._contactPersonParticipant&&e.sid!==this._contactPersonParticipant.sid&&He.getState().hideTypingMessage()}handleOnRemoved(e){on.info("Received conversation removed sid=".concat(e.sid)),k.getState().isNot(Ee.End)&&k.getState().go(Ee.End)}listenerEvents(){if(this._providerConversation&&!this._bindEventsHandlers){const e=this.handleOnUpdated.bind(this),n=this.handleOnMessageAdded.bind(this),r=this.handleOnTypingStarted.bind(this),s=this.handleOnTypingEnded.bind(this),o=this.handleOnRemoved.bind(this);this._bindEventsHandlers=()=>{var a,i,c,l,u;(a=this._providerConversation)==null||a.off("updated",e),(i=this._providerConversation)==null||i.off("messageAdded",n),(c=this._providerConversation)==null||c.off("typingStarted",r),(l=this._providerConversation)==null||l.off("typingEnded",s),(u=this._providerConversation)==null||u.off("removed",o)},this._providerConversation.on("updated",e),this._providerConversation.on("messageAdded",n),this._providerConversation.on("typingStarted",r),this._providerConversation.on("typingEnded",s),this._providerConversation.on("removed",o)}}async bootstrap(e,n){const r=this.parent.client.current,s=k.getState().credentials.roomId,o=["pageLoaded","sendMessage","submitInitialScreen"].indexOf(e)>-1;if(!r||!s)throw new Error("No found twilio client or conversation sid");const a=on.startChildSpan("Bootstrap",n);try{const i=Date.now();this._providerConversation=await By(r,s),this.listenerEvents(),a==null||a.setAttributes({fetchTwilioConversationDuration:Date.now()-i});const c=Date.now();this._contactPersonParticipant=await Ol(this._providerConversation),a==null||a.setAttributes({fetchContactPersonTwilioParticipantDuration:Date.now()-c});const{interactionId:l,feedbackLink:u,shouldLoadFeedback:p}=Ki(this._providerConversation),{selfClosed:m,bootstrapped:y}=Ly(this._contactPersonParticipant);if(k.setState({interactionId:l,feedbackLink:u,shouldLoadFeedback:p}),this._isEnd=Ry({instance:this._providerConversation,selfClosed:m,shouldLoadFeedback:p}),!this._isEnd&&!y&&o){const w=Date.now();await jy(this._contactPersonParticipant),a==null||a.setAttributes({updateContactPersonParticipantDuration:Date.now()-w}),on.debug("Success trigger flow for update contact person attr")}const g=this._isEnd?Ee.End:Ee.Conversation,v=Date.now();return await $l(this._providerConversation),a==null||a.setAttributes({fetchTwilioAllMessagesDuration:Date.now()-v}),k.getState().isNot(g)&&k.getState().go(g),a==null||a.setStatus({code:1}),a==null||a.end(),!0}catch(i){throw a==null||a.recordException(i),a==null||a.setStatus({code:2,message:vt(i)}),a==null||a.end(),i}}typing(){return this._providerConversation?this._providerConversation.typing():Promise.resolve()}async end(){var n;const e=on.startSpan("End");if(!this._providerConversation){const r="Failed to end conversation no found conversation";return e==null||e.recordException(new Error(r)),e==null||e.setStatus({code:2,message:r}),e==null||e.end(),on.debug(r),!1}try{return await Py(this._providerConversation),this._isEnd=!0,yt.getState().emit(Ct.conversationEnded),k.getState().enableLoadFeedback(),e==null||e.setStatus({code:1}),e==null||e.end(),(n=ve.getState().config)!=null&&n.feedbackFlowId&&await Oc(1500),!0}catch(r){const s="Failed to end conversation sid=".concat(this._providerConversation.sid," error=").concat(vt(r));return e==null||e.recordException(r),e==null||e.setStatus({code:2,message:s}),e==null||e.end(),on.debug(s),!1}}async send(e,n){if(!this._providerConversation)return Promise.reject(new Error("No found conversation"));const{payload:r,data:s}=e,o=r?{tid:n,payload:r,payload_type:"payload"}:{tid:n};await this._providerConversation.sendMessage(s,o)}destroy(){var e,n;(e=this._bindEventsHandlers)==null||e.call(this),this._bindEventsHandlers=null,(n=this._providerConversation)==null||n.removeAllListeners(),this._providerConversation=null,this._contactPersonParticipant=null,this._isEnd=!1}get current(){return this._providerConversation}get isEnd(){return this._isEnd}}const Kn=ut.getSubLogger({name:"TwilioConnection"});class My{constructor(){de(this,"_client");de(this,"_conversation");de(this,"_status","deactivated");de(this,"_bootstrapPromise",null);de(this,"_receivedFirstMessageSpan",null);this._client=new $y(this),this._conversation=new Oy(this)}handlerOnBootstrapError(e,n){const r=vt(e),s="Failed to bootstrap twilio connection sid=".concat(k.getState().credentials.roomId," error=").concat(r);k.getState().hiddenScreenLoading(),n==null||n.recordException(e),n==null||n.setStatus({code:2,message:s}),n==null||n.end(),Kn.debug(s);const o=/Twilsock: request timeout/gi.test(r);return k.getState().is(k.getState().getInitialPage())&&o||k.getState().isNot(Ee.Error)&&(k.getState().go(Ee.Error),yt.getState().emit(Ct.conversationEndedByError)),!1}linkReceivedFirstMessageSpanToBootstrap(e,n){var r,s;if(["sendMessage","submitInitialScreen"].indexOf(e)>-1){this.receivedFirstMessageSpan=Kn.startSpan("Received first message for ".concat(e));const o=n==null?void 0:n.spanContext(),a=(r=this.receivedFirstMessageSpan)==null?void 0:r.spanContext();o&&((s=this.receivedFirstMessageSpan)==null||s.addLink({context:o})),a&&(n==null||n.addLink({context:a}))}}async bootstrap(e){var r;const n=Kn.startSpan("Bootstrap for ".concat(e));this.linkReceivedFirstMessageSpanToBootstrap(e,n);try{return await this._client.bootstrap(e,n),await this._conversation.bootstrap(e,n),k.setState({hasInitialized:!0}),this.status="activated",n==null||n.setAttributes({roomId:(r=this._conversation.current)==null?void 0:r.sid}),n==null||n.setStatus({code:1}),n==null||n.end(),!0}catch(s){return this.handlerOnBootstrapError(s,n)}}preloadClient(e){return this._client.preload(e)}async init(e){if(!!!k.getState().credentials.roomId&&e==="pageLoaded"){const r=k.getState().getInitialPage();return k.getState().isNot(r)&&k.getState().go(r),!1}return this._bootstrapPromise||(this._bootstrapPromise=this.bootstrap(e)),await this._bootstrapPromise}async send(e,n){try{return this._bootstrapPromise?await this._bootstrapPromise?(await this._conversation.send(e,n),k.getState().emit("send_success"),He.getState().showTypingMessage(),!0):(Kn.debug("Failed to send message error=connection bootstrap failed"),Bo(e,n),!1):(Kn.debug("Failed to send message error=no start connection bootstrap"),Bo(e,n),!1)}catch(r){return Kn.warn("Failed to send message error=".concat(vt(r))),k.getState().emit("send_failure",r),Bo(e,n),!1}}typing(){return this._conversation.typing()}async end(){return this._conversation.end()}destroy(){this._conversation.destroy(),this._client.destroy(),this._bootstrapPromise=null,this._status="deactivated",this.receivedFirstMessageSpan=null,He.getState().clear(),k.getState().reset(["hasInitialized","credentials","identity","shouldLoadFeedback","feedbackLink","feedbackStatus","formData","interactionId","chatContentScroll","initialScreenScroll"])}set status(e){this._status!==e&&(this._status=e)}get status(){return this._status}get client(){return this._client}get conversation(){return this._conversation}get receivedFirstMessageSpan(){return this._receivedFirstMessageSpan}set receivedFirstMessageSpan(e){this._receivedFirstMessageSpan=e}}const Dy=new My;class Fy{constructor(){de(this,"_current",null);de(this,"_providerImps",{[ki.twilio]:Dy});this._current=ki.twilio}listenerPageEvents(){k.getState().on("enter_error",()=>{this.clear()})}listenerTabEvents(){yt.getState().on(Ct.preloadClient,e=>{const{credentials:n,identity:r}=e;k.getState().setCredentials({accessToken:n.accessToken,region:n.region,createAccessTokenAt:n.createAccessTokenAt}),k.getState().createIdentity(!0,r),this.preloadClient("tabEvent")}),yt.getState().on(Ct.conversationCreated,e=>{const{credentials:n,identity:r}=e;k.getState().setCredentials(n),k.getState().createIdentity(!0,r),k.getState().isNot(Ee.Conversation)&&k.getState().go(Ee.Conversation),this.init("tabEvent")}),yt.getState().on(Ct.conversationEnded,()=>{k.getState().enableLoadFeedback(),k.getState().isNot(Ee.End)&&k.getState().go(Ee.End)}),yt.getState().on(Ct.conversationEndedByError,()=>{k.getState().isNot(Ee.Error)&&k.getState().go(Ee.Error)}),yt.getState().on(Ct.resetFrame,()=>{const e=k.getState().getInitialPage();k.getState().isNot(e)&&(k.getState().go(e),this.clear())}),yt.getState().on(Ct.enableScreenLoading,e=>{k.getState().enableScreenLoading(e,!1)})}preloadClient(e){var n;if((n=ve.getState().config)!=null&&n.enableSplitTwilioBootstrap&&this.connection)return this.connection.preloadClient(e)}async init(e){return this.connection?this.connection.init(e):!1}clear(){if(this.connection)return this.connection.destroy()}async sendMessage(e){if(this.connection){if(k.getState().isNot("conversation"))return!1;k.getState().hasInitialized||this.init("sendMessage");const{data:n,type:r}=e,s=n instanceof FormData,o=Pc(),a=s&&Object.values(Uf).indexOf(r)>-1;if(!s||a){const i=s?Pm(o,n,r,{role:"contact"}):Nm(o,n,{role:"contact"});He.getState().add(i)}return this.connection.send(e,o)}return!1}typing(){if(this.connection)return this.connection.typing()}async end(){return this.connection?this.connection.end():!1}get status(){return this.connection?this.connection.status:"deactivated"}get connection(){return this._current?this._providerImps[this._current]:null}}const Ss=new Fy;let _s=null;const Vy="td-message-".concat(Qr()||"unknown-touchpoint-id"),He=_r()(Ic(Rc((t,e)=>({lastReadIndexByConversationSid:{},assigneeNamesByConversationSid:{},messages:[],add:n=>{const{messages:r,lastReadIndexByConversationSid:s}=e(),o=k.getState().credentials.roomId,{sid:a,tid:i,alignment:c,index:l}=n;if(a!==""&&r.find(p=>p.sid===a)||i!==""&&r.find(p=>p.tid===i))return;const u={lastReadIndexByConversationSid:s,messages:r};o&&l!==void 0&&c==="received"&&k.getState().isFrameOpened&&(u.lastReadIndexByConversationSid[o]=l),u.messages=[...r,n],t(u)},set:n=>{const{messages:r,lastReadIndexByConversationSid:s}=e(),o=k.getState().credentials.roomId;if(o){let a=-1;const i=n.map(l=>{const{sid:u,tid:p,alignment:m,index:y}=l;if(!(u!==""&&r.find(g=>g.sid===u))&&!(p!==""&&r.find(g=>g.tid===p)))return o&&y!==void 0&&m==="received"&&k.getState().isFrameOpened&&(a=y),l}).filter(Boolean),c={lastReadIndexByConversationSid:s,messages:r};a>-1&&(c.lastReadIndexByConversationSid[o]=a),i.length&&(c.messages=[...r,...i]),t(c)}},clear:()=>{const{lastReadIndexByConversationSid:n,assigneeNamesByConversationSid:r}=e(),s=k.getState().credentials.roomId;t({messages:[],lastReadIndexByConversationSid:Ns(n,s),assigneeNamesByConversationSid:Ns(r,s)})},update:(n,r)=>{if(n==="")return!1;const s=[...e().messages],o=s.findIndex(a=>a.tid===n);return o>-1?(s[o]=Object.assign({...s[o]},r),t({messages:s}),!0):!1},batchUpdate:(n,r)=>{const s=e().messages.map(o=>n(o)?Object.assign(o,r):o);t({messages:s})},remove:n=>{if(n==="")return!1;const r=[...e().messages],s=r.findIndex(o=>o.tid===n);return s>-1?(r.splice(s,1),t({messages:r}),!0):!1},send:async n=>{await Ss.sendMessage(n)},end:async()=>await Ss.end(),updateLastReadIndex:()=>{const{messages:n,lastReadIndexByConversationSid:r}=e(),s=k.getState().credentials.roomId;if(s){const o=n.filter(i=>i.alignment==="received").flatMap(i=>i.items.map(c=>({...c,index:i.index}))),a=o[o.length-1]||{index:-1};(a==null?void 0:a.index)!==void 0&&t({lastReadIndexByConversationSid:{...r,[s]:a.index}})}},typing:async()=>{await Ss.typing()},showTypingMessage:()=>{if(!Dl(ve.getState()).showTypingIndicatorButton)return;const{messages:r,add:s,hideTypingMessage:o}=e(),a=k.getState().typingMode,i=r.find(({tid:c})=>$a(c));if(a==="va"){_s&&clearTimeout(_s),i&&o(),s(Qo({role:"va"})),_s=setTimeout(()=>{o(),_s=null},5e3);return}a==="agent"&&i&&(o(),s(Qo({role:"agent"})))},hideTypingMessage:()=>{const{remove:n}=e();jm(r=>n(r))},setAssigneeName:(n,r)=>{if(!n)return"";const s=k.getState().credentials.roomId,o=e().assigneeNamesByConversationSid;s&&(o[s]||(o[s]={}),o[s][n]=r,t({assigneeNamesByConversationSid:o}))},getAssigneeName:n=>{var o;if(!n)return"";const{assigneeNamesByConversationSid:r}=e(),s=k.getState().credentials.roomId;return((o=r[s])==null?void 0:o[n])||""}}),{name:Vy,partialize:t=>({assigneeNamesByConversationSid:t.assigneeNamesByConversationSid,lastReadIndexByConversationSid:t.lastReadIndexByConversationSid})}))),Hy=t=>t.messages,Uy=t=>({set:t.set,add:t.add,send:t.send,clear:t.clear,update:t.update,remove:t.remove,batchUpdate:t.batchUpdate,end:t.end,updateLastReadIndex:t.updateLastReadIndex,typing:t.typing,showTypingMessage:t.showTypingMessage,hideTypingMessage:t.hideTypingMessage,getAssigneeName:t.getAssigneeName,setAssigneeName:t.setAssigneeName}),zy=t=>{const{messages:e}=t;return e.length?e.reduce((r,s)=>s.alignment==="received"&&!$a(s.tid)?s:r,{}).role!=="va"?"agent":"va":"agent"},$S=()=>He(Mn(Hy)),Fa=()=>He(Mn(Uy));He.subscribe(zy,async t=>{k.setState({typingMode:t})});const Bt=_r(()=>{const t=new al({name:"Widget",sender:window.parent,topic:Fe.Topic,debug:!1});t.register(Fe.Methods.FrameOpened,()=>{k.getState().setIsFrameOpened(!0)}),t.register(Fe.Methods.UpdateAppConfigs,n=>{Zs.getState().update(n)}),t.register(Fe.Methods.UpdateContext,n=>{Zs.getState().updateContext(n)}),t.register(Fe.Methods.UpdateMessage,n=>{console.log(n),He.getState().clear(),n.length&&n.forEach(r=>He.getState().add(r))});const e=async()=>{const n=await t.trigger(Fe.Methods.GetTdAccessToken);return n!=null&&n.data?(k.getState().setCredentials({tdAccessToken:n.data}),n.data):""};return{frameReady:()=>t.trigger(Fe.Methods.FrameReady),frameResize:n=>t.trigger(Fe.Methods.FrameResize,n),maximize:()=>t.trigger(Fe.Methods.Maximize),minimize:async()=>{const n=await t.trigger(Fe.Methods.Minimize);return k.getState().setIsFrameOpened(!1),n},getAllConfig:()=>t.trigger(Fe.Methods.GetAllConfig),getCredentials:n=>t.trigger(Fe.Methods.GetCredentials,n),setBadge:n=>t.trigger(Fe.Methods.SetBadge,n),downloadTranscript:async n=>{const r=a=>{const i="".concat(ir.t("downloadTranscriptFileName"),"-").concat(Tm(new Date,"YYYY-MM-DD-HH-mm"),".txt"),c=km();return t.trigger(Fe.Methods.DownloadTranscript,{token:a,interactionId:n,fileName:i,timezone:c})};let s=k.getState().credentials.tdAccessToken;s||(s=await e());const o=await r(s);return o!=null&&o.data?o:(s=await e(),r(s))},previewReady:async()=>{await t.trigger(Fe.Methods.PreviewReady)},onPreviewConfigChange:n=>{t.register(Fe.Methods.UpdatePreviewConfig,r=>{n(r)})},conversationStart:()=>t.trigger(Fe.Methods.ConversationStart),onSend:n=>{t.trigger(Fe.Methods.OnSend,n)},onComposer:(...n)=>{t.trigger(Fe.Methods.OnComposer,...n)}}}),Zy=()=>Bt(Mn(t=>({maximize:t.maximize,frameResize:t.frameResize,onSend:t.onSend,onComposer:t.onComposer}))),Ml=_r((t,e)=>({page:"Conversation",config:new ln,reset:()=>{t({config:new ln})},init:async()=>{Bt.getState().onPreviewConfigChange(r=>{var l,u;const{title:s,description:o,logoUrl:a}=((l=r==null?void 0:r.widgetSettings)==null?void 0:l.appearance)||{},i=new ln().options;t(p=>({page:r.page,config:{...p.config,appearanceConfig:{...p.config.appearanceConfig,...r.widgetSettings},options:{...new ln().options,...e().config.options,chatTitle:s||(i==null?void 0:i.chatTitle),chatSubtitle:o||i.chatSubtitle,chatTitleIcon:a||i.chatTitleIcon},participantName:r.userName}}));const c=$s(ol((u=r==null?void 0:r.widgetSettings)==null?void 0:u.appearance));Go(document.documentElement,c)});const n=await Bt.getState().getAllConfig();if(n!=null&&n.data){const{appProps:r,appConfig:s,context:o,touchpoint:a,participantName:i}=n.data,c=new ln;await Rs.changeLanguage(s==null?void 0:s.languageCode),c.appConfig={...e().config.appConfig,...s},c.appProps=r,c.context=o,c.participantName=i;try{a.config&&(c.appearanceConfig=JSON.parse(a.config))}catch(u){console.log("Error parsing appearance config, using default appearance config")}c.options={...e().config.options,...Xo(s==null?void 0:s.styles)},c.styles=(s==null?void 0:s.styles)||{},t({config:c});const l=$s(s==null?void 0:s.styles);Go(document.documentElement,l),await Bt.getState().previewReady()}},update:()=>Promise.resolve(),updateContext:()=>{}})),OS=()=>Ml(Mn(t=>({page:t.page,chatTitle:t.config.options.chatTitle,chatSubtitle:t.config.options.chatSubtitle,enableEmoji:t.config.appConfig.enableEmoji,enableAttachments:t.config.appConfig.enableAttachments,enableValidation:t.config.appConfig.enableValidation,welcomeMessage:t.config.appearanceConfig.initialScreen.welcomeMessage,showInitialScreen:t.config.appearanceConfig.initialScreen.showInitialScreen,controls:t.config.appearanceConfig.initialScreen.controls,showCloseConversationButton:t.config.appearanceConfig.generalSettings.showCloseConversationButton,showDownloadTranscriptButton:t.config.appearanceConfig.generalSettings.showChatTranscriptsDownloadButton,showTypingIndicatorButton:t.config.appearanceConfig.generalSettings.showTypingIndicatorButton,context:t.config.context,isDisabled:t.page==="InitialScreen"&&!t.config.appearanceConfig.initialScreen.showInitialScreen}))),vs=ut.getSubLogger({name:"useConfig"}),Zs=_r((t,e)=>{let n=!1;return{config:new ln,reset:()=>{t({config:new ln}),n=!1},init:async()=>{var s,o;if(n)return;n=!0;const r=await Bt.getState().getAllConfig();if(r!=null&&r.data){er.init(r.data);const{appProps:a,appConfig:i,touchpoint:c,context:l,injectorWindowHostname:u}=r.data,p=new ln,m=await Rs.changeLanguage(i==null?void 0:i.languageCode);p.injectorWindowHostname=u,p.enableSplitTwilioBootstrap=c.enable_split_twilio_bootstrap,p.feedbackFlowId=c.feedback_flow_id,p.appConfig={...e().config.appConfig,...i,languageCode:m},p.appProps=a,p.context=l,p.appearanceConfig=$c(c.config,p.appearanceConfig,g=>{vs.error("Error parsing touchpoint appearance config",g)}),p.styles=$s(i.styles),p.options={...e().config.options,...Object.assign(Vi((s=p==null?void 0:p.appearanceConfig)==null?void 0:s.appearance),Xo(i.styles))},t({config:p});const y=ol((o=p==null?void 0:p.appearanceConfig)==null?void 0:o.appearance,$s(i.styles));Go(document.documentElement,y),vs.info("Received configuration: touchpointId=".concat(a==null?void 0:a.touchpointId," appConfig=").concat(Ve(i)," appProps=").concat(Ve(a)," touchpoint=").concat(Ve(c))),k.setState({enableInitialForm:p.appearanceConfig.initialScreen.showInitialScreen}),k.getState().setLayoutDirection(m)}},update:async({appConfig:r})=>{var a;if(!n){vs.warn("Update app configs failed because the config is not initialized yet.");return}const{config:s}=e(),o=await Rs.changeLanguage(r==null?void 0:r.languageCode);s.appConfig={...s.appConfig,...r,languageCode:o},s.options={...s.options,...Object.assign(Vi((a=s==null?void 0:s.appearanceConfig)==null?void 0:a.appearance),Xo(r.styles))},t({config:s}),k.getState().setLayoutDirection(o)},updateContext:r=>{n||vs.warn("Update context failed because the config is not initialized yet.");const{config:s}=e();s.context={...r},t({config:s})}}}),Wy=()=>Zs(Mn(t=>({chatTitle:t.config.options.chatTitle,chatSubtitle:t.config.options.chatSubtitle,enableEmoji:t.config.appConfig.enableEmoji,enableAttachments:t.config.appConfig.enableAttachments,enableValidation:t.config.appConfig.enableValidation,enableUserInput:t.config.appConfig.enableUserInput,showInitialScreen:t.config.appearanceConfig.initialScreen.showInitialScreen,welcomeMessage:t.config.appearanceConfig.initialScreen.welcomeMessage,controls:t.config.appearanceConfig.initialScreen.controls,showCloseConversationButton:t.config.appearanceConfig.generalSettings.showCloseConversationButton,showDownloadTranscriptButton:t.config.appearanceConfig.generalSettings.showChatTranscriptsDownloadButton,showTypingIndicatorButton:t.config.appearanceConfig.generalSettings.showTypingIndicatorButton,context:t.config.context,languageCode:t.config.appConfig.languageCode}))),Gy=t=>t.config.appProps,qy=t=>t.config.styles,wt=t=>t.config.options,Yy=t=>t.config.appearanceConfig.initialScreen,Ky=t=>t.config.appearanceConfig.chat,Dl=t=>t.config.appearanceConfig.generalSettings,ve=/preview.html/gi.test(window.location.href)?Ml:Zs,MS=()=>ve(Yy),DS=()=>ve(Gy),FS=()=>ve(qy);function $o(){return{showScreenLoading:!1,layoutDirection:jr.ltr,page:Ee.Start,events:{},enableInitialForm:!1,formData:null,hasInitialized:!1,userInputAreaRef:null,interactionId:"",shouldLoadFeedback:!1,feedbackLink:"",feedbackStatus:{status:"init",message:"",height:0},typingMode:"agent",isFrameOpened:!1,identity:"",credentials:{accessToken:"",roomId:"",region:"",tdAccessToken:""},chatContentScroll:{top:0,percent:0,scrollOffset:0},initialScreenScroll:{top:0,percent:0,scrollOffset:0},initialScreenHeight:Nc}}const Oo=ut.getSubLogger({name:"useApp"}),Jy="td-app-".concat(Qr()||"unknown-touchpoint-id");let Ar=null;const k=_r()(Ic(Rc((t,e)=>({...$o(),go:(n,r)=>{var a,i,c;const{page:s,events:o}=e();if(s!==n){const l="leave_".concat(s),u="enter_".concat(n),p="".concat(s,"_to_").concat(n);(a=o[l])==null||a.forEach(m=>m(r)),t({page:n}),(i=o[u])==null||i.forEach(m=>m(r)),(c=o[p])==null||c.forEach(m=>m(r)),Oo.debug("Going from ".concat(s," to ").concat(n," with params=").concat(Ve(r!=null?r:{})))}else Oo.debug("Going to same ".concat(n," with params=").concat(Ve(r!=null?r:{})))},getInitialPage:()=>{const{enableInitialForm:n}=e();return n?Ee.InitialScreen:Ee.Conversation},is:n=>(Array.isArray(n)?n:[n]).includes(e().page),isNot:n=>!(Array.isArray(n)?n:[n]).includes(e().page),on:(n,r)=>{t(s=>{var o;return s.events[n]||(s.events[n]=[]),(o=s.events[n])==null||o.push(r),s})},off:(n,r)=>{const{events:s}=e();s[n]&&t(o=>{var a;return o.events[n]=(a=s[n])==null?void 0:a.filter(i=>i!==r),o})},reset:n=>{if(n){const r=Array.isArray(n)?n:[n],s=$o(),o=r.reduce((a,i)=>({...a,[i]:s[i]}),{});t(o)}else t($o())},emit:(n,r)=>{var o;const{events:s}=e();s[n]&&((o=s[n])==null||o.forEach(a=>a(r)))},focusUserInputArea:()=>{const{userInputAreaRef:n}=e();n==null||n.focus()},setIsFrameOpened:n=>{t({isFrameOpened:n})},createIdentity:(n=!1,r="")=>{var o;let s=e().identity;return(n||!s)&&(s=n&&r?r:"widget.".concat((o=ve.getState().config)==null?void 0:o.injectorWindowHostname,"-").concat(Pc()),t({identity:s})),s},setCredentials:n=>{const r={...e().credentials,...n};return t({credentials:r}),r},hasProviderCredentials:()=>{const{accessToken:n,roomId:r}=e().credentials;return!!(n&&r)},setFormData:n=>{t({formData:n})},setLayoutDirection:n=>{const{layoutDirection:r}=e(),s=jf.indexOf(n)>-1?jr.rtl:jr.ltr;r!==s&&t({layoutDirection:s})},hiddenScreenLoading:()=>{Ar&&(clearTimeout(Ar),Ar=null),e().showScreenLoading&&t({showScreenLoading:!1})},enableScreenLoading:(n,r=!1)=>{e().showScreenLoading||(t({showScreenLoading:!0}),r&&yt.getState().emit(Ct.enableScreenLoading,n),Ar=setTimeout(()=>{t({showScreenLoading:!1}),Ar=null},n))},updateChatContentScroll:n=>{t({chatContentScroll:n})},updateInitialScreenScroll:n=>{t({initialScreenScroll:n})},updateInitialScreenHeight:n=>{t({initialScreenHeight:n})},updateFeedbackStatus:n=>{Oo.info("Received feedback page message current=".concat(Ve(n)," prev=").concat(Ve(e().feedbackStatus))),t({feedbackStatus:n})},enableLoadFeedback:()=>{e().shouldLoadFeedback||t({shouldLoadFeedback:!0})}}),{name:Jy,partialize:t=>Qr()?{isFrameOpened:t.isFrameOpened,credentials:t.credentials,identity:t.identity}:{}})));function Fl(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=Fl(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Yt(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=Fl(t))&&(r&&(r+=" "),r+=e);return r}const Xy="_AvatarBox_15kim_11",Ji={AvatarBox:Xy},Qy=T.lazy(()=>xe(()=>import("./DefaultAgentAvatarIcon-BvykMufc.js"),__vite__mapDeps([2,1,3,4]),import.meta.url)),e_=T.lazy(()=>xe(()=>import("./DefaultAvatarIcon-lbn3a-tz.js"),__vite__mapDeps([5,1,3,4]),import.meta.url)),Vl=({url:t,className:e,type:n="system"})=>t?f.jsx("div",{className:Yt(Ji.AvatarBox,e),"data-testid":"avatar",style:{background:"url(".concat(t,") center center / cover no-repeat")}}):f.jsx("div",{className:Yt(Ji.AvatarBox,e),"data-testid":"avatar",children:n==="agent"?f.jsx(T.Suspense,{children:f.jsx(Qy,{})}):f.jsx(T.Suspense,{children:f.jsx(e_,{})})}),t_="static-bottom-area";function n_(){return f.jsx("div",{id:t_})}const r_=()=>xe(()=>import("./Buttons-Br6owuiq.js"),__vite__mapDeps([6,1,7]),import.meta.url),s_=T.lazy(r_),o_=()=>xe(()=>import("./Carousel-RQrLSTK8.js"),__vite__mapDeps([8,1,7,9]),import.meta.url),a_=T.lazy(o_);class Hl extends T.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,n){var r,s;(s=(r=this.props).onError)==null||s.call(r,e,n),this.setState({hasError:!0})}render(){return this.state.hasError?this.props.fallback:this.props.children}}const i_="_skeleton_nc38p_6",c_={skeleton:i_,"gradient-background":"_gradient-background_nc38p_1"},Xi=t=>{const{width:e="240px",height:n="36px",animation:r,className:s,children:o}=t;return f.jsx("div",{className:Yt(c_.skeleton,s),style:{width:e,height:n,animation:r},children:o})},l_=({className:t,type:e})=>{switch(e){case"image":case"video":return f.jsx(Xi,{width:"240px",height:"214px"});default:return f.jsx(Xi,{className:t})}},d_="_rounded_tu8ax_11",u_="_normal_tu8ax_11",f_="_noBubble_tu8ax_11",p_="_transparent_tu8ax_17",h_="_bubble_tu8ax_21",m_="_received_tu8ax_21",g_="_sent_tu8ax_42",y_="_avatar_tu8ax_77",__="_messageContainer_tu8ax_80",v_="_message_tu8ax_80",b_="_relative_tu8ax_89",w_="_status_tu8ax_93",x_="_nameAndTimestamp_tu8ax_98",C_="_name_tu8ax_98",S_="_divide_tu8ax_112",T_="_timestamp_tu8ax_121",k_="_inSeries_tu8ax_143",E_="_lastMessage_tu8ax_146",A_="_demo_tu8ax_176",Ne={rounded:d_,normal:u_,noBubble:f_,transparent:p_,bubble:h_,received:m_,sent:g_,avatar:y_,messageContainer:__,message:v_,relative:b_,status:w_,nameAndTimestamp:x_,name:C_,divide:S_,timestamp:T_,inSeries:k_,lastMessage:E_,demo:A_};function L_(t){let e;switch(t){case"text":case"rich_text":case"buttons":case"quick_replies":case"file":case"error":case"image":case"video":case"audio":case"carousel":case"typing":case"demo_message":return Ne.bubble;case"system":return Ne.noBubble;default:return e=t,console.warn('Type "'.concat(e,'" is not supported')),Ne.bubble}}function Qi(t){let e;switch(t){case"text":case"quick_replies":case"file":case"error":case"typing":case"system":case"image":case"video":case"audio":case"rich_text":case"buttons":return Ne.rounded;case"carousel":return Ne.relative;case"demo_message":return Ne.demo;default:return e=t,console.warn('Type "'.concat(e,'" is not supported')),Ne.normal}}const I_="Failed to load dynamically imported message.";function R_(t){const{name:e,avatar:n,status:r,timestamp:s,children:o,alignment:a,type:i,errorMessage:c,onError:l,isLastMessage:u=!1,isInSeries:p=!1}=t;return f.jsxs("div",{className:Yt(L_(i),{[Ne.sent]:a==="sent",[Ne.received]:a==="received",[Ne.inSeries]:p,[Ne.lastMessage]:u}),"data-qa":i,"data-testid":i,children:[n&&f.jsx("div",{className:Ne.avatar,children:n}),f.jsxs("div",{className:Ne.messageContainer,children:[f.jsx(Hl,{fallback:f.jsx("div",{className:Yt(Qi(i),Ne.message),children:f.jsx("span",{children:c||I_})}),onError:l,children:f.jsx(T.Suspense,{fallback:f.jsx(l_,{className:Ne.message,type:i}),children:f.jsx("div",{className:Yt(Qi(i),Ne.message),"data-testid":"message-box",children:o})})}),r&&f.jsx("div",{className:Ne.status,children:r})]}),(e||s)&&f.jsxs("div",{className:Ne.nameAndTimestamp,children:[e&&f.jsx("div",{className:Ne.name,children:e}),e&&s&&f.jsx("div",{className:Ne.divide,children:f.jsx("span",{children:"Â·"})}),s&&f.jsx("div",{className:Ne.timestamp,children:s})]})]})}const j_="_bottom_zl3d8_6",P_="_timestamp_zl3d8_10",N_="_name_zl3d8_11",Va={bottom:j_,timestamp:P_,name:N_};function B_(t){const{url:e,align:n,type:r}=t;return f.jsx(Vl,{className:Yt({[Va.bottom]:n==="bottom"}),url:e,type:r})}const Ul=({name:t})=>f.jsx("span",{className:Va.name,children:t});Ul.whyDidYouRender=!0;const $_="_small_1ri7f_6",O_="_medium_1ri7f_11",M_="_large_1ri7f_16",D_="_fail_1ri7f_21",ec={small:$_,medium:O_,large:M_,fail:D_},F_=({size:t="small",onResend:e})=>f.jsx("button",{onClick:e,"data-testid":"fail","aria-label":"failed to send",className:Yt(ec.fail,ec[t]),children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",fill:"none",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.99996 1.66699C5.39996 1.66699 1.66663 5.40033 1.66663 10.0003C1.66663 14.6003 5.39996 18.3337 9.99996 18.3337C14.6 18.3337 18.3333 14.6003 18.3333 10.0003C18.3333 5.40033 14.6 1.66699 9.99996 1.66699ZM9.16663 14.167V12.5003H10.8333V14.167H9.16663ZM9.16663 5.83366V10.8337H10.8333V5.83366H9.16663Z",fill:"#F5222D"}),f.jsx("mask",{id:"mask0_3590_3492",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"1",y:"1",width:"18",height:"18",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.99996 1.66699C5.39996 1.66699 1.66663 5.40033 1.66663 10.0003C1.66663 14.6003 5.39996 18.3337 9.99996 18.3337C14.6 18.3337 18.3333 14.6003 18.3333 10.0003C18.3333 5.40033 14.6 1.66699 9.99996 1.66699ZM9.16663 14.167V12.5003H10.8333V14.167H9.16663ZM9.16663 5.83366V10.8337H10.8333V5.83366H9.16663Z",fill:"white"})}),f.jsx("g",{mask:"url(#mask0_3590_3492)"})]})}),V_="_spinner_13lho_11",H_="_rotation_13lho_1",U_="_tiny_13lho_22",z_="_small_13lho_27",Z_="_medium_13lho_32",tc={spinner:V_,rotation:H_,tiny:U_,small:z_,medium:Z_},Ha=({size:t="small"})=>f.jsx("div",{className:Yt(tc.spinner,tc[t]),"data-testid":"sending"});function W_(t){const{status:e,onResend:n}=t;if(e==="sending")return f.jsx(Ha,{});if(e==="failure")return f.jsx(F_,{onResend:n})}function G_(t){const{text:e}=t;return f.jsx("span",{className:Va.timestamp,children:e})}const q_=()=>xe(()=>import("./TextMessage-BAIKRTjl.js"),__vite__mapDeps([10,1,7,11]),import.meta.url),Ts=T.lazy(q_),Y_="_buttonsText_na049_11",K_="_container_na049_17",J_="_button_na049_11",nc={buttonsText:Y_,container:K_,button:J_},X_=({text:t,linkProtocol:e,linkTarget:n,buttons:r,onButtonClick:s})=>f.jsxs("div",{className:nc.vaButtons,children:[f.jsx(Ts,{className:nc.buttonsText,text:t,linkProtocol:e,linkTarget:n}),f.jsx(s_,{buttons:r,onClick:s})]}),Q_=()=>xe(()=>import("./HtmlMessage-CTTQrchX.js"),__vite__mapDeps([12,1,13]),import.meta.url),ev=T.lazy(Q_),zl=new Map;function rc(t){return zl.get(t)}function tv(t,e){zl.set(t,e)}function nv(t,e){return n=>{const r=n.identity;if(!rc(r)){const a=new Mf(e(n));tv(r,a)}const s=rc(r).load(),o={...n,...s};return f.jsx(t,{...o})}}const rv=()=>xe(()=>import("./MediaMessage-BVAtYfI2.js"),__vite__mapDeps([14,1,7,15]),import.meta.url),sv=T.lazy(async()=>{const t=(await rv()).default;return{default:nv(t,async n=>{const{getContentTemporaryUrl:r}=n;if(r){const s=await r();if(s)return{url:s}}return{}})}}),ov=()=>xe(()=>import("./QuickReplyMessage-DYjPBLbV.js"),__vite__mapDeps([16,1,7,17]),import.meta.url),av=T.lazy(ov),iv={"system-message":"_system-message_xyb9s_6"},cv=({children:t})=>f.jsx("p",{className:iv["system-message"],"data-qa":"system message",children:t}),lv="_loading_1iiok_1",dv="_resWrapper_1iiok_8",uv="_resItem_1iiok_18",fv="_sourceWrapper_1iiok_47",pv="_sourceCount_1iiok_55",hv="_sourceList_1iiok_75",mv="_sourceItem_1iiok_94",gv="_sourceItemInfo_1iiok_100",yv="_button_1iiok_121",_v="_refer_1iiok_143",vv="_referClose_1iiok_165",bv="_referInfo_1iiok_184",wv="_referInfoTitle_1iiok_191",_t={loading:lv,resWrapper:dv,resItem:uv,sourceWrapper:fv,sourceCount:pv,sourceList:hv,sourceItem:mv,sourceItemInfo:gv,button:yv,refer:_v,referClose:vv,referInfo:bv,referInfoTitle:wv},xv="_loading_11a6b_11",Cv="_blink_11a6b_1",Sv={loading:xv,blink:Cv},Zl=()=>f.jsxs("div",{className:Sv.loading,"data-testid":"typing-message",children:[f.jsx("span",{}),f.jsx("span",{}),f.jsx("span",{})]}),oa={title:"",subTitle:"",text:""},Ua=T.createContext({refer:oa});function Tv(t){const{data:e,onComposer:n}=t,[r,s]=T.useState(!1),[o,a]=T.useState(oa),[i,c]=T.useState(!0),l=m=>{a(m)},u=()=>{a(oa)},p=()=>{n==null||n()};return T.useEffect(()=>{const m=setTimeout(()=>s(!0),e.delay);return()=>{clearTimeout(m)}},[]),f.jsx(Ua.Provider,{value:{openRefer:l,closeRefer:u,refer:o,emitComposer:p},children:r?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:_t.resWrapper,children:[e.list.map((m,y)=>f.jsx(kv,{item:m,point:y+1},y)),f.jsx(Wl,{onClick:p})]}),f.jsx("div",{style:{width:"100%",height:10}}),f.jsxs("div",{className:_t.sourceWrapper,children:[f.jsxs("div",{className:_t.sourceCount,onClick:()=>c(!i),children:["".concat(e.source.length," relevant sources found"),f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none","data-arrow":i?"up":"down",children:[f.jsx("path",{d:"M11.06 5.72656L8 8.7799L4.94 5.72656L4 6.66656L8 10.6666L12 6.66656L11.06 5.72656Z",fill:"#1F1F1F"}),f.jsx("mask",{id:"mask0_3681_7294",maskUnits:"userSpaceOnUse",x:"4",y:"5",width:"8",height:"6",style:{maskType:"luminance"},children:f.jsx("path",{d:"M11.06 5.72656L8 8.7799L4.94 5.72656L4 6.66656L8 10.6666L12 6.66656L11.06 5.72656Z",fill:"white"})}),f.jsx("g",{mask:"url(#mask0_3681_7294)"})]})]}),f.jsx("div",{className:_t.sourceList,"aria-hidden":!i,children:e.source.map((m,y)=>f.jsx(Ev,{item:m},y))})]}),f.jsx(Av,{})]}):f.jsx("div",{className:_t.loading,children:f.jsx(Zl,{})})})}function kv(t){const{item:e={}}=t,{openRefer:n}=T.useContext(Ua);return f.jsxs("div",{className:_t.resItem,children:[e.text||"",e.refer&&f.jsx("span",{onClick:()=>n(e.refer),children:f.jsx(Gl,{type:e.type})})]})}function Ev(t){const{item:e={}}=t;return f.jsx("div",{className:_t.sourceItem,children:f.jsxs("div",{className:_t.sourceItemInfo,title:e.text,children:[f.jsx(Gl,{type:e.type}),f.jsx("span",{children:e.text})]})})}function Wl(t){const e=n=>{var r;n.stopPropagation(),(r=t==null?void 0:t.onClick)==null||r.call(t,n)};return f.jsxs("button",{className:_t.button,onClick:e,children:[f.jsxs("svg",{width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.66667 15.8334V4.16676H10.5V2.5001H4.66667C3.74167 2.5001 3 3.2501 3 4.16676V15.8334C3 16.7501 3.74167 17.5001 4.66667 17.5001H16.3333C17.25 17.5001 18 16.7501 18 15.8334V10.0001H16.3333V15.8334H4.66667ZM7.1667 10.8334V13.3334H9.66667L15.5 7.50012L13 5.00012L7.1667 10.8334Z",fill:"currentColor"}),f.jsx("path",{d:"M15.2624 2.74115C15.5878 2.41571 16.1155 2.41571 16.4409 2.74115L17.7623 4.06254C18.0877 4.38797 18.0877 4.91561 17.7623 5.24105L16.334 6.66931L13.8341 4.16941L15.2624 2.74115Z",fill:"currentColor"})]}),"Add to composer"]})}function Av(){const{refer:t,closeRefer:e,emitComposer:n}=T.useContext(Ua),r=!!t.text,s=()=>{n(),e()};return jc.createPortal(f.jsx("div",{"aria-hidden":!r,className:_t.refer,style:{left:t==null?void 0:t.left,top:t==null?void 0:t.top},children:f.jsxs("div",{className:_t.referInfo,children:[f.jsxs("div",{className:_t.referInfoTitle,children:[f.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:e,children:[f.jsx("path",{d:"M14.5912 3.225L13.1079 1.75L4.86621 10L13.1162 18.25L14.5912 16.775L7.81621 10L14.5912 3.225Z",fill:"#202830"}),f.jsx("mask",{id:"mask0_119_20617",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"4",y:"1",width:"11",height:"18",children:f.jsx("path",{d:"M14.5912 3.225L13.1079 1.75L4.86621 10L13.1162 18.25L14.5912 16.775L7.81621 10L14.5912 3.225Z",fill:"white"})}),f.jsx("g",{mask:"url(#mask0_119_20617)"})]}),f.jsxs("div",{children:[f.jsx("h3",{children:t.title}),f.jsx("h4",{children:t.subTitle})]})]}),f.jsx("p",{children:t.text}),f.jsx(Wl,{onClick:s})]})}),document.body)}function Gl(t){const{type:e="doc"}=t;switch(e){case"doc":return f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.33366 1.33301H4.00033C3.26033 1.33301 2.66699 1.92634 2.66699 2.66634V13.333C2.66699 14.0663 3.26033 14.6663 4.00033 14.6663H12.0003C12.7367 14.6663 13.3337 14.0694 13.3337 13.333V5.33301L9.33366 1.33301ZM12.3337 5.99967H8.66699V2.33301L12.3337 5.99967ZM10.0003 11.9997V10.6663H4.00033V11.9997H10.0003ZM12.0003 7.99967V9.33301H4.00033V7.99967H12.0003Z",fill:"currentColor"})});case"link":return f.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33333 3.33333V12.6667H12.6667V8H14V12.6667C14 13.4 13.4 14 12.6667 14H3.33333C2.59333 14 2 13.4 2 12.6667V3.33333C2 2.6 2.59333 2 3.33333 2H8V3.33333H3.33333ZM9.33318 3.33333V2H13.9998V6.66667H12.6665V4.27333L6.11318 10.8267L5.17318 9.88667L11.7265 3.33333H9.33318Z",fill:"currentColor"})})}}const Lv=({sid:t,tid:e,enableRTL:n,messageItem:r,onButtonClick:s,onMediaSourceError:o,linkProtocol:a,linkTarget:i,isLastMessage:c=!1,errorMessageText:l})=>{const u=r.type;let p;const m={linkProtocol:a,linkTarget:i};switch(u){case"text":return f.jsx(Ts,{...r,...m});case"quick_replies":return f.jsx(av,{...r,...m,isLastMessage:c,onButtonClick:s});case"carousel":return f.jsx(a_,{enableRTL:n,items:r.cards,onButtonClick:s,onError:o});case"buttons":return f.jsx(X_,{...m,text:r.text,buttons:r.buttons,onButtonClick:s});case"rich_text":return f.jsx(ev,{html:r.html});case"video":case"audio":case"file":case"image":return f.jsx(sv,{identity:e||t,onError:o,type:r.type,url:r.url||"",getContentTemporaryUrl:r.getContentTemporaryUrl,children:r.children});case"typing":return f.jsx(Zl,{});case"system":return f.jsx(cv,{...r});case"demo_message":return f.jsx(Tv,{...r});case"error":return f.jsx(Ts,{text:l||r.error_message,...m});default:return p=u,f.jsx(Ts,{text:'Type "'.concat(p,'" is not supported'),...m})}},ql=({sid:t,tid:e,enableRTL:n=!1,hasName:r=!1,hasAvatar:s=!1,hasTimestamp:o=!1,status:a,avatarUrl:i,avatarType:c,avatarVerticalAlign:l,formattedTime:u,participantName:p="",alignment:m,linkProtocol:y="https",linkTarget:g="_blank",isLastMessage:v=!1,isInSeries:w=!1,onButtonClick:C,onResend:I,onMediaSourceError:_,errorMessageText:S,onMessageError:L,...x})=>{const B=a!=="success"&&m==="sent",M=x;return f.jsx(R_,{status:B&&f.jsx(W_,{status:a,onResend:I}),name:r&&f.jsx(Ul,{name:p}),avatar:s&&f.jsx(B_,{align:l,url:i,type:c}),timestamp:o&&f.jsx(G_,{text:u}),alignment:m,type:M.type,errorMessage:S,onError:L,isLastMessage:v,isInSeries:w,children:f.jsx(Lv,{sid:t,tid:e,enableRTL:n,messageItem:M,alignment:m,linkProtocol:y,linkTarget:g,isLastMessage:v,errorMessageText:S,onButtonClick:C,onMediaSourceError:_})})};ql.whyDidYouRender=!0;const Yl=T.memo(ql),Iv="_error_2hw0o_11",Rv="_message_2hw0o_20",jv="_retry_2hw0o_27",Mo={error:Iv,message:Rv,retry:jv};function VS(t){const{onRetry:e}=t;return f.jsxs("div",{className:Mo.error,children:[f.jsx("p",{className:Mo.message,children:"There was a problem while trying to load the widget"}),f.jsx("button",{className:Mo.retry,onClick:e,children:"Try again"})]})}const Kl=T.createContext({element:null}),Pv=()=>{const t=T.useContext(Kl);if(!t.element)throw new Error("You must use a PortalProvider to get a portal.");return t};function Nv({children:t}){const{element:e}=Pv();return jc.createPortal(t,e)}const sc="tdw-portal-container";function HS(t){const{children:e}=t,[n,r]=T.useState(null);T.useLayoutEffect(()=>{const o=document.getElementById(sc);r(o)},[]);const s=T.useMemo(()=>({element:n}),[n]);return f.jsxs(Kl.Provider,{value:s,children:[n?e:null,f.jsx("div",{id:sc})]})}const Bv=t=>({go:t.go,on:t.on,off:t.off,getInitialPage:t.getInitialPage,emit:t.emit,reset:t.reset,is:t.is,isNot:t.isNot,focusUserInputArea:t.focusUserInputArea,setIsFrameOpened:t.setIsFrameOpened,setCredentials:t.setCredentials,hasProviderCredentials:t.hasProviderCredentials,createIdentity:t.createIdentity,setFormData:t.setFormData,setLayoutDirection:t.setLayoutDirection,enableScreenLoading:t.enableScreenLoading,hiddenScreenLoading:t.hiddenScreenLoading,updateFeedbackStatus:t.updateFeedbackStatus,updateChatContentScroll:t.updateChatContentScroll,updateInitialScreenScroll:t.updateInitialScreenScroll,updateInitialScreenHeight:t.updateInitialScreenHeight,enableLoadFeedback:t.enableLoadFeedback}),$v=t=>t.page,Ov=t=>t.hasInitialized&&t.page==="conversation",Mv=t=>(t.hasInitialized&&t.page==="conversation"||t.page==="end")&&!!t.interactionId,Dv=t=>t.shouldLoadFeedback,Fv=t=>t.feedbackLink,Vv=t=>{const e=t.feedbackStatus.status;return{...t.feedbackStatus,active:e==="SURVEY_UNSUBMITTED",hidden:e==="SURVEY_NOT_AVAILABLE",pending:e==="init",showMessage:["init","SURVEY_UNSUBMITTED"].indexOf(e)===-1}},Jl=t=>t.isFrameOpened,Xl=t=>t.layoutDirection===jr.rtl,Hv=t=>t.showScreenLoading,Uv=t=>({top:t.chatContentScroll.top,percent:t.chatContentScroll.percent,scrollOffset:t.chatContentScroll.scrollOffset,isTop:t.chatContentScroll.percent<=0,isBottom:t.chatContentScroll.percent>=100}),zv=t=>({top:t.initialScreenScroll.top,percent:t.initialScreenScroll.percent,scrollOffset:t.chatContentScroll.scrollOffset,isTop:t.initialScreenScroll.percent<=0,isBottom:t.initialScreenScroll.percent>=100}),ts=()=>k(Mn(Bv)),US=()=>k($v),Zv=()=>k(Ov),Wv=()=>k(Mv),zS=()=>k(Dv),ZS=()=>k(Fv),Gv=()=>k(Vv),Ql=()=>k(Jl),ed=()=>k(Xl),WS=()=>k(Hv),qv=()=>k(Uv),Yv=()=>k(zv);k.subscribe(Jl,t=>{t&&He.getState().updateLastReadIndex()});k.subscribe(Xl,t=>{const e=document.documentElement;t?e.setAttribute("data-layout-direction",jr.rtl):e.removeAttribute("data-layout-direction")});function td(){const[t,e]=T.useState(!0),{on:n,off:r}=ts();return T.useEffect(()=>{const s=()=>{e(!1)},o=()=>{e(!0)};return n("disconnect",s),n("reconnect",o),n("leave_end",o),n("leave_error",o),()=>{r("disconnect",s),r("reconnect",o),r("leave_end",o),r("leave_error",o)}},[n,r]),t}/*!
 * OverlayScrollbars
 * Version: 2.10.0
 *
 * Copyright (c) Rene Haas | KingSora.
 * https://github.com/KingSora
 *
 * Released under the MIT license.
 */const it=(t,e)=>{const{o:n,i:r,u:s}=t;let o=n,a;const i=(u,p)=>{const m=o,y=u,g=p||(r?!r(m,y):m!==y);return(g||s)&&(o=y,a=m),[o,g,a]};return[e?u=>i(e(o,a),u):i,u=>[o,!!u,a]]},Kv=typeof window<"u"&&typeof HTMLElement<"u"&&!!window.document,ot=Kv?window:{},nd=Math.max,Jv=Math.min,aa=Math.round,Ws=Math.abs,oc=Math.sign,rd=ot.cancelAnimationFrame,za=ot.requestAnimationFrame,Gs=ot.setTimeout,ia=ot.clearTimeout,io=t=>typeof ot[t]<"u"?ot[t]:void 0,Xv=io("MutationObserver"),ac=io("IntersectionObserver"),qs=io("ResizeObserver"),ks=io("ScrollTimeline"),Za=t=>t===void 0,co=t=>t===null,$t=t=>typeof t=="number",ns=t=>typeof t=="string",Wa=t=>typeof t=="boolean",bt=t=>typeof t=="function",Dt=t=>Array.isArray(t),Ys=t=>typeof t=="object"&&!Dt(t)&&!co(t),Ga=t=>{const e=!!t&&t.length,n=$t(e)&&e>-1&&e%1==0;return Dt(t)||!bt(t)&&n?e>0&&Ys(t)?e-1 in t:!0:!1},Ks=t=>!!t&&t.constructor===Object,Js=t=>t instanceof HTMLElement,lo=t=>t instanceof Element;function _e(t,e){if(Ga(t))for(let n=0;n<t.length&&e(t[n],n,t)!==!1;n++);else t&&_e(Object.keys(t),n=>e(t[n],n,t));return t}const sd=(t,e)=>t.indexOf(e)>=0,Yr=(t,e)=>t.concat(e),Le=(t,e,n)=>(!ns(e)&&Ga(e)?Array.prototype.push.apply(t,e):t.push(e),t),vn=t=>Array.from(t||[]),qa=t=>Dt(t)?t:!ns(t)&&Ga(t)?vn(t):[t],ca=t=>!!t&&!t.length,la=t=>vn(new Set(t)),dt=(t,e,n)=>{_e(t,s=>s?s.apply(void 0,e||[]):!0),!n&&(t.length=0)},od="paddingTop",ad="paddingRight",id="paddingLeft",cd="paddingBottom",ld="marginLeft",dd="marginRight",ud="marginBottom",fd="overflowX",pd="overflowY",uo="width",fo="height",un="visible",In="hidden",hr="scroll",Qv=t=>{const e=String(t||"");return e?e[0].toUpperCase()+e.slice(1):""},po=(t,e,n,r)=>{if(t&&e){let s=!0;return _e(n,o=>{const a=t[o],i=e[o];a!==i&&(s=!1)}),s}return!1},hd=(t,e)=>po(t,e,["w","h"]),Es=(t,e)=>po(t,e,["x","y"]),eb=(t,e)=>po(t,e,["t","r","b","l"]),jn=()=>{},X=(t,...e)=>t.bind(0,...e),nr=t=>{let e;const n=t?Gs:za,r=t?ia:rd;return[s=>{r(e),e=n(()=>s(),bt(t)?t():t)},()=>r(e)]},da=(t,e)=>{const{_:n,v:r,p:s,S:o}=e||{};let a,i,c,l,u=jn;const p=function(w){u(),ia(a),l=a=i=void 0,u=jn,t.apply(this,w)},m=v=>o&&i?o(i,v):v,y=()=>{u!==jn&&p(m(c)||c)},g=function(){const w=vn(arguments),C=bt(n)?n():n;if($t(C)&&C>=0){const _=bt(r)?r():r,S=$t(_)&&_>=0,L=C>0?Gs:za,x=C>0?ia:rd,M=m(w)||w,H=p.bind(0,M);let N;u(),s&&!l?(H(),l=!0,N=L(()=>l=void 0,C)):(N=L(H,C),S&&!a&&(a=Gs(y,_))),u=()=>x(N),i=c=M}else p(w)};return g.m=y,g},md=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),Et=t=>t?Object.keys(t):[],he=(t,e,n,r,s,o,a)=>{const i=[e,n,r,s,o,a];return(typeof t!="object"||co(t))&&!bt(t)&&(t={}),_e(i,c=>{_e(c,(l,u)=>{const p=c[u];if(t===p)return!0;const m=Dt(p);if(p&&Ks(p)){const y=t[u];let g=y;m&&!Dt(y)?g=[]:!m&&!Ks(y)&&(g={}),t[u]=he(g,p)}else t[u]=m?p.slice():p})}),t},gd=(t,e)=>_e(he({},t),(n,r,s)=>{n===void 0?delete s[r]:n&&Ks(n)&&(s[r]=gd(n))}),Ya=t=>!Et(t).length,yd=(t,e,n)=>nd(t,Jv(e,n)),Pn=t=>la((Dt(t)?t:(t||"").split(" ")).filter(e=>e)),Ka=(t,e)=>t&&t.getAttribute(e),ic=(t,e)=>t&&t.hasAttribute(e),Gt=(t,e,n)=>{_e(Pn(e),r=>{t&&t.setAttribute(r,String(n||""))})},It=(t,e)=>{_e(Pn(e),n=>t&&t.removeAttribute(n))},ho=(t,e)=>{const n=Pn(Ka(t,e)),r=X(Gt,t,e),s=(o,a)=>{const i=new Set(n);return _e(Pn(o),c=>{i[a](c)}),vn(i).join(" ")};return{O:o=>r(s(o,"delete")),$:o=>r(s(o,"add")),C:o=>{const a=Pn(o);return a.reduce((i,c)=>i&&n.includes(c),a.length>0)}}},_d=(t,e,n)=>(ho(t,e).O(n),X(Ja,t,e,n)),Ja=(t,e,n)=>(ho(t,e).$(n),X(_d,t,e,n)),Xs=(t,e,n,r)=>(r?Ja:_d)(t,e,n),Xa=(t,e,n)=>ho(t,e).C(n),vd=t=>ho(t,"class"),bd=(t,e)=>{vd(t).O(e)},Qa=(t,e)=>(vd(t).$(e),X(bd,t,e)),wd=(t,e)=>{const n=e?lo(e)&&e:document;return n?vn(n.querySelectorAll(t)):[]},tb=(t,e)=>{const n=e?lo(e)&&e:document;return n&&n.querySelector(t)},ua=(t,e)=>lo(t)&&t.matches(e),xd=t=>ua(t,"body"),fa=t=>t?vn(t.childNodes):[],Kr=t=>t&&t.parentElement,rr=(t,e)=>lo(t)&&t.closest(e),pa=t=>document.activeElement,nb=(t,e,n)=>{const r=rr(t,e),s=t&&tb(n,r),o=rr(s,e)===r;return r&&s?r===t||s===t||o&&rr(rr(t,n),e)!==r:!1},mr=t=>{_e(qa(t),e=>{const n=Kr(e);e&&n&&n.removeChild(e)})},ct=(t,e)=>X(mr,t&&e&&_e(qa(e),n=>{n&&t.appendChild(n)})),or=t=>{const e=document.createElement("div");return Gt(e,"class",t),e},Cd=t=>{const e=or();return e.innerHTML=t.trim(),_e(fa(e),n=>mr(n))},cc=(t,e)=>t.getPropertyValue(e)||t[e]||"",Sd=t=>{const e=t||0;return isFinite(e)?e:0},bs=t=>Sd(parseFloat(t||"")),ha=t=>Math.round(t*1e4)/1e4,Td=t=>"".concat(ha(Sd(t)),"px");function Jr(t,e){t&&e&&_e(e,(n,r)=>{try{const s=t.style,o=co(n)||Wa(n)?"":$t(n)?Td(n):n;r.indexOf("--")===0?s.setProperty(r,o):s[r]=o}catch(s){}})}function Jt(t,e,n){const r=ns(e);let s=r?"":{};if(t){const o=ot.getComputedStyle(t,n)||t.style;s=r?cc(o,e):vn(e).reduce((a,i)=>(a[i]=cc(o,i),a),s)}return s}const lc=(t,e,n)=>{const r=e?"".concat(e,"-"):"",s=n?"-".concat(n):"",o="".concat(r,"top").concat(s),a="".concat(r,"right").concat(s),i="".concat(r,"bottom").concat(s),c="".concat(r,"left").concat(s),l=Jt(t,[o,a,i,c]);return{t:bs(l[o]),r:bs(l[a]),b:bs(l[i]),l:bs(l[c])}},rb=(t,e)=>"translate".concat(Ys(t)?"(".concat(t.x,",").concat(t.y,")"):"Y(".concat(t,")")),sb=t=>!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length),ob={w:0,h:0},mo=(t,e)=>e?{w:e["".concat(t,"Width")],h:e["".concat(t,"Height")]}:ob,ab=t=>mo("inner",t||ot),ar=X(mo,"offset"),kd=X(mo,"client"),Qs=X(mo,"scroll"),ei=t=>{const e=parseFloat(Jt(t,uo))||0,n=parseFloat(Jt(t,fo))||0;return{w:e-aa(e),h:n-aa(n)}},Do=t=>t.getBoundingClientRect(),ib=t=>!!t&&sb(t),ma=t=>!!(t&&(t[fo]||t[uo])),Ed=(t,e)=>{const n=ma(t);return!ma(e)&&n},dc=(t,e,n,r)=>{_e(Pn(e),s=>{t&&t.removeEventListener(s,n,r)})},ke=(t,e,n,r)=>{var s;const o=(s=r&&r.H)!=null?s:!0,a=r&&r.I||!1,i=r&&r.A||!1,c={passive:o,capture:a};return X(dt,Pn(e).map(l=>{const u=i?p=>{dc(t,l,u,a),n&&n(p)}:n;return t&&t.addEventListener(l,u,c),X(dc,t,l,u,a)}))},Ad=t=>t.stopPropagation(),ga=t=>t.preventDefault(),Ld=t=>Ad(t)||ga(t),jt=(t,e)=>{const{x:n,y:r}=$t(e)?{x:e,y:e}:e||{};$t(n)&&(t.scrollLeft=n),$t(r)&&(t.scrollTop=r)},lt=t=>({x:t.scrollLeft,y:t.scrollTop}),Id=()=>({D:{x:0,y:0},M:{x:0,y:0}}),cb=(t,e)=>{const{D:n,M:r}=t,{w:s,h:o}=e,a=(p,m,y)=>{let g=oc(p)*y,v=oc(m)*y;if(g===v){const w=Ws(p),C=Ws(m);v=w>C?0:v,g=w<C?0:g}return g=g===v?0:g,[g+0,v+0]},[i,c]=a(n.x,r.x,s),[l,u]=a(n.y,r.y,o);return{D:{x:i,y:l},M:{x:c,y:u}}},uc=({D:t,M:e})=>{const n=(r,s)=>r===0&&r<=s;return{x:n(t.x,e.x),y:n(t.y,e.y)}},fc=({D:t,M:e},n)=>{const r=(s,o,a)=>yd(0,1,(s-a)/(s-o)||0);return{x:r(t.x,e.x,n.x),y:r(t.y,e.y,n.y)}},ya=t=>{t&&t.focus&&t.focus({preventScroll:!0})},pc=(t,e)=>{_e(qa(e),t)},_a=t=>{const e=new Map,n=(o,a)=>{if(o){const i=e.get(o);pc(c=>{i&&i[c?"delete":"clear"](c)},a)}else e.forEach(i=>{i.clear()}),e.clear()},r=(o,a)=>{if(ns(o)){const l=e.get(o)||new Set;return e.set(o,l),pc(u=>{bt(u)&&l.add(u)},a),X(n,o,a)}Wa(a)&&a&&n();const i=Et(o),c=[];return _e(i,l=>{const u=o[l];u&&Le(c,r(l,u))}),X(dt,c)},s=(o,a)=>{_e(vn(e.get(o)),i=>{a&&!ca(a)?i.apply(0,a):i()})};return r(t||{}),[r,n,s]},hc=t=>JSON.stringify(t,(e,n)=>{if(bt(n))throw 0;return n}),mc=(t,e)=>t?"".concat(e).split(".").reduce((n,r)=>n&&md(n,r)?n[r]:void 0,t):void 0,lb={paddingAbsolute:!1,showNativeOverlaidScrollbars:!1,update:{elementEvents:[["img","load"]],debounce:[0,33],attributes:null,ignoreMutation:null},overflow:{x:"scroll",y:"scroll"},scrollbars:{theme:"os-theme-dark",visibility:"auto",autoHide:"never",autoHideDelay:1300,autoHideSuspend:!1,dragScroll:!0,clickScroll:!1,pointers:["mouse","touch","pen"]}},Rd=(t,e)=>{const n={},r=Yr(Et(e),Et(t));return _e(r,s=>{const o=t[s],a=e[s];if(Ys(o)&&Ys(a))he(n[s]={},Rd(o,a)),Ya(n[s])&&delete n[s];else if(md(e,s)&&a!==o){let i=!0;if(Dt(o)||Dt(a))try{hc(o)===hc(a)&&(i=!1)}catch(c){}i&&(n[s]=a)}}),n},gc=(t,e,n)=>r=>[mc(t,r),n||mc(e,r)!==void 0],wr="data-overlayscrollbars",As="os-environment",ws="".concat(As,"-scrollbar-hidden"),Fo="".concat(wr,"-initialize"),Ls="noClipping",yc="".concat(wr,"-body"),fn=wr,db="host",qt="".concat(wr,"-viewport"),ub=fd,fb=pd,pb="arrange",jd="measuring",hb="scrolling",Pd="scrollbarHidden",mb="noContent",va="".concat(wr,"-padding"),_c="".concat(wr,"-content"),ti="os-size-observer",gb="".concat(ti,"-appear"),yb="".concat(ti,"-listener"),_b="os-trinsic-observer",vb="os-theme-none",ft="os-scrollbar",bb="".concat(ft,"-rtl"),wb="".concat(ft,"-horizontal"),xb="".concat(ft,"-vertical"),Nd="".concat(ft,"-track"),ni="".concat(ft,"-handle"),Cb="".concat(ft,"-visible"),Sb="".concat(ft,"-cornerless"),vc="".concat(ft,"-interaction"),bc="".concat(ft,"-unusable"),ba="".concat(ft,"-auto-hide"),wc="".concat(ba,"-hidden"),xc="".concat(ft,"-wheel"),Tb="".concat(Nd,"-interactive"),kb="".concat(ni,"-interactive");let Bd;const Eb=()=>Bd,Ab=t=>{Bd=t};let Vo;const Lb=()=>{const t=(S,L,x)=>{ct(document.body,S),ct(document.body,S);const B=kd(S),M=ar(S),H=ei(L);return x&&mr(S),{x:M.h-B.h+H.h,y:M.w-B.w+H.w}},e=S=>{let L=!1;const x=Qa(S,ws);try{L=Jt(S,"scrollbar-width")==="none"||Jt(S,"display","::-webkit-scrollbar")==="none"}catch(B){}return x(),L},n=".".concat(As,"{scroll-behavior:auto!important;position:fixed;opacity:0;visibility:hidden;overflow:scroll;height:200px;width:200px;z-index:-1}.").concat(As," div{width:200%;height:200%;margin:10px 0}.").concat(ws,"{scrollbar-width:none!important}.").concat(ws,"::-webkit-scrollbar,.").concat(ws,"::-webkit-scrollbar-corner{appearance:none!important;display:none!important;width:0!important;height:0!important}"),s=Cd('<div class="'.concat(As,'"><div></div><style>').concat(n,"</style></div>"))[0],o=s.firstChild,a=s.lastChild,i=Eb();i&&(a.nonce=i);const[c,,l]=_a(),[u,p]=it({o:t(s,o),i:Es},X(t,s,o,!0)),[m]=p(),y=e(s),g={x:m.x===0,y:m.y===0},v={elements:{host:null,padding:!y,viewport:S=>y&&xd(S)&&S,content:!1},scrollbars:{slot:!0},cancel:{nativeScrollbarsOverlaid:!1,body:null}},w=he({},lb),C=X(he,{},w),I=X(he,{},v),_={T:m,k:g,R:y,V:!!ks,L:X(c,"r"),U:I,P:S=>he(v,S)&&I(),N:C,q:S=>he(w,S)&&C(),B:he({},v),F:he({},w)};if(It(s,"style"),mr(s),ke(ot,"resize",()=>{l("r",[])}),bt(ot.matchMedia)&&!y&&(!g.x||!g.y)){const S=L=>{const x=ot.matchMedia("(resolution: ".concat(ot.devicePixelRatio,"dppx)"));ke(x,"change",()=>{L(),S(L)},{A:!0})};S(()=>{const[L,x]=u();he(_.T,L),l("r",[x])})}return _},Ft=()=>(Vo||(Vo=Lb()),Vo),$d=(t,e)=>bt(e)?e.apply(0,t):e,Ib=(t,e,n,r)=>{const s=Za(r)?n:r;return $d(t,s)||e.apply(0,t)},Od=(t,e,n,r)=>{const s=Za(r)?n:r,o=$d(t,s);return!!o&&(Js(o)?o:e.apply(0,t))},Rb=(t,e)=>{const{nativeScrollbarsOverlaid:n,body:r}=e||{},{k:s,R:o,U:a}=Ft(),{nativeScrollbarsOverlaid:i,body:c}=a().cancel,l=n!=null?n:i,u=Za(r)?c:r,p=(s.x||s.y)&&l,m=t&&(co(u)?!o:u);return!!p||!!m},ri=new WeakMap,jb=(t,e)=>{ri.set(t,e)},Pb=t=>{ri.delete(t)},Md=t=>ri.get(t),Nb=(t,e,n)=>{let r=!1;const s=n?new WeakMap:!1,o=()=>{r=!0},a=i=>{if(s&&n){const c=n.map(l=>{const[u,p]=l||[];return[p&&u?(i||wd)(u,t):[],p]});_e(c,l=>_e(l[0],u=>{const p=l[1],m=s.get(u)||[];if(t.contains(u)&&p){const g=ke(u,p,v=>{r?(g(),s.delete(u)):e(v)});s.set(u,Le(m,g))}else dt(m),s.delete(u)}))}};return a(),[o,a]},Cc=(t,e,n,r)=>{let s=!1;const{j:o,X:a,Y:i,W:c,J:l,G:u}=r||{},p=da(()=>s&&n(!0),{_:33,v:99}),[m,y]=Nb(t,p,i),g=o||[],v=a||[],w=Yr(g,v),C=(_,S)=>{if(!ca(S)){const L=l||jn,x=u||jn,B=[],M=[];let H=!1,N=!1;if(_e(S,E=>{const{attributeName:z,target:K,type:ee,oldValue:ie,addedNodes:ae,removedNodes:fe}=E,me=ee==="attributes",le=ee==="childList",Se=t===K,O=me&&z,D=O&&Ka(K,z||""),U=ns(D)?D:null,Z=O&&ie!==U,j=sd(v,z)&&Z;if(e&&(le||!Se)){const q=me&&Z,W=q&&c&&ua(K,c),se=(W?!L(K,z,ie,U):!me||q)&&!x(E,!!W,t,r);_e(ae,ge=>Le(B,ge)),_e(fe,ge=>Le(B,ge)),N=N||se}!e&&Se&&Z&&!L(K,z,ie,U)&&(Le(M,z),H=H||j)}),y(E=>la(B).reduce((z,K)=>(Le(z,wd(E,K)),ua(K,E)?Le(z,K):z),[])),e)return!_&&N&&n(!1),[!1];if(!ca(M)||H){const E=[la(M),H];return!_&&n.apply(0,E),E}}},I=new Xv(X(C,!1));return[()=>(I.observe(t,{attributes:!0,attributeOldValue:!0,attributeFilter:w,subtree:e,childList:e,characterData:e}),s=!0,()=>{s&&(m(),I.disconnect(),s=!1)}),()=>{if(s)return p.m(),C(!0,I.takeRecords())}]},Dd={},Fd={},Bb=t=>{_e(t,e=>_e(e,(n,r)=>{Dd[r]=e[r]}))},Vd=(t,e,n)=>Et(t).map(r=>{const{static:s,instance:o}=t[r],[a,i,c]=n||[],l=n?o:s;if(l){const u=n?l(a,i,e):l(e);return(c||Fd)[r]=u}}),rs=t=>Fd[t],$b="__osOptionsValidationPlugin",Ob="__osSizeObserverPlugin",Mb=(t,e)=>{const{k:n}=e,[r,s]=t("showNativeOverlaidScrollbars");return[r&&n.x&&n.y,s]},gr=t=>t.indexOf(un)===0,Db=(t,e)=>{const n=(s,o,a,i)=>{const c=s===un?In:s.replace("".concat(un,"-"),""),l=gr(s),u=gr(a);return!o&&!i?In:l&&u?un:l?o&&i?c:o?un:In:o?c:u&&i?un:In},r={x:n(e.x,t.x,e.y,t.y),y:n(e.y,t.y,e.x,t.x)};return{K:r,Z:{x:r.x===hr,y:r.y===hr}}},Hd="__osScrollbarsHidingPlugin",Fb="__osClickScrollPlugin",Ud=(t,e,n)=>{const{dt:r}=n||{},s=rs(Ob),[o]=it({o:!1,u:!0});return()=>{const a=[],c=Cd('<div class="'.concat(ti,'"><div class="').concat(yb,'"></div></div>'))[0],l=c.firstChild,u=p=>{const m=p instanceof ResizeObserverEntry;let y=!1,g=!1;if(m){const[v,,w]=o(p.contentRect),C=ma(v);g=Ed(v,w),y=!g&&!C}else g=p===!0;y||e({ft:!0,dt:g})};if(qs){const p=new qs(m=>u(m.pop()));p.observe(l),Le(a,()=>{p.disconnect()})}else if(s){const[p,m]=s(l,u,r);Le(a,Yr([Qa(c,gb),ke(c,"animationstart",p)],m))}else return jn;return X(dt,Le(a,ct(t,c)))}},Vb=(t,e)=>{let n;const r=c=>c.h===0||c.isIntersecting||c.intersectionRatio>0,s=or(_b),[o]=it({o:!1}),a=(c,l)=>{if(c){const u=o(r(c)),[,p]=u;return p&&!l&&e(u)&&[u]}},i=(c,l)=>a(l.pop(),c);return[()=>{const c=[];if(ac)n=new ac(X(i,!1),{root:t}),n.observe(s),Le(c,()=>{n.disconnect()});else{const l=()=>{const u=ar(s);a(u)};Le(c,Ud(s,l)()),l()}return X(dt,Le(c,ct(t,s)))},()=>n&&i(!0,n.takeRecords())]},Hb=(t,e,n,r)=>{let s,o,a,i,c,l;const u="[".concat(fn,"]"),p="[".concat(qt,"]"),m=["id","class","style","open","wrap","cols","rows"],{vt:y,ht:g,ot:v,gt:w,bt:C,nt:I,wt:_,yt:S,St:L,Ot:x}=t,B=j=>Jt(j,"direction")==="rtl",M={$t:!1,ct:B(y)},H=Ft(),N=rs(Hd),[E]=it({i:hd,o:{w:0,h:0}},()=>{const j=N&&N.tt(t,e,M,H,n).ut,W=!(_&&I)&&Xa(g,fn,Ls),$=!I&&S(pb),se=$&&lt(w),ge=se&&x(),ye=L(jd,W),we=$&&j&&j()[0],Be=Qs(v),te=ei(v);return we&&we(),jt(w,se),ge&&ge(),W&&ye(),{w:Be.w+te.w,h:Be.h+te.h}}),z=da(r,{_:()=>s,v:()=>o,S(j,q){const[W]=j,[$]=q;return[Yr(Et(W),Et($)).reduce((se,ge)=>(se[ge]=W[ge]||$[ge],se),{})]}}),K=j=>{const q=B(y);he(j,{Ct:l!==q}),he(M,{ct:q}),l=q},ee=(j,q)=>{const[W,$]=j,se={xt:$};return he(M,{$t:W}),!q&&r(se),se},ie=({ft:j,dt:q})=>{const $=!(j&&!q)&&H.R?z:r,se={ft:j||q,dt:q};K(se),$(se)},ae=(j,q)=>{const[,W]=E(),$={Ht:W};return K($),W&&!q&&(j?r:z)($),$},fe=(j,q,W)=>{const $={Et:q};return K($),q&&!W&&z($),$},[me,le]=C?Vb(g,ee):[],Se=!I&&Ud(g,ie,{dt:!0}),[O,D]=Cc(g,!1,fe,{X:m,j:m}),U=I&&qs&&new qs(j=>{const q=j[j.length-1].contentRect;ie({ft:!0,dt:Ed(q,c)}),c=q}),Z=da(()=>{const[,j]=E();r({Ht:j})},{_:222,p:!0});return[()=>{U&&U.observe(g);const j=Se&&Se(),q=me&&me(),W=O(),$=H.L(se=>{se?z({zt:se}):Z()});return()=>{U&&U.disconnect(),j&&j(),q&&q(),i&&i(),W(),$()}},({It:j,At:q,Dt:W})=>{const $={},[se]=j("update.ignoreMutation"),[ge,ye]=j("update.attributes"),[we,Be]=j("update.elementEvents"),[te,$e]=j("update.debounce"),ze=Be||ye,Re=q||W,Oe=Te=>bt(se)&&se(Te);if(ze){a&&a(),i&&i();const[Te,je]=Cc(C||v,!0,ae,{j:Yr(m,ge||[]),Y:we,W:u,G:(be,Ce)=>{const{target:Pe,attributeName:Ue}=be;return(!Ce&&Ue&&!I?nb(Pe,u,p):!1)||!!rr(Pe,".".concat(ft))||!!Oe(be)}});i=Te(),a=je}if($e)if(z.m(),Dt(te)){const Te=te[0],je=te[1];s=$t(Te)&&Te,o=$t(je)&&je}else $t(te)?(s=te,o=!1):(s=!1,o=!1);if(Re){const Te=D(),je=le&&le(),be=a&&a();Te&&he($,fe(Te[0],Te[1],Re)),je&&he($,ee(je[0],Re)),be&&he($,ae(be[0],Re))}return K($),$},M]},Ub=(t,e,n,r)=>{const s="--os-viewport-percent",o="--os-scroll-percent",a="--os-scroll-direction",{U:i}=Ft(),{scrollbars:c}=i(),{slot:l}=c,{vt:u,ht:p,ot:m,Mt:y,gt:g,wt:v,nt:w}=e,{scrollbars:C}=y?{}:t,{slot:I}=C||{},_=[],S=[],L=[],x=Od([u,p,m],()=>w&&v?u:p,l,I),B=O=>{if(ks){const D=new ks({source:g,axis:O});return{kt:Z=>{const j=Z.Tt.animate({clear:["left"],[o]:[0,1]},{timeline:D});return()=>j.cancel()}}}},M={x:B("x"),y:B("y")},H=()=>{const{Rt:O,Vt:D}=n,U=(Z,j)=>yd(0,1,Z/(Z+j)||0);return{x:U(D.x,O.x),y:U(D.y,O.y)}},N=(O,D,U)=>{const Z=U?Qa:bd;_e(O,j=>{Z(j.Tt,D)})},E=(O,D)=>{_e(O,U=>{const[Z,j]=D(U);Jr(Z,j)})},z=(O,D,U)=>{const Z=Wa(U),j=Z?U:!0,q=Z?!U:!0;j&&N(S,O,D),q&&N(L,O,D)},K=()=>{const O=H(),D=U=>Z=>[Z.Tt,{[s]:ha(U)+""}];E(S,D(O.x)),E(L,D(O.y))},ee=()=>{if(!ks){const{Lt:O}=n,D=fc(O,lt(g)),U=Z=>j=>[j.Tt,{[o]:ha(Z)+""}];E(S,U(D.x)),E(L,U(D.y))}},ie=()=>{const{Lt:O}=n,D=uc(O),U=Z=>j=>[j.Tt,{[a]:Z?"0":"1"}];E(S,U(D.x)),E(L,U(D.y))},ae=()=>{if(w&&!v){const{Rt:O,Lt:D}=n,U=uc(D),Z=fc(D,lt(g)),j=q=>{const{Tt:W}=q,$=Kr(W)===m&&W,se=(ge,ye,we)=>{const Be=ye*ge;return Td(we?Be:-Be)};return[$,$&&{transform:rb({x:se(Z.x,O.x,U.x),y:se(Z.y,O.y,U.y)})}]};E(S,j),E(L,j)}},fe=O=>{const D=O?"x":"y",U=O?wb:xb,Z=or("".concat(ft," ").concat(U)),j=or(Nd),q=or(ni),W={Tt:Z,Ut:j,Pt:q},$=M[D];return Le(O?S:L,W),Le(_,[ct(Z,j),ct(j,q),X(mr,Z),$&&$.kt(W),r(W,z,O)]),W},me=X(fe,!0),le=X(fe,!1),Se=()=>(ct(x,S[0].Tt),ct(x,L[0].Tt),X(dt,_));return me(),le(),[{Nt:K,qt:ee,Bt:ie,Ft:ae,jt:z,Xt:{Yt:S,Wt:me,Jt:X(E,S)},Gt:{Yt:L,Wt:le,Jt:X(E,L)}},Se]},zb=(t,e,n,r)=>(s,o,a)=>{const{ht:i,ot:c,nt:l,gt:u,Kt:p,Ot:m}=e,{Tt:y,Ut:g,Pt:v}=s,[w,C]=nr(333),[I,_]=nr(444),S=B=>{bt(u.scrollBy)&&u.scrollBy({behavior:"smooth",left:B.x,top:B.y})},L=()=>{const B="pointerup pointercancel lostpointercapture",M="client".concat(a?"X":"Y"),H=a?uo:fo,N=a?"left":"top",E=a?"w":"h",z=a?"x":"y",K=(ie,ae)=>fe=>{const{Rt:me}=n,le=ar(g)[E]-ar(v)[E],O=ae*fe/le*me[z];jt(u,{[z]:ie+O})},ee=[];return ke(g,"pointerdown",ie=>{const ae=rr(ie.target,".".concat(ni))===v,fe=ae?v:g,me=t.scrollbars,le=me[ae?"dragScroll":"clickScroll"],{button:Se,isPrimary:O,pointerType:D}=ie,{pointers:U}=me;if(Se===0&&O&&le&&(U||[]).includes(D)){dt(ee),_();const j=!ae&&(ie.shiftKey||le==="instant"),q=X(Do,v),W=X(Do,g),$=(Ce,Pe)=>(Ce||q())[N]-(Pe||W())[N],se=aa(Do(u)[H])/ar(u)[E]||1,ge=K(lt(u)[z],1/se),ye=ie[M],we=q(),Be=W(),te=we[H],$e=$(we,Be)+te/2,ze=ye-Be[N],Re=ae?0:ze-$e,Oe=Ce=>{dt(be),fe.releasePointerCapture(Ce.pointerId)},Te=ae||j,je=m(),be=[ke(p,B,Oe),ke(p,"selectstart",Ce=>ga(Ce),{H:!1}),ke(g,B,Oe),Te&&ke(g,"pointermove",Ce=>ge(Re+(Ce[M]-ye))),Te&&(()=>{const Ce=lt(u);je();const Pe=lt(u),Ue={x:Pe.x-Ce.x,y:Pe.y-Ce.y};(Ws(Ue.x)>3||Ws(Ue.y)>3)&&(m(),jt(u,Ce),S(Ue),I(je))})];if(fe.setPointerCapture(ie.pointerId),j)ge(Re);else if(!ae){const Ce=rs(Fb);if(Ce){const Pe=Ce(ge,Re,te,Ue=>{Ue?je():Le(be,je)});Le(be,Pe),Le(ee,X(Pe,!0))}}}})};let x=!0;return X(dt,[ke(v,"pointermove pointerleave",r),ke(y,"pointerenter",()=>{o(vc,!0)}),ke(y,"pointerleave pointercancel",()=>{o(vc,!1)}),!l&&ke(y,"mousedown",()=>{const B=pa();(ic(B,qt)||ic(B,fn)||B===document.body)&&Gs(X(ya,c),25)}),ke(y,"wheel",B=>{const{deltaX:M,deltaY:H,deltaMode:N}=B;x&&N===0&&Kr(y)===i&&S({x:M,y:H}),x=!1,o(xc,!0),w(()=>{x=!0,o(xc)}),ga(B)},{H:!1,I:!0}),ke(y,"pointerdown",X(ke,p,"click",Ld,{A:!0,I:!0,H:!1}),{I:!0}),L(),C,_])},Zb=(t,e,n,r,s,o)=>{let a,i,c,l,u,p=jn,m=0;const y=O=>O.pointerType==="mouse",[g,v]=nr(),[w,C]=nr(100),[I,_]=nr(100),[S,L]=nr(()=>m),[x,B]=Ub(t,s,r,zb(e,s,r,O=>y(O)&&fe())),{ht:M,Qt:H,wt:N}=s,{jt:E,Nt:z,qt:K,Bt:ee,Ft:ie}=x,ae=(O,D)=>{if(L(),O)E(wc);else{const U=X(E,wc,!0);m>0&&!D?S(U):U()}},fe=()=>{(c?!a:!l)&&(ae(!0),w(()=>{ae(!1)}))},me=O=>{E(ba,O,!0),E(ba,O,!1)},le=O=>{y(O)&&(a=c,c&&ae(!0))},Se=[L,C,_,v,()=>p(),ke(M,"pointerover",le,{A:!0}),ke(M,"pointerenter",le),ke(M,"pointerleave",O=>{y(O)&&(a=!1,c&&ae(!1))}),ke(M,"pointermove",O=>{y(O)&&i&&fe()}),ke(H,"scroll",O=>{g(()=>{K(),fe()}),o(O),ie()})];return[()=>X(dt,Le(Se,B())),({It:O,Dt:D,Zt:U,tn:Z})=>{const{nn:j,sn:q,en:W,cn:$}=Z||{},{Ct:se,dt:ge}=U||{},{ct:ye}=n,{k:we}=Ft(),{K:Be,rn:te}=r,[$e,ze]=O("showNativeOverlaidScrollbars"),[Re,Oe]=O("scrollbars.theme"),[Te,je]=O("scrollbars.visibility"),[be,Ce]=O("scrollbars.autoHide"),[Pe,Ue]=O("scrollbars.autoHideSuspend"),[bn]=O("scrollbars.autoHideDelay"),[Xt,Dn]=O("scrollbars.dragScroll"),[Fn,Vt]=O("scrollbars.clickScroll"),[xt,wn]=O("overflow"),Vn=ge&&!D,Hn=te.x||te.y,nt=j||q||$||se||D,Ze=W||je||wn,Cr=$e&&we.x&&we.y,Qt=(en,At,Un)=>{const xn=en.includes(hr)&&(Te===un||Te==="auto"&&At===hr);return E(Cb,xn,Un),xn};if(m=bn,Vn&&(Pe&&Hn?(me(!1),p(),I(()=>{p=ke(H,"scroll",X(me,!0),{A:!0})})):me(!0)),ze&&E(vb,Cr),Oe&&(E(u),E(Re,!0),u=Re),Ue&&!Pe&&me(!0),Ce&&(i=be==="move",c=be==="leave",l=be==="never",ae(l,!0)),Dn&&E(kb,Xt),Vt&&E(Tb,!!Fn),Ze){const en=Qt(xt.x,Be.x,!0),At=Qt(xt.y,Be.y,!1);E(Sb,!(en&&At))}nt&&(K(),z(),ie(),$&&ee(),E(bc,!te.x,!0),E(bc,!te.y,!1),E(bb,ye&&!N))},{},x]},Wb=t=>{const e=Ft(),{U:n,R:r}=e,{elements:s}=n(),{padding:o,viewport:a,content:i}=s,c=Js(t),l=c?{}:t,{elements:u}=l,{padding:p,viewport:m,content:y}=u||{},g=c?t:l.target,v=xd(g),w=g.ownerDocument,C=w.documentElement,I=()=>w.defaultView||ot,_=X(Ib,[g]),S=X(Od,[g]),L=X(or,""),x=X(_,L,a),B=X(S,L,i),M=te=>{const $e=ar(te),ze=Qs(te),Re=Jt(te,fd),Oe=Jt(te,pd);return ze.w-$e.w>0&&!gr(Re)||ze.h-$e.h>0&&!gr(Oe)},H=x(m),N=H===g,E=N&&v,z=!N&&B(y),K=!N&&H===z,ee=E?C:H,ie=E?ee:g,ae=!N&&S(L,o,p),fe=!K&&z,me=[fe,ee,ae,ie].map(te=>Js(te)&&!Kr(te)&&te),le=te=>te&&sd(me,te),Se=!le(ee)&&M(ee)?ee:g,O=E?C:ee,U={vt:g,ht:ie,ot:ee,ln:ae,bt:fe,gt:O,Qt:E?w:ee,an:v?C:Se,Kt:w,wt:v,Mt:c,nt:N,un:I,yt:te=>Xa(ee,qt,te),St:(te,$e)=>Xs(ee,qt,te,$e),Ot:()=>Xs(O,qt,hb,!0)},{vt:Z,ht:j,ln:q,ot:W,bt:$}=U,se=[()=>{It(j,[fn,Fo]),It(Z,Fo),v&&It(C,[Fo,fn])}];let ge=fa([$,W,q,j,Z].find(te=>te&&!le(te)));const ye=E?Z:$||W,we=X(dt,se);return[U,()=>{const te=I(),$e=pa(),ze=be=>{ct(Kr(be),fa(be)),mr(be)},Re=be=>ke(be,"focusin focusout focus blur",Ld,{I:!0,H:!1}),Oe="tabindex",Te=Ka(W,Oe),je=Re($e);return Gt(j,fn,N?"":db),Gt(q,va,""),Gt(W,qt,""),Gt($,_c,""),N||(Gt(W,Oe,Te||"-1"),v&&Gt(C,yc,"")),ct(ye,ge),ct(j,q),ct(q||j,!N&&W),ct(W,$),Le(se,[je,()=>{const be=pa(),Ce=le(W),Pe=Ce&&be===W?Z:be,Ue=Re(Pe);It(q,va),It($,_c),It(W,qt),v&&It(C,yc),Te?Gt(W,Oe,Te):It(W,Oe),le($)&&ze($),Ce&&ze(W),le(q)&&ze(q),ya(Pe),Ue()}]),r&&!N&&(Ja(W,qt,Pd),Le(se,X(It,W,qt))),ya(!N&&v&&$e===Z&&te.top===te?W:$e),je(),ge=0,we},we]},Gb=({bt:t})=>({Zt:e,_n:n,Dt:r})=>{const{xt:s}=e||{},{$t:o}=n;t&&(s||r)&&Jr(t,{[fo]:o&&"100%"})},qb=({ht:t,ln:e,ot:n,nt:r},s)=>{const[o,a]=it({i:eb,o:lc()},X(lc,t,"padding",""));return({It:i,Zt:c,_n:l,Dt:u})=>{let[p,m]=a(u);const{R:y}=Ft(),{ft:g,Ht:v,Ct:w}=c||{},{ct:C}=l,[I,_]=i("paddingAbsolute");(g||m||(u||v))&&([p,m]=o(u));const L=!r&&(_||w||m);if(L){const x=!I||!e&&!y,B=p.r+p.l,M=p.t+p.b,H={[dd]:x&&!C?-B:0,[ud]:x?-M:0,[ld]:x&&C?-B:0,top:x?-p.t:0,right:x?C?-p.r:"auto":0,left:x?C?"auto":-p.l:0,[uo]:x&&"calc(100% + ".concat(B,"px)")},N={[od]:x?p.t:0,[ad]:x?p.r:0,[cd]:x?p.b:0,[id]:x?p.l:0};Jr(e||n,H),Jr(n,N),he(s,{ln:p,dn:!x,rt:e?N:he({},H,N)})}return{fn:L}}},Yb=(t,e)=>{const n=Ft(),{ht:r,ln:s,ot:o,nt:a,Qt:i,gt:c,wt:l,St:u,un:p}=t,{R:m}=n,y=l&&a,g=X(nd,0),v={display:()=>!1,direction:D=>D!=="ltr",flexDirection:D=>D.endsWith("-reverse"),writingMode:D=>D!=="horizontal-tb"},w=Et(v),C={i:hd,o:{w:0,h:0}},I={i:Es,o:{}},_=D=>{u(jd,!y&&D)},S=D=>{if(!w.some(ye=>{const we=D[ye];return we&&v[ye](we)}))return{D:{x:0,y:0},M:{x:1,y:1}};_(!0);const Z=lt(c),j=u(mb,!0),q=ke(i,hr,ye=>{const we=lt(c);ye.isTrusted&&we.x===Z.x&&we.y===Z.y&&Ad(ye)},{I:!0,A:!0});jt(c,{x:0,y:0}),j();const W=lt(c),$=Qs(c);jt(c,{x:$.w,y:$.h});const se=lt(c);jt(c,{x:se.x-W.x<1&&-$.w,y:se.y-W.y<1&&-$.h});const ge=lt(c);return jt(c,Z),za(()=>q()),{D:W,M:ge}},L=(D,U)=>{const Z=ot.devicePixelRatio%1!==0?1:0,j={w:g(D.w-U.w),h:g(D.h-U.h)};return{w:j.w>Z?j.w:0,h:j.h>Z?j.h:0}},[x,B]=it(C,X(ei,o)),[M,H]=it(C,X(Qs,o)),[N,E]=it(C),[z]=it(I),[K,ee]=it(C),[ie]=it(I),[ae]=it({i:(D,U)=>po(D,U,w),o:{}},()=>ib(o)?Jt(o,w):{}),[fe,me]=it({i:(D,U)=>Es(D.D,U.D)&&Es(D.M,U.M),o:Id()}),le=rs(Hd),Se=(D,U)=>{const Z=U?ub:fb;return"".concat(Z).concat(Qv(D))},O=D=>{const U=j=>[un,In,hr].map(q=>Se(q,j)),Z=U(!0).concat(U()).join(" ");u(Z),u(Et(D).map(j=>Se(D[j],j==="x")).join(" "),!0)};return({It:D,Zt:U,_n:Z,Dt:j},{fn:q})=>{const{ft:W,Ht:$,Ct:se,dt:ge,zt:ye}=U||{},we=le&&le.tt(t,e,Z,n,D),{it:Be,ut:te,_t:$e}=we||{},[ze,Re]=Mb(D,n),[Oe,Te]=D("overflow"),je=gr(Oe.x),be=gr(Oe.y),Ce=!0;let Pe=B(j),Ue=H(j),bn=E(j),Xt=ee(j);Re&&m&&u(Pd,!ze);{Xa(r,fn,Ls)&&_(!0);const[Zn]=te?te():[],[tn]=Pe=x(j),[Lt]=Ue=M(j),Wn=kd(o),Gn=y&&ab(p()),bo={w:g(Lt.w+tn.w),h:g(Lt.h+tn.h)},ss={w:g((Gn?Gn.w:Wn.w+g(Wn.w-Lt.w))+tn.w),h:g((Gn?Gn.h:Wn.h+g(Wn.h-Lt.h))+tn.h)};Zn&&Zn(),Xt=K(ss),bn=N(L(bo,ss),j)}const[Dn,Fn]=Xt,[Vt,xt]=bn,[wn,Vn]=Ue,[Hn,nt]=Pe,[Ze,Cr]=z({x:Vt.w>0,y:Vt.h>0}),Qt=je&&be&&(Ze.x||Ze.y)||je&&Ze.x&&!Ze.y||be&&Ze.y&&!Ze.x,en=q||se||ye||nt||Vn||Fn||xt||Te||Re||Ce,At=Db(Ze,Oe),[Un,xn]=ie(At.K),[Sr,vo]=ae(j),zn=se||ge||vo||Cr||j,[Cn,Tr]=zn?fe(S(Sr),j):me();return en&&(xn&&O(At.K),$e&&Be&&Jr(o,$e(At,Z,Be(At,wn,Hn)))),_(!1),Xs(r,fn,Ls,Qt),Xs(s,va,Ls,Qt),he(e,{K:Un,Vt:{x:Dn.w,y:Dn.h},Rt:{x:Vt.w,y:Vt.h},rn:Ze,Lt:cb(Cn,Vt)}),{en:xn,nn:Fn,sn:xt,cn:Tr||xt,vn:zn}}},Kb=t=>{const[e,n,r]=Wb(t),s={ln:{t:0,r:0,b:0,l:0},dn:!1,rt:{[dd]:0,[ud]:0,[ld]:0,[od]:0,[ad]:0,[cd]:0,[id]:0},Vt:{x:0,y:0},Rt:{x:0,y:0},K:{x:In,y:In},rn:{x:!1,y:!1},Lt:Id()},{vt:o,gt:a,nt:i,Ot:c}=e,{R:l,k:u}=Ft(),p=!l&&(u.x||u.y),m=[Gb(e),qb(e,s),Yb(e,s)];return[n,y=>{const g={},w=p&&lt(a),C=w&&c();return _e(m,I=>{he(g,I(y,g)||{})}),jt(a,w),C&&C(),!i&&jt(o,0),g},s,e,r]},Jb=(t,e,n,r,s)=>{let o=!1;const a=gc(e,{}),[i,c,l,u,p]=Kb(t),[m,y,g]=Hb(u,l,a,S=>{_({},S)}),[v,w,,C]=Zb(t,e,g,l,u,s),I=S=>Et(S).some(L=>!!S[L]),_=(S,L)=>{if(n())return!1;const{pn:x,Dt:B,At:M,hn:H}=S,N=x||{},E=!!B||!o,z={It:gc(e,N,E),pn:N,Dt:E};if(H)return w(z),!1;const K=L||y(he({},z,{At:M})),ee=c(he({},z,{_n:g,Zt:K}));w(he({},z,{Zt:K,tn:ee}));const ie=I(K),ae=I(ee),fe=ie||ae||!Ya(N)||E;return o=!0,fe&&r(S,{Zt:K,tn:ee}),fe};return[()=>{const{an:S,gt:L,Ot:x}=u,B=lt(S),M=[m(),i(),v()],H=x();return jt(L,B),H(),X(dt,M)},_,()=>({gn:g,bn:l}),{wn:u,yn:C},p]},Pt=(t,e,n)=>{const{N:r}=Ft(),s=Js(t),o=s?t:t.target,a=Md(o);if(e&&!a){let i=!1;const c=[],l={},u=N=>{const E=gd(N),z=rs($b);return z?z(E,!0):E},p=he({},r(),u(e)),[m,y,g]=_a(),[v,w,C]=_a(n),I=(N,E)=>{C(N,E),g(N,E)},[_,S,L,x,B]=Jb(t,p,()=>i,({pn:N,Dt:E},{Zt:z,tn:K})=>{const{ft:ee,Ct:ie,xt:ae,Ht:fe,Et:me,dt:le}=z,{nn:Se,sn:O,en:D,cn:U}=K;I("updated",[H,{updateHints:{sizeChanged:!!ee,directionChanged:!!ie,heightIntrinsicChanged:!!ae,overflowEdgeChanged:!!Se,overflowAmountChanged:!!O,overflowStyleChanged:!!D,scrollCoordinatesChanged:!!U,contentMutation:!!fe,hostMutation:!!me,appear:!!le},changedOptions:N||{},force:!!E}])},N=>I("scroll",[H,N])),M=N=>{Pb(o),dt(c),i=!0,I("destroyed",[H,N]),y(),w()},H={options(N,E){if(N){const z=E?r():{},K=Rd(p,he(z,u(N)));Ya(K)||(he(p,K),S({pn:K}))}return he({},p)},on:v,off:(N,E)=>{N&&E&&w(N,E)},state(){const{gn:N,bn:E}=L(),{ct:z}=N,{Vt:K,Rt:ee,K:ie,rn:ae,ln:fe,dn:me,Lt:le}=E;return he({},{overflowEdge:K,overflowAmount:ee,overflowStyle:ie,hasOverflow:ae,scrollCoordinates:{start:le.D,end:le.M},padding:fe,paddingAbsolute:me,directionRTL:z,destroyed:i})},elements(){const{vt:N,ht:E,ln:z,ot:K,bt:ee,gt:ie,Qt:ae}=x.wn,{Xt:fe,Gt:me}=x.yn,le=O=>{const{Pt:D,Ut:U,Tt:Z}=O;return{scrollbar:Z,track:U,handle:D}},Se=O=>{const{Yt:D,Wt:U}=O,Z=le(D[0]);return he({},Z,{clone:()=>{const j=le(U());return S({hn:!0}),j}})};return he({},{target:N,host:E,padding:z||K,viewport:K,content:ee||K,scrollOffsetElement:ie,scrollEventElement:ae,scrollbarHorizontal:Se(fe),scrollbarVertical:Se(me)})},update:N=>S({Dt:N,At:!0}),destroy:X(M,!1),plugin:N=>l[Et(N)[0]]};return Le(c,[B]),jb(o,H),Vd(Dd,Pt,[H,m,l]),Rb(x.wn.wt,!s&&t.cancel)?(M(!0),H):(Le(c,_()),I("initialized",[H]),H.update(),H)}return a};Pt.plugin=t=>{const e=Dt(t),n=e?t:[t],r=n.map(s=>Vd(s,Pt)[0]);return Bb(n),e?r:r[0]};Pt.valid=t=>{const e=t&&t.elements,n=bt(e)&&e();return Ks(n)&&!!Md(n.target)};Pt.env=()=>{const{T:t,k:e,R:n,V:r,B:s,F:o,U:a,P:i,N:c,q:l}=Ft();return he({},{scrollbarsSize:t,scrollbarsOverlaid:e,scrollbarsHiding:n,scrollTimeline:r,staticDefaultInitialization:s,staticDefaultOptions:o,getDefaultInitialization:a,setDefaultInitialization:i,getDefaultOptions:c,setDefaultOptions:l})};Pt.nonce=Ab;const Xb=()=>{if(typeof window>"u"){const l=()=>{};return[l,l]}let t,e;const n=window,r=typeof n.requestIdleCallback=="function",s=n.requestAnimationFrame,o=n.cancelAnimationFrame,a=r?n.requestIdleCallback:s,i=r?n.cancelIdleCallback:o,c=()=>{i(t),o(e)};return[(l,u)=>{c(),t=a(r?()=>{c(),e=s(l)}:l,typeof u=="object"?u:{timeout:2233})},c]},Qb=t=>{const{options:e,events:n,defer:r}=t||{},[s,o]=T.useMemo(Xb,[]),a=T.useRef(null),i=T.useRef(r),c=T.useRef(e),l=T.useRef(n);return T.useEffect(()=>{i.current=r},[r]),T.useEffect(()=>{const{current:u}=a;c.current=e,Pt.valid(u)&&u.options(e||{},!0)},[e]),T.useEffect(()=>{const{current:u}=a;l.current=n,Pt.valid(u)&&u.on(n||{},!0)},[n]),T.useEffect(()=>()=>{var u;o(),(u=a.current)==null||u.destroy()},[]),T.useMemo(()=>[u=>{const p=a.current;if(Pt.valid(p))return;const m=i.current,y=c.current||{},g=l.current||{},v=()=>a.current=Pt(u,y,g);m?s(v,m):v()},()=>a.current],[])},ew=(t,e)=>{const{element:n="div",options:r,events:s,defer:o,children:a,...i}=t,c=n,l=T.useRef(null),u=T.useRef(null),[p,m]=Qb({options:r,events:s,defer:o});return T.useEffect(()=>{const{current:y}=l,{current:g}=u;if(!y)return;const v=y;return p(n==="body"?{target:v,cancel:{body:null}}:{target:v,elements:{viewport:g,content:g}}),()=>{var w;return(w=m())==null?void 0:w.destroy()}},[p,n]),T.useImperativeHandle(e,()=>({osInstance:m,getElement:()=>l.current}),[]),Ie.createElement(c,{"data-overlayscrollbars-initialize":"",ref:l,...i},n==="body"?a:Ie.createElement("div",{"data-overlayscrollbars-contents":"",ref:u},a))},si=T.forwardRef(ew),zd=t=>{const{scene:e}=t,n=T.useRef(null),r=T.useRef(null),s=Ql(),{updateChatContentScroll:o,updateInitialScreenScroll:a}=ts(),i=e==="ChatContent",c=T.useCallback(()=>{var p;if(i){const m=(p=n.current)==null?void 0:p.getElement();m&&m.setAttribute("data-loaded",Date.now()+"")}},[i]),l=T.useCallback(()=>{var m;const p=(m=n.current)==null?void 0:m.osInstance();if(p){const{scrollOffsetElement:y}=p.elements(),g=Math.ceil(y.scrollHeight);y.scrollTo({behavior:"smooth",top:g})}},[]),u=T.useCallback(()=>{var m;const p=(m=n.current)==null?void 0:m.osInstance();if(p){const{scrollOffsetElement:y}=p.elements(),g=y.scrollTop||0,v=y.offsetHeight||0,w=y.scrollHeight||0,C=w-v||0,I=C<=0?{top:g,percent:0,scrollOffset:C}:{top:g,scrollOffset:C,percent:Math.ceil(g/(w-v)*100)};({ChatContent:()=>{o(I)},InitialScreen:()=>{a(I)}})[e]()}},[e,o,a]);return T.useEffect(()=>{var y;let p=null;const m=()=>{r.current&&(clearTimeout(r.current),r.current=null)};if(i){const g=(y=n.current)==null?void 0:y.getElement();g&&(p=new MutationObserver(v=>{Df(v,"data-ignore-mutation-observer")||(m(),r.current=setTimeout(l,0))}),p.observe(g,{childList:!0,attributes:!0,subtree:!0,attributeFilter:["data-loaded"]}))}return()=>{m(),p==null||p.disconnect(),p=null}},[i,l]),T.useEffect(()=>{s&&i&&l()},[i,s,l]),{osRef:n,updateScrollValue:c,scrollToBottom:l,onScroll:u}};function Zd(t){let e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Zd(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function We(...t){let e=0,n,r,s="";for(;e<t.length;)(n=t[e++])&&(r=Zd(n))&&(s&&(s+=" "),s+=r);return s}const tw="_bottomFixedArea_12mgx_6",nw="_paddingBottom_12mgx_15",Sc={bottomFixedArea:tw,paddingBottom:nw},rw=t=>{const{page:e}=t,{enableUserInput:n}=Wy();return e!==Ee.Conversation?null:f.jsx(si,{className:We(Sc.bottomFixedArea,{[Sc.paddingBottom]:!n}),options:{scrollbars:{autoHide:"scroll"}},children:f.jsx(n_,{})})};function sw(t){return t.flatMap(e=>e.items.map(n=>({...e,...n})))}const ow=t=>{t&&window.open(t,"_blank")},aw=ut.getSubLogger({name:"ErrorBoundary"}),iw=ut.getSubLogger({name:"GlobalErrorHandler"}),cw=ut.getSubLogger({name:"MediaSourceErrorBoundary"});function oi(t,e,n){n.error(t),e.componentStack&&n.error("Component stack: ".concat(e.componentStack))}function ai(t,e){oi(t,e,aw)}function GS(t,e){oi(t,e,iw)}function Wd(t){oi(t,{},cw)}function Gd(t){return t.type==="system"}function ii(t,e){return e?t.alignment===e.alignment&&t.formattedTime===e.formattedTime&&t.role===e.role&&t.rid===e.rid:!1}function lw(t,e){return e===void 0||Gd(e)?!0:!ii(t,e)}function dw(t,e){return e===void 0||Gd(e)?!0:!ii(t,e)}function uw(){}function fw(t){var K,ee;const{message:e,messageArray:n,index:r,onButtonClick:s}=t,{linkProtocol:o,linkTarget:a,botIconVerticalAlign:i}=ve(wt),{type:c,alignment:l,formattedTime:u,participantName:p="",avatar:m,resend:y}=e,[g]=et(),{onComposer:v}=Zy(),w=ed(),C={avatarVerticalAlign:i,linkProtocol:o,linkTarget:a,errorMessageText:g("invalidRichMedia"),onButtonClick:s,onMediaSourceError:Wd,onMessageError:ai},I=c==="system",S=I||c==="file",L=r===n.length-1,x=ii(e,n[r-1]),B=lw(e,n[r-1]),M=dw(e,n[r+1]),H=!I&&B&&l==="received",N=!I&&M&&!!p,E=!I&&M&&!!u,z=T.useMemo(()=>E?u.replace(/AM/gi,g("AM")).replace(/PM/gi,g("PM")):"",[g,E,u]);return S&&((K=e==null?void 0:e.smart_text)!=null&&K.key)&&(e.children=g(e.smart_text.key,((ee=e.smart_text)==null?void 0:ee.options)||{})),f.jsx(Yl,{...e,...C,enableRTL:w,hasAvatar:H,hasName:N,hasTimestamp:E,formattedTime:z,avatarUrl:m==null?void 0:m.url,avatarType:m==null?void 0:m.type,participantName:g(p),isInSeries:x,isLastMessage:L,onResend:y||uw,onComposer:v})}function pw(t){const{onButtonClick:e}=t,n=T.useRef(Date.now()),{messages:r}=ve(Ky),{linkProtocol:s,linkTarget:o,botIcon:a,botIconVerticalAlign:i}=ve(wt),[c]=et(),l={avatarVerticalAlign:i,linkProtocol:s,linkTarget:o,errorMessageText:c("invalidRichMedia"),onButtonClick:e,onMediaSourceError:Wd,onMessageError:ai},u=T.useCallback(()=>!1,[]);return f.jsx(f.Fragment,{children:r.map((p,m)=>T.createElement(Yl,{...l,key:p.key,sid:p.key,tid:p.key,avatarUrl:a,status:"success",alignment:"received",isInSeries:m>0,hasAvatar:m===0,onResend:u,timestamp:n.current,hasTimestamp:!1,formattedTime:oo(n.current),type:"text",text:p.value}))})}const hw=({messages:t})=>{const{send:e}=Fa(),n=td(),r=T.useCallback(async s=>{switch(s.type){case"reply":n&&await e({data:s.text,type:s.type,payload:s.payload});break;case"call":case"link":ow(s.payload);break}},[n,e]);return f.jsxs(f.Fragment,{children:[f.jsx(pw,{onButtonClick:r}),sw(t).map((s,o,a)=>f.jsx(fw,{message:s,index:o,messageArray:a,onButtonClick:r},"".concat(s.tid||s.sid,"-").concat(o)))]})},mw="_text_1gk1d_6",gw={text:mw},yw=()=>{const t=ve(n=>n.config.options.endedChatMessage),[e]=et();return f.jsx("p",{className:gw.text,"data-qa":"chat ended",children:t||e("endedChatMessage")})},_w="_feedbackMessage_1ke5d_6",vw="_feedbackContainer_1ke5d_14",bw="_iframe_1ke5d_34",ww="_hidden_1ke5d_49",xs={feedbackMessage:_w,feedbackContainer:vw,iframe:bw,hidden:ww},xw=({feedbackLink:t,updateScrollValue:e})=>{const[n]=et(),r=T.useRef(null),s=T.useRef(null),o=T.useRef(null),{showMessage:a,height:i,message:c,hidden:l,pending:u}=Gv(),{updateFeedbackStatus:p}=ts(),m=T.useCallback(()=>{o.current&&(clearTimeout(o.current),o.current=null)},[]),y=T.useCallback(I=>{if(m(),!I||typeof I.status!="string"||typeof I.message!="string")p({status:"error",message:"feedbackLoadFailed",height:0,reason:I});else{const{status:_,message:S,height:L=300}=I;p({status:_,message:S,height:L}),_==="SURVEY_UNSUBMITTED"&&e()}},[m,e,p]),g=T.useCallback(()=>{m(),o.current=setTimeout(()=>{p({status:"error",message:"feedbackLoadFailed",height:0,reason:"timeout"})},15e3)},[m,p]),v=T.useCallback(()=>{var _;if(s.current)return!1;const I=r.current;return I?(s.current=new al({name:"Parent",sender:I.contentWindow,topic:"feedback"}),(_=s.current)==null||_.register("feedbackStatusChange",y),!0):!1},[y]),w=T.useCallback(()=>{var I,_;(I=s.current)==null||I.unregister("feedbackStatusChange"),(_=s.current)==null||_.destroy(),s.current=null},[]),C=()=>{p({status:"error",message:"feedbackLoadFailed",height:0,reason:"iframeLoadedError"})};return T.useEffect(()=>(r.current&&(g(),v()),()=>{m(),w()}),[g,m,v,w]),T.useEffect(()=>{(l||a)&&(m(),w())},[l,a,m,w]),l?f.jsx("div",{"data-ignore-mutation-observer":"1","aria-hidden":"true",className:xs.hidden}):a?f.jsx("p",{className:xs.feedbackMessage,"aria-label":n(c),"data-ignore-mutation-observer":"1",children:n(c)}):f.jsx("div",{className:xs.feedbackContainer,style:{height:u||l?0:i},"data-testid":"feedback-container","aria-hidden":u||l,"aria-label":"Feedback","data-ignore-mutation-observer":"1",children:f.jsx("iframe",{ref:r,src:t,className:xs.iframe,onError:C,title:"Feedback","data-testid":"feedback-iframe"})})},Cw="_hidden_xxytr_1",Sw={hidden:Cw},Tw=({message:t})=>t?f.jsx("div",{className:Sw.hidden,role:"log","aria-atomic":"true","aria-live":"polite",children:t.items.map((e,n)=>e.type==="text"?f.jsx("p",{children:e.text},n):null)}):null,kw="_wrapper_ivzoz_14",Ew="_chatContent_ivzoz_22",Tc={wrapper:kw,chatContent:Ew},qS=t=>{const{page:e,messages:n,feedbackLink:r="",shouldLoadFeedback:s}=t,{hideTypingMessage:o}=Fa(),{osRef:a,updateScrollValue:i,onScroll:c}=zd({scene:"ChatContent"}),l=e===Ee.End||e===Ee.Error,u=s&&r;return T.useEffect(()=>{l&&o()},[l,o]),f.jsxs("div",{className:Tc.wrapper,children:[f.jsxs(si,{className:Tc.chatContent,options:{scrollbars:{autoHide:"scroll"},update:{attributes:["data-scroll"]}},events:{scroll:c},ref:a,children:[f.jsx(hw,{messages:n}),l&&f.jsx(yw,{}),u&&f.jsx(xw,{feedbackLink:r,updateScrollValue:i})]}),f.jsx(rw,{page:e}),f.jsx(Tw,{message:n[n.length-1]||void 0})]})};function tt(t){return f.jsx(T.Suspense,{children:t.children})}const Aw=Ie.lazy(()=>xe(()=>import("./Arrow-BIFPurkU.js"),__vite__mapDeps([18,1]),import.meta.url)),Lw=Ie.lazy(()=>xe(()=>import("./Attachment-CWbnzsTA.js"),__vite__mapDeps([19,1]),import.meta.url)),Iw=Ie.lazy(()=>xe(()=>import("./Close-pjcaxt8-.js"),__vite__mapDeps([20,1]),import.meta.url)),Rw=Ie.lazy(()=>xe(()=>import("./Clear-CS4zU9u8.js"),__vite__mapDeps([21,1]),import.meta.url)),jw=Ie.lazy(()=>xe(()=>import("./Confirm-DDlQ6YZn.js"),__vite__mapDeps([22,1]),import.meta.url)),Pw=Ie.lazy(()=>xe(()=>import("./Emoji-COfvhN7W.js"),__vite__mapDeps([23,1]),import.meta.url)),Nw=Ie.lazy(()=>xe(()=>import("./Minimize-EBBEeR-0.js"),__vite__mapDeps([24,1]),import.meta.url)),Bw=Ie.lazy(()=>xe(()=>import("./MoreVert-BE7Le2SD.js"),__vite__mapDeps([25,1]),import.meta.url)),$w=Ie.lazy(()=>xe(()=>import("./Retry-D2AhBxhY.js"),__vite__mapDeps([26,1]),import.meta.url)),Ow=Ie.lazy(()=>xe(()=>import("./Send-t9sT8p0t.js"),__vite__mapDeps([27,1]),import.meta.url)),Mw=Ie.lazy(()=>xe(()=>import("./Warning-D78NKuu6.js"),__vite__mapDeps([28,1]),import.meta.url)),Dw=Ie.lazy(()=>xe(()=>import("./Logo-Csh_f_2t.js"),__vite__mapDeps([29,1]),import.meta.url)),Fw=Ie.lazy(()=>xe(()=>import("./Download-CcRizf4t.js"),__vite__mapDeps([30,1]),import.meta.url)),Vw=Ie.lazy(()=>xe(()=>import("./Terminate-Dz9_wd-I.js"),__vite__mapDeps([31,1]),import.meta.url)),Hw=Ie.lazy(()=>xe(()=>import("./Refresh-ueDGeYgw.js"),__vite__mapDeps([32,1]),import.meta.url)),ci=t=>f.jsx(tt,{children:f.jsx(Aw,{...t})}),qd=()=>f.jsx(tt,{children:f.jsx(Lw,{})}),Yd=()=>f.jsx(tt,{children:f.jsx(Iw,{})}),go=()=>f.jsx(tt,{children:f.jsx(Rw,{})}),Kd=()=>f.jsx(tt,{children:f.jsx(jw,{})}),Jd=()=>f.jsx(tt,{children:f.jsx(Pw,{})}),Xd=()=>f.jsx(tt,{children:f.jsx(Nw,{})}),Qd=()=>f.jsx(tt,{children:f.jsx(Bw,{})}),eu=()=>f.jsx(tt,{children:f.jsx($w,{})}),tu=()=>f.jsx(tt,{children:f.jsx(Ow,{})}),Uw=()=>f.jsx(tt,{children:f.jsx(Fw,{})}),nu=()=>f.jsx(tt,{children:f.jsx(Vw,{})}),zw=()=>f.jsx(tt,{children:f.jsx(Hw,{})}),Zw=()=>f.jsx(tt,{children:f.jsx(Mw,{})}),ru=t=>f.jsx(tt,{children:f.jsx(Dw,{...t})}),Ww=Object.freeze(Object.defineProperty({__proto__:null,Arrow:ci,Attachment:qd,Clear:go,Close:Yd,Confirm:Kd,Download:Uw,Emoji:Jd,Logo:ru,Minimize:Xd,MoreVert:Qd,Refresh:zw,Retry:eu,Send:tu,Terminate:nu,Warning:Zw},Symbol.toStringTag,{value:"Module"}));var yr=(t=>(t.LEFT="left",t.RIGHT="right",t))(yr||{});const su=T.createContext({open:!1,align:"left"}),Gw=su.Provider,ou=()=>T.useContext(su),qw=({handler:t,isExecuted:e,nodes:n})=>{T.useEffect(()=>{if(!(n!=null&&n[0])||!e)return;const r=o=>n.some(a=>a===o||(a==null?void 0:a.contains(o))),s=({target:o})=>{o instanceof Node&&r(o)||t==null||t()};return document.addEventListener("click",s),window.addEventListener("blur",s),()=>{document.removeEventListener("click",s),window.removeEventListener("blur",s)}},[e,n,t])},pn={"dropdown-wrapper":"_dropdown-wrapper_rc6w0_19","dropdown-input":"_dropdown-input_rc6w0_24","dropdown-input-placeholder":"_dropdown-input-placeholder_rc6w0_54","dropdown-input-arrow":"_dropdown-input-arrow_rc6w0_57","dropdown-popup":"_dropdown-popup_rc6w0_65","dropdown-popup-visible":"_dropdown-popup-visible_rc6w0_78","dropdown-content":"_dropdown-content_rc6w0_84","dropdown-content-item":"_dropdown-content-item_rc6w0_99"},Yw=({active:t,options:e,onClickOption:n})=>{const[r]=et(),s=o=>{n==null||n(o)};return f.jsx("ul",{className:pn["dropdown-content"],children:e==null?void 0:e.map((o,a)=>{var i,c;return f.jsx("li",{className:pn["dropdown-content-item"],"data-disabled":!!o.disabled,"data-active":o.value===t,title:r(o.label),"aria-label":r(o.label),children:f.jsxs("button",{disabled:o.disabled,"aria-disabled":o.disabled,onClick:()=>s(o),children:[(c=(i=Object.entries(Ww).find(([l])=>l.toLowerCase()===o.icon))==null?void 0:i[1])==null?void 0:c.call(i,{}),r(o.label)]})},a)})})},Kw=t=>{const{forwardedRef:e,placeholder:n="Please input...",disabled:r,onClick:s,children:o}=t,{open:a}=ou();return f.jsxs("button",{ref:e,className:pn["dropdown-input"],"data-focus":a,disabled:r,"aria-disabled":r,onClick:s,children:[o||f.jsx("span",{className:pn["dropdown-input-placeholder"],children:n}),f.jsx(ci,{className:pn["dropdown-input-arrow"]})]})},Jw=({forwardedRef:t,visible:e,children:n})=>{const{align:r,top:s}=ou(),o=T.useMemo(()=>We(pn["dropdown-popup"],{[pn["dropdown-popup-visible"]]:!!e}),[e]),a=T.useMemo(()=>({top:"".concat(s!=null?s:0,"px"),left:"".concat(r===yr.LEFT?0:"auto"),right:"".concat(r===yr.RIGHT?0:"auto")}),[s,r]);return f.jsx("div",{ref:t,className:o,style:a,children:n})},Xw=({children:t})=>f.jsx("div",{className:pn["dropdown-wrapper"],children:t}),au=t=>{const{option:e,options:n,align:r=yr.LEFT,placeholder:s="Please select...",customInput:o,children:a,onChange:i}=t,c=T.useRef(null),l=T.useRef(null),[u,p]=T.useState(!1),m=c.current,y=l.current,g=T.useMemo(()=>{var C;return(C=m==null?void 0:m.clientHeight)!=null?C:0},[m]);qw({isExecuted:u,nodes:[m,y],handler:()=>p(!1)});const v=C=>{C.stopPropagation(),C.preventDefault(),p(I=>!I)},w=C=>{p(!1),i==null||i(C)};return f.jsx(Gw,{value:{open:u,align:r,top:g},children:f.jsxs(Xw,{children:[o?Ie.cloneElement(o,{[typeof o.type=="function"?"forwardedRef":"ref"]:c,onClick:v}):f.jsx(Kw,{placeholder:s,forwardedRef:c,onClick:v,children:e==null?void 0:e.label}),f.jsx(Jw,{visible:u,forwardedRef:l,children:typeof a=="function"?a({onClick:w}):f.jsx(Yw,{active:e==null?void 0:e.value,options:n,onClickOption:w})})]})})};au.whyDidYouRender=!0;const Qw="_logo_3ajxb_19",ex="_customizedLogo_3ajxb_29",tx="_defaultLogo_3ajxb_37",Ho={logo:Qw,customizedLogo:ex,defaultLogo:tx},nx=()=>{const{chatTitleIcon:t}=ve(wt);return f.jsx("div",{className:Ho.logo,"data-testid":"logo",children:t?f.jsx("div",{className:Ho.customizedLogo,style:{backgroundImage:"url(".concat(t,")")}}):f.jsx(ru,{className:Ho.defaultLogo})})},rx="_mask_15l67_106",sx="_start_15l67_117",ox="_circle_15l67_1",ax="_loading_15l67_1",kc={mask:rx,start:sx,"fade-in":"_fade-in_15l67_125","fade-out":"_fade-out_15l67_129",circle:ox,loading:ax,"move-x":"_move-x_15l67_1","slide-down":"_slide-down_15l67_1","slide-in":"_slide-in_15l67_1","slide-out":"_slide-out_15l67_1"};function ix(t){const{className:e,children:n,backgroundColor:r,align:s="center"}=t;return f.jsx("div",{style:{backgroundColor:r},className:We(kc.mask,{[kc.start]:s==="start"},e),children:n})}const cx="_wrapper_18ki2_106",lx="_dialog_18ki2_121",dx="_close_18ki2_126",ux="_header_18ki2_146",fx="_icon_18ki2_151",px="_content_18ki2_158",hx="_title_18ki2_172",mx="_description_18ki2_175",gx="_footer_18ki2_179",yx="_confirm_18ki2_184",_x="_circle_18ki2_1",vx="_loading_18ki2_1",gt={wrapper:cx,"slide-in":"_slide-in_18ki2_113","slide-out":"_slide-out_18ki2_117",dialog:lx,close:dx,header:ux,icon:fx,content:px,title:hx,description:mx,footer:gx,confirm:yx,circle:_x,loading:vx,"move-x":"_move-x_18ki2_1","slide-down":"_slide-down_18ki2_1","fade-in":"_fade-in_18ki2_1","fade-out":"_fade-out_18ki2_1"},iu=t=>{const{visible:e,icon:n,title:r,description:s,confirmText:o,cancelText:a,isLoading:i=!1,onConfirm:c,onCancel:l}=t,u=T.useRef(null),[p,m]=T.useState(!1);return T.useEffect(()=>{var y;if(e)(y=u.current)==null||y.focus(),m(!0);else{const g=setTimeout(()=>m(!1),200);return()=>clearTimeout(g)}},[e]),p?f.jsx(Nv,{children:f.jsx(ix,{className:gt["".concat(e?"fade-in":"fade-out")],align:"start",children:f.jsx("div",{className:We(gt.wrapper,gt["".concat(e?"slide-in":"slide-out")]),children:f.jsxs("div",{className:gt.dialog,children:[f.jsx("button",{className:gt.close,"aria-label":a,onClick:l,children:f.jsx(Yd,{})}),f.jsx("div",{className:gt.header,children:f.jsx("div",{className:gt.icon,children:n})}),f.jsxs("div",{className:gt.content,children:[f.jsx("p",{className:gt.title,children:r}),f.jsx("p",{className:gt.description,children:s})]}),f.jsx("div",{className:gt.footer,children:f.jsxs("button",{ref:u,className:gt.confirm,onClick:c,disabled:i,"aria-disabled":i,"aria-label":o,children:[i?f.jsx(Ha,{size:"tiny"}):null,f.jsx("span",{children:o})]})})]})})})}):null},bx=t=>{const{visible:e,isLoading:n=!1,onConfirm:r,onCancel:s}=t,[o]=et(),{chatDialogBoxEndChat:a,chatConfirmButtonEndChat:i,chatCancelButtonEndChat:c}=ve(wt),l=T.useMemo(()=>({chatDialogBoxEndChatTitle:o("chatConfirmButtonEndChat"),chatDialogBoxEndChatDescription:a||o("chatDialogBoxEndChat"),chatConfirmButtonEndChat:i||o("chatConfirmButtonEndChat"),chatCancelButtonEndChat:c||o("chatCancelButtonEndChat")}),[o,a,i,c]);return f.jsx(iu,{visible:e,title:l.chatDialogBoxEndChatTitle,description:l.chatDialogBoxEndChatDescription,isLoading:n,onConfirm:r,onCancel:s,confirmText:l.chatConfirmButtonEndChat,cancelText:l.chatCancelButtonEndChat,icon:f.jsx(Kd,{})})},wx="_button_1rhpj_19",xx={button:wx},xr=t=>{const{forwardedRef:e,children:n,onClick:r,disabled:s,className:o,...a}=t,i=c=>{s||r==null||r(c)};return f.jsx("button",{ref:e,onClick:i,disabled:s,"aria-disabled":s,className:We(xx.button,o),...a,children:n})},Cx="_header_bv5to_19",Sx="_withBoxShadow_bv5to_26",Tx="_withSeparator_bv5to_29",kx="_left_bv5to_33",Ex="_desc_bv5to_47",Ax="_title_bv5to_52",Lx="_subtitle_bv5to_62",Ix="_icon_bv5to_78",Rt={header:Cx,withBoxShadow:Sx,withSeparator:Tx,left:kx,desc:Ex,title:Ax,subtitle:Lx,icon:Ix},Rx=({disabled:t,onClick:e})=>f.jsx(xr,{onClick:e,disabled:t,"aria-label":"end chat conversation",children:f.jsx("div",{className:Rt.icon,children:f.jsx(nu,{})})}),jx=({onClick:t})=>f.jsx(xr,{onClick:t,"aria-label":"minimize chat widget",children:f.jsx("div",{className:Rt.icon,children:f.jsx(Xd,{})})}),Px=({forwardedRef:t,onClick:e})=>f.jsx(xr,{forwardedRef:t,onClick:e,"aria-label":"more operations",children:f.jsx("div",{className:Rt.icon,children:f.jsx(Qd,{})})}),Nx=t=>{const{visible:e,isLoading:n=!1,onConfirm:r,onCancel:s}=t,[o]=et(),{chatDialogBoxRetryEndChat:a,chatConfirmButtonRetryEndChat:i,chatCancelButtonRetryEndChat:c}=ve(wt),l=T.useMemo(()=>({chatDialogBoxRetryEndChatTitle:o("chatConfirmButtonRetryEndChat"),chatDialogBoxRetryEndChatDescription:a||o("chatDialogBoxRetryEndChat"),chatConfirmButtonRetryEndChat:i||o("chatConfirmButtonRetryEndChat"),chatCancelButtonRetryEndChat:c||o("chatCancelButtonRetryEndChat")}),[o,a,i,c]);return f.jsx(iu,{visible:e,title:l.chatDialogBoxRetryEndChatTitle,description:l.chatDialogBoxRetryEndChatDescription,isLoading:n,onConfirm:r,onCancel:s,confirmText:l.chatConfirmButtonRetryEndChat,cancelText:l.chatCancelButtonRetryEndChat,icon:f.jsx(eu,{})})},Bx=()=>({disableDownloadTranscript:!Wv(),downloadTranscript:async()=>{const{interactionId:r}=k.getState(),s=await Bt.getState().downloadTranscript(r);s!=null&&s.error&&ut.error("Failed to download transcript for interactionId=".concat(r," error=").concat(s.error))}}),$x=[{label:"headerDownloadTranscriptButton",value:"headerDownloadTranscriptButton",icon:"download",disabled:!1},{label:"headerEndChatButton",value:"headerEndChatButton",icon:"terminate",disabled:!1}],Ox=({showEndChatButton:t,disableEndChat:e,disableDownloadTranscript:n,onDownloadTranscript:r,onEndChat:s})=>({options:T.useMemo(()=>$x.reduce((i,c)=>{switch(c.value){case"headerDownloadTranscriptButton":i.push({...c,label:c.label,disabled:n});break;case"headerEndChatButton":t&&i.push({...c,label:c.label,disabled:e});break}return i},[]),[t,e,n]),onOptionItemChange:({value:i})=>{switch(i){case"headerDownloadTranscriptButton":r==null||r();break;case"headerEndChatButton":s==null||s();break}}}),Mx=({endChat:t,endApp:e})=>{const[n,r]=T.useState(!1),[s,o]=T.useState(!1),[a,i]=T.useState(!1),c=Zv(),l=td(),u=!c||n||s||!l;return{isEndingChat:a,showConfirmEndChat:()=>{u||r(!0)},confirmEndVisible:n,retryEndVisible:s,enableEndChat:c,disableEndChat:u,onEndChat:async()=>{i(!0);const w=await t();r(!1),i(!1),w?e==null||e():o(!0)},onRetryEndChat:async()=>{i(!0);const w=await t();i(!1),w&&(o(!1),e==null||e())},onCancelRetryEndChat:()=>o(!1),onCancelConfirmEndChat:()=>r(!1)}},YS=t=>{const{chatSubtitle:e,chatTitle:n,showCloseConversationButton:r,showDownloadTranscriptButton:s}=t,[o]=et(),{end:a}=Fa(),{go:i,is:c,isNot:l,focusUserInputArea:u}=ts(),p=ed(),{isTop:m}=Yv(),{isEndingChat:y,confirmEndVisible:g,retryEndVisible:v,disableEndChat:w,onEndChat:C,onRetryEndChat:I,onCancelRetryEndChat:_,onCancelConfirmEndChat:S,showConfirmEndChat:L}=Mx({endChat:a,endApp:()=>i("end")}),{disableDownloadTranscript:x,downloadTranscript:B}=Bx(),{options:M,onOptionItemChange:H}=Ox({showEndChatButton:r,disableDownloadTranscript:x,disableEndChat:w,onDownloadTranscript:B,onEndChat:L}),N=()=>{Bt.getState().minimize()};return T.useEffect(()=>{g||u&&u()},[g,u]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{display:"none"},className:We(Rt.header,{[Rt.withBoxShadow]:l(Ee.InitialScreen),[Rt.withSeparator]:c(Ee.InitialScreen)&&!m}),children:[f.jsxs("div",{className:Rt.left,children:[f.jsx(nx,{}),f.jsxs("div",{className:Rt.desc,children:[f.jsx("p",{className:Rt.title,title:n||cr.chatTitle,children:n||cr.chatTitle}),f.jsx("p",{className:Rt.subtitle,title:e||o("poweredByTalkdesk"),children:e||o("poweredByTalkdesk")})]})]}),f.jsxs("div",{style:{visibility:"hidden"},children:[f.jsx(jx,{onClick:N}),s?f.jsx(au,{align:p?yr.LEFT:yr.RIGHT,options:M,onChange:H,customInput:f.jsx(Px,{})}):r?f.jsx(Rx,{onClick:L,disabled:w}):null]})]}),f.jsx(bx,{visible:g,onCancel:S,onConfirm:C,isLoading:y}),f.jsx(Nx,{visible:v,onCancel:_,onConfirm:I,isLoading:y})]})};var Dx="Expected a function",Ec=NaN,Fx="[object Symbol]",Vx=/^\s+|\s+$/g,Hx=/^[-+]0x[0-9a-f]+$/i,Ux=/^0b[01]+$/i,zx=/^0o[0-7]+$/i,Zx=parseInt,Wx=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,Gx=typeof self=="object"&&self&&self.Object===Object&&self,qx=Wx||Gx||Function("return this")(),Yx=Object.prototype,Kx=Yx.toString,Jx=Math.max,Xx=Math.min,Uo=function(){return qx.Date.now()};function Qx(t,e,n){var r,s,o,a,i,c,l=0,u=!1,p=!1,m=!0;if(typeof t!="function")throw new TypeError(Dx);e=Ac(e)||0,wa(n)&&(u=!!n.leading,p="maxWait"in n,o=p?Jx(Ac(n.maxWait)||0,e):o,m="trailing"in n?!!n.trailing:m);function y(x){var B=r,M=s;return r=s=void 0,l=x,a=t.apply(M,B),a}function g(x){return l=x,i=setTimeout(C,e),u?y(x):a}function v(x){var B=x-c,M=x-l,H=e-B;return p?Xx(H,o-M):H}function w(x){var B=x-c,M=x-l;return c===void 0||B>=e||B<0||p&&M>=o}function C(){var x=Uo();if(w(x))return I(x);i=setTimeout(C,v(x))}function I(x){return i=void 0,m&&r?y(x):(r=s=void 0,a)}function _(){i!==void 0&&clearTimeout(i),l=0,r=c=s=i=void 0}function S(){return i===void 0?a:I(Uo())}function L(){var x=Uo(),B=w(x);if(r=arguments,s=this,c=x,B){if(i===void 0)return g(c);if(p)return i=setTimeout(C,e),y(c)}return i===void 0&&(i=setTimeout(C,e)),a}return L.cancel=_,L.flush=S,L}function wa(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function eC(t){return!!t&&typeof t=="object"}function tC(t){return typeof t=="symbol"||eC(t)&&Kx.call(t)==Fx}function Ac(t){if(typeof t=="number")return t;if(tC(t))return Ec;if(wa(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=wa(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Vx,"");var n=Ux.test(t);return n||zx.test(t)?Zx(t.slice(2),n?2:8):Hx.test(t)?Ec:+t}var nC=Qx;const cu=eo(nC),rC=(t,e)=>t==null?t:Object.entries(t).reduce((n,[r,s])=>(e(r,s,t)&&(n[r.toLowerCase()]=s),n),{}),yo=t=>typeof t=="string"?t.toLocaleLowerCase():"",sC=async t=>!Nf.test(t)&&t?ir.t("customFieldEmailInvalidFormatMessage"):!0,oC=async t=>!Bf.test(t)&&t?ir.t("customFieldPhoneInvalidFormatMessage"):!0,aC="_wrapper_1n0k0_19",iC="_submitButton_1n0k0_24",cC="_customButton_1n0k0_46",zo={wrapper:aC,submitButton:iC,customButton:cC},lC="start_the_chat",dC=T.forwardRef((t,e)=>{const{trigger:n,label:r,submitHandle:s}=t,o=a=>{a.preventDefault(),a.stopPropagation(),n===lC&&s()};return f.jsx("div",{className:zo.customButton,children:f.jsx("div",{className:zo.wrapper,children:f.jsx("button",{type:"button",className:zo.submitButton,ref:e,title:r,onClick:o,children:r})})})}),uC="_ErrorMessage_15cbg_6",fC={ErrorMessage:uC},_o=t=>{const{message:e}=t;return f.jsx("p",{className:fC.ErrorMessage,"data-qa":"test-error-message","data-testid":"test-error-message",children:e})},pC="_isError_1rerd_11",hC="_isRequired_1rerd_18",_n={isError:pC,isRequired:hC},mC="_customDropdown_1dhdt_19",gC="_wrapper_1dhdt_24",yC="_labelWrapper_1dhdt_32",_C="_label_1dhdt_32",vC="_selectContainer_1dhdt_49",bC="_menu_1dhdt_53",wC="_visible_1dhdt_68",xC="_option_1dhdt_72",CC="_selected_1dhdt_87",SC="_dropdown_1dhdt_92",TC="_placeholder_1dhdt_125",kC="_text_1dhdt_125",EC="_input_1dhdt_138",AC="_arrow_1dhdt_142",LC="_isActive_1dhdt_147",Xe={customDropdown:mC,wrapper:gC,labelWrapper:yC,label:_C,selectContainer:vC,menu:bC,visible:wC,option:xC,selected:CC,dropdown:SC,placeholder:TC,text:kC,input:EC,arrow:AC,isActive:LC},IC=t=>{const{options:e,onChange:n,value:r,onBlur:s,isError:o,label:a,name:i}=t,c=T.useRef(null),l=T.useRef(null),u=T.useRef(!1),[p,m]=T.useState(!1),{customDropdownInputPlaceholder:y}=ve(wt),[g]=et(),v=g("customDropdownPlaceholder",{select:y||g("customDropdownInputPlaceholder"),label:yo(a),interpolation:{escapeValue:!1}}),w=()=>{m(!p)},C=S=>()=>{n(S.value),w()},I=T.useCallback(()=>{if(u.current){u.current=!1;return}m(!1)},[]),_=T.useCallback(()=>{u.current=!0},[]);return T.useEffect(()=>(document.addEventListener("click",I),()=>{document.removeEventListener("click",I)}),[I]),f.jsxs("div",{ref:c,className:Xe.selectContainer,onClickCapture:_,children:[f.jsxs("button",{className:We(Xe.dropdown,{[_n.isError]:o}),name:i,onClick:w,onBlur:s,"aria-expanded":p,"aria-labelledby":i,children:[r?f.jsx("span",{className:Xe.text,title:r,children:r}):f.jsx("span",{className:Xe.placeholder,title:v,children:v}),f.jsx(ci,{className:We(Xe.arrow,{[Xe.isActive]:p})})]}),f.jsx("ul",{className:We(Xe.menu,{[Xe.visible]:p}),role:"listbox","aria-labelledby":i,ref:l,children:e==null?void 0:e.map(S=>f.jsx("li",{role:"option","aria-selected":r===S.value,title:S.value,className:We({[Xe.selected]:r===S.value}),children:f.jsx("button",{className:We(Xe.option,{[Xe.selected]:r===S.value}),onClick:C(S),children:S.value})},S.key))})]})},RC=Ie.forwardRef((t,e)=>{const{name:n,label:r,onChange:s,onBlur:o,options:a,value:i,isError:c,required:l}=t,[u]=et();return f.jsx("div",{className:Xe.customDropdown,ref:e,children:f.jsxs("div",{className:Xe.wrapper,children:[f.jsx("div",{className:Xe.labelWrapper,children:f.jsxs("span",{className:Xe.label,id:n,children:[r,l?f.jsx("span",{"aria-label":"required",className:_n.isRequired,children:"*"}):null]})}),f.jsx(IC,{label:r,options:a,onChange:s,onBlur:o,value:i,isError:c,name:n}),c&&f.jsx(_o,{message:u("customFieldRequiredFormatMessage")})]})})}),jC="_customField_1hlud_19",PC="_wrapper_1hlud_24",NC="_labelWrapper_1hlud_33",BC="_label_1hlud_33",$C="_inputWrapper_1hlud_49",OC="_input_1hlud_49",MC="_clear_1hlud_80",En={customField:jC,wrapper:PC,labelWrapper:NC,label:BC,inputWrapper:$C,input:OC,clear:MC},DC=Ie.forwardRef((t,e)=>{const{name:n,label:r,resetField:s,onChange:o,onBlur:a,value:i,defaultValue:c,isError:l,required:u}=t,{customFieldInputPlaceholder:p,customFieldEmailInvalidFormatMessage:m}=ve(wt),[y]=et();return f.jsx("div",{className:En.customField,children:f.jsxs("div",{className:En.wrapper,children:[f.jsx("div",{className:En.labelWrapper,children:f.jsxs("p",{className:En.label,id:n,children:[r,u?f.jsx("span",{className:_n.isRequired,"aria-label":"required",children:"*"}):null]})}),f.jsxs("div",{className:En.inputWrapper,children:[f.jsx("input",{ref:e,value:i||"",autoComplete:"off",className:We(En.input,{[_n.isError]:l}),name:n,onChange:o,onBlur:a,placeholder:p?y("customFieldPlaceholder",{type:p,label:yo(r),interpolation:{escapeValue:!1}}):"","aria-labelledby":n}),i&&i!==c&&f.jsx("button",{"aria-label":"reset ".concat(r),className:En.clear,onClick:()=>s(n,{keepError:!0}),children:f.jsx(go,{})})]}),l&&f.jsx(_o,{message:m||y("customFieldEmailInvalidFormatMessage")})]})})}),FC="_customField_19gzc_19",VC="_wrapper_19gzc_24",HC="_labelWrapper_19gzc_33",UC="_helper_19gzc_39",zC="_label_19gzc_33",ZC="_inputWrapper_19gzc_56",WC="_input_19gzc_56",GC="_clear_19gzc_87",an={customField:FC,wrapper:VC,labelWrapper:HC,helper:UC,label:zC,inputWrapper:ZC,input:WC,clear:GC},qC=Ie.forwardRef((t,e)=>{const{name:n,label:r,resetField:s,onChange:o,onBlur:a,value:i,defaultValue:c,isError:l,required:u}=t,{customFieldPhoneDescription:p,customFieldInputPlaceholder:m,customFieldPhoneInvalidFormatMessage:y}=ve(wt),[g]=et();return f.jsx("div",{className:an.customField,children:f.jsxs("div",{className:an.wrapper,children:[f.jsx("div",{className:an.labelWrapper,children:f.jsxs("div",{className:an.label,id:n,children:[r,u?f.jsx("span",{className:_n.isRequired,"aria-label":"required",children:"*"}):null,f.jsx("div",{className:an.helper,children:p||g("customFieldPhoneDescription")})]})}),f.jsxs("div",{className:an.inputWrapper,children:[f.jsx("input",{ref:e,value:i||"",autoComplete:"off",className:We(an.input,{[_n.isError]:l}),name:n,onChange:o,onBlur:a,placeholder:m?g("customFieldPlaceholder",{type:m,label:yo(r),interpolation:{escapeValue:!1}}):"","aria-labelledby":n}),i&&i!==c&&f.jsx("button",{"aria-label":"reset ".concat(r),className:an.clear,onClick:()=>s(n,{keepError:!0}),children:f.jsx(go,{})})]}),l&&f.jsx(_o,{message:y||g("customFieldPhoneInvalidFormatMessage")})]})})}),xa=t=>{const{target:e,className:n="custom-bot"}=t,{linkProtocol:r,linkTarget:s}=ve(wt);return e?f.jsx(_f,{className:n,as:"span",options:{defaultProtocol:r||cr.linkProtocol,target:s||cr.linkTarget,rel:"noopener noreferrer"},children:e}):null},YC="_customMessage_1bdmg_19",KC="_avatarWrapper_1bdmg_26",JC="_avatarWrapperAlign_1bdmg_42",XC="_wrapper_1bdmg_46",QC="_messageContent_1bdmg_51",eS="_isBubble_1bdmg_69",Jn={customMessage:YC,avatarWrapper:KC,avatarWrapperAlign:JC,wrapper:XC,messageContent:QC,isBubble:eS},tS=Ie.forwardRef((t,e)=>{const{message:n,isBubble:r}=t,{botIcon:s,botIconVerticalAlign:o}=ve(wt);return f.jsxs("div",{className:Jn.customMessage,ref:e,children:[r?f.jsx("div",{className:We(Jn.avatarWrapper,{[Jn.avatarWrapperAlign]:(o||cr.botIconVerticalAlign)==="top"}),children:f.jsx(Vl,{url:s})}):null,f.jsx("div",{className:Jn.wrapper,children:f.jsx("div",{className:We(Jn.messageContent,{[Jn.isBubble]:r}),children:f.jsx(xa,{target:n})})})]})}),nS="_customField_ns1ou_19",rS="_wrapper_ns1ou_24",sS="_labelWrapper_ns1ou_33",oS="_label_ns1ou_33",aS="_inputWrapper_ns1ou_49",iS="_input_ns1ou_49",cS="_clear_ns1ou_80",An={customField:nS,wrapper:rS,labelWrapper:sS,label:oS,inputWrapper:aS,input:iS,clear:cS},lS=Ie.forwardRef((t,e)=>{const{name:n,label:r,resetField:s,onChange:o,onBlur:a,value:i,defaultValue:c,isError:l,required:u}=t,{customFieldInputPlaceholder:p}=ve(wt),[m]=et();return f.jsx("div",{className:An.customField,children:f.jsxs("div",{className:An.wrapper,children:[f.jsx("div",{className:An.labelWrapper,children:f.jsxs("p",{className:An.label,id:n,children:[r,u?f.jsx("span",{className:_n.isRequired,"aria-label":"required",children:"*"}):null]})}),f.jsxs("div",{className:An.inputWrapper,children:[f.jsx("input",{ref:e,value:i||"",autoComplete:"off",className:We(An.input,{[_n.isError]:l}),name:n,onChange:o,onBlur:a,placeholder:p?m("customFieldPlaceholder",{type:p,label:yo(r),interpolation:{escapeValue:!1}}):"","aria-labelledby":n}),i&&i!==c&&f.jsx("button",{"aria-label":"reset ".concat(r),className:An.clear,onClick:()=>s(n,{keepError:!0}),children:f.jsx(go,{})})]}),l&&f.jsx(_o,{message:m("customFieldRequiredFormatMessage")})]})})}),dS="_container_1a188_19",uS="_title_1a188_27",fS="_subTitle_1a188_41",Zo={container:dS,title:uS,subTitle:fS},pS=t=>{const{title:e,subTitle:n}=t;return!e&&!n?null:f.jsxs("div",{className:Zo.container,children:[e&&f.jsx("p",{className:Zo.title,children:f.jsx(xa,{target:e})}),n&&f.jsx("p",{className:Zo.subTitle,children:f.jsx(xa,{target:n})})]})},hS="_initialScreen_ced3c_19",mS={initialScreen:hS},gS={field_email:sC,field_number:oC},KS=T.forwardRef(function(t,e){const{controls:n,welcomeMessage:r,onSubmitInitialScreen:s,defaultValues:o,enableValidation:a,active:i,updateChatFrameHeight:c}=t,l=T.useRef(!1),{updateInitialScreenHeight:u}=ts(),{osRef:p,onScroll:m}=zd({scene:"InitialScreen"}),{handleSubmit:y,control:g,formState:{errors:v},resetField:w}=vf({mode:"onChange",shouldFocusError:!1}),C=T.useCallback(_=>{const S=rC(_,(x,B)=>!!B),L={...o,...S};typeof s=="function"&&s(L,l.current)},[o,s]),I=_=>{_.preventDefault(),_.stopPropagation()};return T.useEffect(()=>{if(!i)return;const _=n.filter(x=>x.type==="field"||x.type==="dropdown"),S=_.reduce((x,B)=>(x[B.argument]=(o==null?void 0:o[B.argument])||void 0,x),{});_.length>0&&Object.values(S).every(x=>x!==void 0)?C(o):_.forEach(x=>w(x.argument,{defaultValue:o==null?void 0:o[x.argument]}))},[n,w,o,i,C]),T.useEffect(()=>{var L;const _=(L=p.current)==null?void 0:L.getElement();if(!_)return;const S=new MutationObserver(cu(async()=>{const x=await c();u(x)},100));return S.observe(_,{childList:!0,subtree:!0,attributeFilter:["data-initial-screen-loaded"]}),()=>{S.disconnect()}},[p,c,u]),i?f.jsx(si,{ref:p,className:mS.initialScreen,options:{scrollbars:{autoHide:"scroll"}},events:{scroll:m},children:f.jsxs("div",{ref:e,children:[f.jsx(pS,{title:r==null?void 0:r.title,subTitle:r==null?void 0:r.subtitle}),f.jsx("form",{onSubmit:I,"data-testid":"form",children:n.map(_=>{const S=(o==null?void 0:o[_.argument])||"";if(_.type==="button")return f.jsx("div",{children:f.jsx(dC,{label:_.label,trigger:_.trigger,submitHandle:()=>{l.current=!!(_!=null&&_.enable_start_conversation),y(C)()}},_.key)},_.key);if(_.type==="message")return f.jsx("div",{children:f.jsx(tS,{isBubble:_.isBubble,message:_.value},_.key)},_.key);if(_.type==="dropdown")return f.jsx("div",{children:f.jsx(Ao,{name:_==null?void 0:_.argument,control:g,rules:{required:_==null?void 0:_.required},defaultValue:S,render:({field:L})=>{var x;return f.jsx(RC,{...L,label:_.label,options:_.options||[],required:_.required,isError:((x=v[_==null?void 0:_.argument])==null?void 0:x.type)==="required"})}})},_.key);if(_.type==="field")if(a&&["field_email","field_number"].includes(_.define)){const L=_.define==="field_email"?DC:qC;return f.jsx("div",{children:f.jsx(Ao,{name:_==null?void 0:_.argument,control:g,rules:{required:_==null?void 0:_.required,validate:["field_email","field_number"].includes(_==null?void 0:_.define)?gS[_==null?void 0:_.define]:void 0},defaultValue:S,render:({field:x})=>{var B,M;return f.jsx(L,{...x,defaultValue:S,resetField:w,label:_.label,required:_.required,isError:((B=v[_==null?void 0:_.argument])==null?void 0:B.type)==="required"||((M=v[_==null?void 0:_.argument])==null?void 0:M.type)==="validate"})}})},_.key)}else return f.jsx("div",{children:f.jsx(Ao,{name:_==null?void 0:_.argument,control:g,rules:{required:_==null?void 0:_.required},defaultValue:S,render:({field:L})=>{var x;return f.jsx(lS,{...L,defaultValue:S,resetField:w,label:_.label,required:_.required,isError:((x=v[_==null?void 0:_.argument])==null?void 0:x.type)==="required"})}})},_.key)})})]})}):f.jsx(f.Fragment,{})}),yS="_hiddenInput_fp29e_6",_S={hiddenInput:yS},vS=t=>{const{disabled:e,onChange:n}=t,r=a=>{const i=a.target.files;if(i){for(let c=0;c<i.length;c++){if(Ll.indexOf(i[c].type)<0)return;const l=new FormData;l.append("file",i[c]);let p=Al(i[c].type).prefix;if(i[c].type==="application/pdf"&&(p="file"),i[c].size>Pr.FILE_SIZE)return;n(l,p)}s.current&&(s.current.value="")}},s=T.useRef(null),o=()=>{var a;(a=s.current)==null||a.click()};return f.jsxs(xr,{onClick:o,disabled:e,"aria-label":"upload attachment",children:[f.jsx("input",{type:"file","aria-hidden":!0,accept:my,onChange:r,ref:s,tabIndex:-1,"data-testid":"file-input",className:_S.hiddenInput}),f.jsx(qd,{})]})},Wo={"emoji-picker":"_emoji-picker_nu187_19","emoji-picker-wrapper":"_emoji-picker-wrapper_nu187_40","emoji-picker-rtl":"_emoji-picker-rtl_nu187_94"},bS=T.lazy(()=>xe(()=>import("./emoji-picker-react.esm-BuoC0-mk.js"),__vite__mapDeps([33,1]),import.meta.url)),wS=t=>{const{onEmojiClick:e,visible:n,onTogglePicker:r,enableRTL:s=!1,bottom:o}=t,[a]=et(),i=T.useRef(null),c=T.useMemo(()=>({searchPlaceholder:a("emojiSearchPlaceholder"),categories:[{name:a("emojiCategorySuggested"),category:"suggested"},{name:a("emojiCategorySmileysPeople"),category:"smileys_people"},{name:a("emojiCategoryAnimalsNature"),category:"animals_nature"},{name:a("emojiCategoryFoodDrink"),category:"food_drink"},{name:a("emojiCategoryTravelPlaces"),category:"travel_places"},{name:a("emojiCategoryActivities"),category:"activities"},{name:a("emojiCategoryObjects"),category:"objects"},{name:a("emojiCategorySymbols"),category:"symbols"},{name:a("emojiCategoryFlags"),category:"flags"}]}),[a]);return T.useEffect(()=>{function l(u){i.current&&!i.current.contains(u.target)&&n&&r()}return document.addEventListener("click",l,!1),()=>{document.removeEventListener("click",l,!1)}},[r,n]),f.jsx("div",{className:[Wo["emoji-picker"],s?Wo["emoji-picker-rtl"]:""].filter(Boolean).join(" "),"data-testid":"emoji-picker",ref:i,"aria-hidden":!n,"aria-label":"emoji",style:{bottom:o},children:n&&f.jsx(T.Suspense,{fallback:f.jsx(Ha,{size:"medium"}),children:f.jsx(bS,{width:"100%",height:"100%",className:Wo["emoji-picker-wrapper"],previewConfig:{showPreview:!1},emojiStyle:"native",onEmojiClick:e,suggestedEmojisMode:"recent",lazyLoadEmojis:!0,autoFocusSearch:!0,searchPlaceholder:c.searchPlaceholder,categories:c.categories})})})},xS=t=>{const{visible:e,setVisible:n,enableRTL:r=!1,bottom:s,onSelect:o}=t;return f.jsx(Hl,{fallback:f.jsx(f.Fragment,{}),onError:ai,children:f.jsx(wS,{visible:e,bottom:s,onTogglePicker:n,onEmojiClick:o,enableRTL:r})})},CS=({disabled:t,onClick:e})=>f.jsx(xr,{onClick:e,disabled:t,"aria-label":"add emoji",children:f.jsx(Jd,{})}),SS=t=>{const{disabled:e,onClick:n}=t,r=()=>{e||n()};return f.jsx(xr,{onClick:r,disabled:e,"aria-label":"send message",children:f.jsx(tu,{})})},TS="_withSeparator_rldhy_27",Cs={"user-input-area":"_user-input-area_rldhy_19",withSeparator:TS,"textarea-container":"_textarea-container_rldhy_31","action-buttons":"_action-buttons_rldhy_67"},JS=t=>{const[e,n]=T.useState(!1),{enableEmoji:r,enableAttachments:s,send:o,typing:a,connected:i,enableRTL:c=!1,showScreenLoading:l=!1}=t,[u,p]=T.useState(""),{chatPlaceholder:m,chatAriaLabel:y}=ve(wt),[g]=et(),[v,w]=T.useState(null),C=Ql(),{scrollOffset:I,isBottom:_}=qv(),S=T.useMemo(()=>({chatPlaceholder:m||g("chatPlaceholder"),chatAriaLabel:y||g("chatAriaLabel")}),[g,m,y]);T.useEffect(()=>(k.setState({userInputAreaRef:v}),C&&!l&&(v==null||v.focus()),()=>{k.setState({userInputAreaRef:null})}),[v,C,l]),T.useEffect(()=>{u.length>0&&k.getState().typingMode!=="va"&&a()},[u,a]);const L=async()=>{u.trim()&&(n(!1),v==null||v.focus(),o({data:u.trim(),type:"text"}),p(""))},x=E=>{const z=E.target.value;p(z)},B=T.useRef(cu(()=>{n(E=>!E)},0)).current,M=E=>{p(z=>"".concat(z).concat(E.emoji)),v==null||v.focus()},H=async E=>{E.nativeEvent.isComposing||E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),await L())},N=(E,z)=>{o({data:E,type:z}),v==null||v.focus()};return f.jsx("div",{id:"user-input-area",className:We(Cs["user-input-area"],{[Cs.withSeparator]:I>0&&!_}),"data-testid":"user-input-area",children:f.jsxs("div",{className:Cs["textarea-container"],children:[f.jsx(bf,{name:"text",ref:E=>w(E),placeholder:S.chatPlaceholder,maxLength:1e3,wrap:"soft",maxRows:4,onChange:x,value:u,"aria-label":S.chatAriaLabel,onKeyDown:E=>H(E),enterKeyHint:"send",disabled:!i}),f.jsxs("div",{className:Cs["action-buttons"],children:[s?f.jsx(vS,{disabled:!i,onChange:N}):null,r?f.jsx(CS,{disabled:!i,onClick:B}):null,f.jsx(SS,{disabled:!i||!u.trim(),onClick:L})]}),r&&f.jsx(xS,{bottom:(v==null?void 0:v.offsetHeight)||Pf,visible:e,setVisible:B,onSelect:M,enableRTL:c})]})})},kS="_chat_1oxpe_6",ES="_isDisabled_1oxpe_15",AS="_loadingWrapper_1oxpe_20",XS={chat:kS,isDisabled:ES,loadingWrapper:AS};export{Ts as $,$S as A,zS as B,XS as C,YS as D,qS as E,Ct as F,Hl as G,VS as H,KS as I,GS as J,HS as K,yt as L,Bt as M,OS as N,nc as O,Ee as P,Yt as Q,zw as R,s_ as S,cu as T,JS as U,Uf as V,PS as W,jS as X,NS as Y,t_ as Z,xe as _,FS as a,DS as b,Zy as c,Ql as d,US as e,Nc as f,Ss as g,ve as h,ZS as i,Gv as j,qv as k,ut as l,We as m,Pc as n,k as o,q_ as p,Nv as q,Wy as r,Oc as s,Fa as t,MS as u,td as v,ts as w,ed as x,BS as y,WS as z};
